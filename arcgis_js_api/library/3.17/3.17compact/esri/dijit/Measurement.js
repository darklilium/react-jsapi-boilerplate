// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.17/esri/copyright.txt for details.
//>>built
require({cache:{"dojo/debounce":function(){define([],function(){return function(n,m){var f;return function(){f&&clearTimeout(f);var k=this,d=arguments;f=setTimeout(function(){n.apply(k,d)},m)}}})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(n,m,f,k,d,h,p,g,c,e,b,z,q){function t(){}
function v(a){return function(l,b,c,e){return l&&"string"==typeof b&&l[b]==t?l.on(b.substring(2).toLowerCase(),p.hitch(c,e)):a.apply(f,arguments)}}n.around(f,"connect",v);h.connect&&n.around(h,"connect",v);n=k("dijit._Widget",[b,z,q],{onClick:t,onDblClick:t,onKeyDown:t,onKeyPress:t,onKeyUp:t,onMouseDown:t,onMouseMove:t,onMouseOut:t,onMouseOver:t,onMouseLeave:t,onMouseEnter:t,onMouseUp:t,constructor:function(a){this._toConnect={};for(var l in a)this[l]===t&&(this._toConnect[l.replace(/^on/,"").toLowerCase()]=
a[l],delete a[l])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,l){return this[this._onMap(a)]===t?f.connect(this.domNode,a.toLowerCase(),this,l):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,l){h.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,l)},attr:function(a,
l){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){h.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?g("[widgetId]",this.containerNode).map(e.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});d("dijit-legacy-requires")&&c(0,function(){require(["dijit/_base"])});return n})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(n,m,f,k,d,h,p,g,c,e,b,z,q,t,v,a,l,s,x,u,A,w,r){function y(a){return function(l){g[l?"set":"remove"](this.domNode,a,l);this._set(a,l)}}q.add("dijit-legacy-requires",!t.isAsync);q.add("dojo-bidi",!1);q("dijit-legacy-requires")&&l(0,function(){n(["dijit/_base/manager"])});var K={};k=h("dijit._WidgetBase",[s,A],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:y("lang"),dir:"",_setDirAttr:y("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:k.blankGif||n.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var l=a.prototype,b=a._setterAttrs=[],a=a._onMap={},s;for(s in l.attributeMap)b.push(s);for(s in l)/^on/.test(s)&&(a[s.substring(2).toLowerCase()]=s),/^_set[A-Z](.*)Attr$/.test(s)&&(s=s.charAt(4).toLowerCase()+
s.substr(5,s.length-9),(!l.attributeMap||!(s in l.attributeMap))&&b.push(s))}},postscript:function(a,l){this.create(a,l)},create:function(a,l){this._introspect();this.srcNodeRef=p.byId(l);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&(this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id)&&(this.id=this.srcNodeRef.id);a&&(this.params=a,v.mixin(this,a));this.postMixInProperties();this.id||(this.id=r.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);
this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=u.body(this.ownerDocument);r.add(this);this.buildRendering();var b;if(this.domNode){this._applyAttributes();var s=this.srcNodeRef;s&&(s.parentNode&&this.domNode!==s)&&(s.parentNode.replaceChild(this.domNode,s),b=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();b&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},l;for(l in this.params||
{})a[l]=this._get(l);m.forEach(this.constructor._setterAttrs,function(l){if(!(l in a)){var b=this._get(l);b&&this.set(l,b)}},this);for(l in a)this.set(l,a[l])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(m.map(a,function(a){return a+"Rtl"})));c.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||
(this._started=!0,m.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&v.isFunction(a.startup))&&(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function l(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0;this.uninitialize();m.forEach(this._connects,v.hitch(this,"disconnect"));m.forEach(this._supportingWidgets,l);this.domNode&&m.forEach(r.findWidgets(this.domNode,
this.containerNode),l);this.destroyRendering(a);r.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?g.remove(this.domNode,"widgetId"):e.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||e.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){m.forEach(this.getChildren(),function(l){l.destroyRecursive&&l.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var l=
this.domNode;v.isObject(a)?z.set(l,a):l.style.cssText=l.style.cssText?l.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,l,b){b=3<=arguments.length?b:this.attributeMap[a];m.forEach(v.isArray(b)?b:[b],function(b){var s=this[b.node||b||"domNode"];switch(b.type||"attribute"){case "attribute":v.isFunction(l)&&(l=v.hitch(this,l));b=b.attribute?b.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;s.tagName?g.set(s,b,l):s.set(b,l);break;case "innerText":s.innerHTML="";s.appendChild(this.ownerDocument.createTextNode(l));
break;case "innerHTML":s.innerHTML=l;break;case "class":c.replace(s,l,this[a]);break;case "toggleClass":c.toggle(s,b.className||a,l)}},this)},get:function(a){var l=this._getAttrNames(a);return this[l.g]?this[l.g]():this._get(a)},set:function(a,l){if("object"===typeof a){for(var b in a)this.set(b,a[b]);return this}b=this._getAttrNames(a);var s=this[b.s];if(v.isFunction(s))var c=s.apply(this,Array.prototype.slice.call(arguments,1));else{var s=this.focusNode&&!v.isFunction(this.focusNode)?"focusNode":
"domNode",x=this[s]&&this[s].tagName,e;if(e=x)if(!(e=K[x])){e=this[s];var r={},u;for(u in e)r[u.toLowerCase()]=!0;e=K[x]=r}u=e;b=a in this.attributeMap?this.attributeMap[a]:b.s in this?this[b.s]:u&&b.l in u&&"function"!=typeof l||/^aria-|^data-|^role$/.test(a)?s:null;null!=b&&this._attrToDom(a,l,b);this._set(a,l)}return c||this},_attrPairNames:{},_getAttrNames:function(a){var l=this._attrPairNames;if(l[a])return l[a];var b=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});
return l[a]={n:a+"Node",s:"_set"+b+"Attr",g:"_get"+b+"Attr",l:b.toLowerCase()}},_set:function(a,l){var b=this[a];this[a]=l;if(this._created&&!(b===l||b!==b&&l!==l))this._watchCallbacks&&this._watchCallbacks(a,b,l),this.emit("attrmodified-"+a,{detail:{prevValue:b,newValue:l}})},_get:function(a){return this[a]},emit:function(l,b,s){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var c,x=this["on"+l];x&&(c=x.apply(this,
s?s:[b]));this._started&&!this._beingDestroyed&&a.emit(this.domNode,l.toLowerCase(),b);return c},on:function(l,b){var s=this._onMap(l);return s?f.after(this,s,b,!0):this.own(a(this.domNode,l,b))[0]},_onMap:function(a){var l=this.constructor,b=l._onMap;if(!b){var b=l._onMap={},s;for(s in l.prototype)/^on/.test(s)&&(b[s.replace(/^on/,"").toLowerCase()]=s)}return b["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?
r.findWidgets(this.containerNode):[]},getParent:function(){return r.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,l,b){return this.own(d.connect(a,l,this,b))[0]},disconnect:function(a){a.remove()},subscribe:function(a,l){return this.own(x.subscribe(a,v.hitch(this,l)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():b.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=z.get(this.domNode,"display")},
placeAt:function(a,l){var b=!a.tagName&&r.byId(a);b&&b.addChild&&(!l||"number"===typeof l)?b.addChild(this,l):(b=b&&"domNode"in b?b.containerNode&&!/after|before|replace/.test(l||"")?b.containerNode:b.domNode:p.byId(a,this.ownerDocument),e.place(this.domNode,b,l),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(a,l){var b=setTimeout(v.hitch(this,function(){b&&(b=null,this._destroyed||v.hitch(this,a)())}),l||0);return{remove:function(){b&&(clearTimeout(b),
b=null);return null}}}});q("dojo-bidi")&&k.extend(w);return k})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(n,m,f){return f("dijit.Destroyable",null,{destroy:function(k){this._destroyed=!0},own:function(){var k=["destroyRecursive","destroy","remove"];n.forEach(arguments,function(d){function f(){g.remove();n.forEach(c,function(c){c.remove()})}var p,g=m.before(this,"destroy",function(c){d[p](c)}),c=[];d.then?(p="cancel",d.then(f,f)):n.forEach(k,
function(e){"function"===typeof d[e]&&(p||(p=e),c.push(m.after(d,e,f,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(n,m,f,k,d,h){n=k("dijit._OnDijitClickMixin",null,{connect:function(d,g,c){return this.inherited(arguments,[d,"ondijitclick"==g?h:g,c])}});n.a11yclick=h;return n})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],
function(n,m,f,k){k.extend(m,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return f("dijit._FocusMixin",null,{_focusManager:n})})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(n,m,f,k){f(function(){m("highcontrast")&&n.add(k.body(),"dijit_a11y")});return m})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),
function(n,m,f,k,d,h,p){d.add("highcontrast",function(){var g=p.doc.createElement("div");try{g.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(m.blankGif||n.toUrl("./resources/blank.gif"))+'");';p.body().appendChild(g);var c=k.getComputedStyle(g),e=c.backgroundImage;return c.borderTopColor==c.borderRightColor||e&&("none"==e||"url(invalid-url:)"==e)}catch(b){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+
b.toString()),!1}finally{8>=d("ie")?g.outerHTML="":p.body().removeChild(g)}});h(function(){d("highcontrast")&&f.add(p.body(),"dj_a11y")});return d})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),function(n,m,f,k,d,h,p,g,c,e,b,z,q,t,v,a){b("dijit-legacy-requires")&&a(0,function(){n(["dijit/MenuItem",
"dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return f("dijit.Menu",v,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):m.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return q.get(this._iframeContentDocument(a))||this._iframeContentDocument(a).__parent__||
a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(a){a=k.byId(a,this.ownerDocument);var b;if("iframe"==a.tagName.toLowerCase()){var x=a;b=this._iframeContentWindow(x);b=z.body(b.document)}else b=a==z.body(this.ownerDocument)?this.ownerDocument.documentElement:a;var u={node:a,iframe:x};d.set(a,"_dijitMenu"+this.id,
this._bindings.push(u));var q=c.hitch(this,function(a){var l=this.selector,b=l?function(a){return e.selector(l,a)}:function(a){return a},s=this;return[e(a,b(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();(new Date).getTime()<s._lastKeyDown+500||s._scheduleOpen(this,x,{x:a.pageX,y:a.pageY},a.target)}),e(a,b("keydown"),function(a){if(93==a.keyCode||a.shiftKey&&a.keyCode==g.F10||s.leftClickToOpen&&a.keyCode==g.SPACE)a.stopPropagation(),a.preventDefault(),
s._scheduleOpen(this,x,null,a.target),s._lastKeyDown=(new Date).getTime()})]});u.connects=b?q(b):[];x&&(u.onloadHandler=c.hitch(this,function(){var a=this._iframeContentWindow(x),a=z.body(a.document);u.connects=q(a)}),x.addEventListener?x.addEventListener("load",u.onloadHandler,!1):x.attachEvent("onload",u.onloadHandler))},unBindDomNode:function(a){var b;try{b=k.byId(a,this.ownerDocument)}catch(c){return}a="_dijitMenu"+this.id;if(b&&d.has(b,a)){for(var e=d.get(b,a)-1,q=this._bindings[e],w;w=q.connects.pop();)w.remove();
(w=q.iframe)&&(w.removeEventListener?w.removeEventListener("load",q.onloadHandler,!1):w.detachEvent("onload",q.onloadHandler));d.remove(b,a);delete this._bindings[e]}},_scheduleOpen:function(a,b,c,e){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:e,delegatedTarget:a,iframe:b,coords:c})},1))},_openMyself:function(a){function s(){m.refocus&&z&&z.focus();t.close(m)}var c=a.target,e=a.iframe,q=a.coords,d=!q;this.currentTarget=a.delegatedTarget;
if(q){if(e){a=h.position(e,!0);var c=this._iframeContentWindow(e),c=h.docScroll(c.document),r=p.getComputedStyle(e),g=p.toPixelValue,f=(b("ie")&&b("quirks")?0:g(e,r.paddingLeft))+(b("ie")&&b("quirks")?g(e,r.borderLeftWidth):0),e=(b("ie")&&b("quirks")?0:g(e,r.paddingTop))+(b("ie")&&b("quirks")?g(e,r.borderTopWidth):0);q.x+=a.x+f-c.x;q.y+=a.y+e-c.y}}else q=h.position(c,!0),q.x+=10,q.y+=10;var m=this,e=this._focusManager.get("prevNode");a=this._focusManager.get("curNode");var z=!a||k.isDescendant(a,
this.domNode)?e:a;t.open({popup:this,x:q.x,y:q.y,onExecute:s,onCancel:s,orient:this.isLeftToRight()?"L":"R"});this.focus();d||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);t.close(this)}},destroy:function(){m.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),
function(n,m,f,k,d,h,p,g,c,e,b,z,q,t,v,a){function l(){this._popupWrapper&&(h.destroy(this._popupWrapper),delete this._popupWrapper)}f=f(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var a=this._firstAroundPosition,l=p.position(this._firstAroundNode,!0),c=l.x-a.x,a=l.y-a.y;if(c||a){this._firstAroundPosition=l;for(l=0;l<this._stack.length;l++){var e=this._stack[l].wrapper.style;e.top=parseFloat(e.top)+a+"px";"auto"==e.right?e.left=parseFloat(e.left)+
c+"px":e.right=parseFloat(e.right)-c+"px"}}this._aroundMoveListener=setTimeout(b.hitch(this,"_repositionAll"),c||a?10:50)}},_createWrapper:function(a){var b=a._popupWrapper,c=a.domNode;b||(b=h.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),b.appendChild(c),c=c.style,c.display="",c.visibility="",c.position="",c.top="0px",a._popupWrapper=b,m.after(a,"destroy",l,!0),"ontouchend"in document&&z(b,"touchend",
function(a){/^(input|button|textarea)$/i.test(a.target.tagName)||a.preventDefault()}),b.dojoClick=!0);return b},moveOffScreen:function(a){var b=this._createWrapper(a);a=p.isBodyLtr(a.ownerDocument);var l={visibility:"hidden",top:"-9999px",display:""};l[a?"left":"right"]="-9999px";l[a?"right":"left"]="auto";g.set(b,l);return b},hide:function(a){var b=this._createWrapper(a);g.set(b,{display:"none",height:"auto",overflowY:"visible",border:""});a=a.domNode;"_originalStyle"in a&&(a.style.cssText=a._originalStyle)},
getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(a){for(var l=this._stack,u=a.popup,f=u.domNode,w=a.orient||["below","below-alt","above","above-alt"],r=a.parent?a.parent.isLeftToRight():p.isBodyLtr(u.ownerDocument),y=a.around,m=a.around&&a.around.id?a.around.id+"_dropdown":"popup_"+this._idGen++;l.length&&(!a.parent||!k.isDescendant(a.parent.domNode,l[l.length-1].widget.domNode));)this.close(l[l.length-1].widget);var h=this.moveOffScreen(u);
u.startup&&!u._started&&u.startup();var n,L=p.position(f);if("maxHeight"in a&&-1!=a.maxHeight)n=a.maxHeight||Infinity;else{n=v.getEffectiveBox(this.ownerDocument);var N=y?p.position(y,!1):{y:a.y-(a.padding||0),h:2*(a.padding||0)};n=Math.floor(Math.max(N.y,n.h-(N.y+N.h)))}L.h>n&&(L=g.getComputedStyle(f),g.set(h,{overflowY:"scroll",height:n+"px",border:L.borderLeftWidth+" "+L.borderLeftStyle+" "+L.borderLeftColor}),f._originalStyle=f.style.cssText,f.style.border="none");d.set(h,{id:m,style:{zIndex:this._beginZIndex+
l.length},"class":"dijitPopup "+(u.baseClass||u["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:a.parent?a.parent.id:""});0==l.length&&y&&(this._firstAroundNode=y,this._firstAroundPosition=p.position(y,!0),this._aroundMoveListener=setTimeout(b.hitch(this,"_repositionAll"),50));c("config-bgIframe")&&!u.bgIframe&&(u.bgIframe=new t(h));m=u.orient?b.hitch(u,"orient"):null;w=y?q.around(h,y,w,r,m):q.at(h,a,"R"==w?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],a.padding,m);h.style.visibility="visible";
f.style.visibility="visible";f=[];f.push(z(h,"keydown",b.hitch(this,function(b){if(b.keyCode==e.ESCAPE&&a.onCancel)b.stopPropagation(),b.preventDefault(),a.onCancel();else if(b.keyCode==e.TAB&&(b.stopPropagation(),b.preventDefault(),(b=this.getTopPopup())&&b.onCancel))b.onCancel()})));u.onCancel&&a.onCancel&&f.push(u.on("cancel",a.onCancel));f.push(u.on(u.onExecute?"execute":"change",b.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));l.push({widget:u,wrapper:h,parent:a.parent,
onExecute:a.onExecute,onCancel:a.onCancel,onClose:a.onClose,handlers:f});if(u.onOpen)u.onOpen(w);return w},close:function(a){for(var b=this._stack;a&&n.some(b,function(b){return b.widget==a})||!a&&b.length;){var l=b.pop(),c=l.widget,e=l.onClose;c.bgIframe&&(c.bgIframe.destroy(),delete c.bgIframe);if(c.onClose)c.onClose();for(var q;q=l.handlers.pop();)q.remove();c&&c.domNode&&this.hide(c);e&&e()}0==b.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=
this._aroundMoveListener=null)}});return a.popup=new f})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(n,m,f,k,d,h,p){function g(c,b,g,q){var t=h.getEffectiveBox(c.ownerDocument);(!c.parentNode||"body"!=String(c.parentNode.tagName).toLowerCase())&&d.body(c.ownerDocument).appendChild(c);var k=null;n.some(b,function(a){var b=a.corner,l=a.pos,d=0,w={w:{L:t.l+t.w-l.x,R:l.x-t.l,M:t.w}[b.charAt(1)],
h:{T:t.t+t.h-l.y,B:l.y-t.t,M:t.h}[b.charAt(0)]},r=c.style;r.left=r.right="auto";g&&(d=g(c,a.aroundCorner,b,w,q),d="undefined"==typeof d?0:d);var f=c.style,h=f.display,p=f.visibility;"none"==f.display&&(f.visibility="hidden",f.display="");r=m.position(c);f.display=h;f.visibility=p;h={L:l.x,R:l.x-r.w,M:Math.max(t.l,Math.min(t.l+t.w,l.x+(r.w>>1))-r.w)}[b.charAt(1)];p={T:l.y,B:l.y-r.h,M:Math.max(t.t,Math.min(t.t+t.h,l.y+(r.h>>1))-r.h)}[b.charAt(0)];l=Math.max(t.l,h);f=Math.max(t.t,p);h=Math.min(t.l+t.w,
h+r.w);p=Math.min(t.t+t.h,p+r.h);h-=l;p-=f;d+=r.w-h+(r.h-p);if(null==k||d<k.overflow)k={corner:b,aroundCorner:a.aroundCorner,x:l,y:f,w:h,h:p,overflow:d,spaceAvailable:w};return!d});k.overflow&&g&&g(c,k.aroundCorner,k.corner,k.spaceAvailable,q);b=k.y;var a=k.x,l=d.body(c.ownerDocument);/relative|absolute/.test(f.get(l,"position"))&&(b-=f.get(l,"marginTop"),a-=f.get(l,"marginLeft"));l=c.style;l.top=b+"px";l.left=a+"px";l.right="auto";return k}var c={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return p.place={at:function(e,
b,d,q,f){d=n.map(d,function(e){var a={corner:e,aroundCorner:c[e],pos:{x:b.x,y:b.y}};q&&(a.pos.x+="L"==e.charAt(1)?q.x:-q.x,a.pos.y+="T"==e.charAt(0)?q.y:-q.y);return a});return g(e,d,f)},around:function(c,b,d,q,h){function p(a,b){J.push({aroundCorner:a,corner:b,pos:{x:{L:w,R:w+y,M:w+(y>>1)}[a.charAt(1)],y:{T:r,B:r+K,M:r+(K>>1)}[a.charAt(0)]}})}var a;if("string"==typeof b||"offsetWidth"in b||"ownerSVGElement"in b){if(a=m.position(b,!0),/^(above|below)/.test(d[0])){var l=m.getBorderExtents(b),s=b.firstChild?
m.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0},x=m.getBorderExtents(c),u=c.firstChild?m.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0};a.y+=Math.min(l.t+s.t,x.t+u.t);a.h-=Math.min(l.t+s.t,x.t+u.t)+Math.min(l.b+s.b,x.b+u.b)}}else a=b;if(b.parentNode){l="absolute"==f.getComputedStyle(b).position;for(b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){s=m.position(b,!0);x=f.getComputedStyle(b);/relative|absolute/.test(x.position)&&(l=!1);if(!l&&/hidden|auto|scroll/.test(x.overflow)){var u=Math.min(a.y+
a.h,s.y+s.h),A=Math.min(a.x+a.w,s.x+s.w);a.x=Math.max(a.x,s.x);a.y=Math.max(a.y,s.y);a.h=u-a.y;a.w=A-a.x}"absolute"==x.position&&(l=!0);b=b.parentNode}}var w=a.x,r=a.y,y="w"in a?a.w:a.w=a.width,K="h"in a?a.h:(k.deprecated("place.around: dijit/place.__Rectangle: { x:"+w+", y:"+r+", height:"+a.height+", width:"+y+" } has been deprecated.  Please use { x:"+w+", y:"+r+", h:"+a.height+", w:"+y+" }","","2.0"),a.h=a.height),J=[];n.forEach(d,function(a){var b=q;switch(a){case "above-centered":p("TM","BM");
break;case "below-centered":p("BM","TM");break;case "after-centered":b=!b;case "before-centered":p(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":p(b?"TL":"TR",b?"TR":"TL");p(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":p(b?"BL":"BR",b?"TL":"TR");p(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":p(b?"TL":"TR",b?"BL":"BR");p(b?"TR":"TL",b?"BR":"BL");break;default:p(a.aroundCorner,a.corner)}});c=g(c,J,h,{w:y,h:K});c.aroundNodePos=a;return c}}})},
"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(n,m,f,k,d){var h=new n,p;f(function(){var g=d.getBox();h._rlh=m(window,"resize",function(){var c=d.getBox();g.h==c.h&&g.w==c.w||(g=c,h.emit("resize"))});if(8==k("ie")){var c=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=c&&(c=screen.deviceXDPI,h.emit("resize"))},500)}k("ios")&&(m(document,"focusin",function(c){p=c.target}),m(document,"focusout",function(c){p=null}))});h.getEffectiveBox=
function(g){g=d.getBox(g);var c=p&&p.tagName&&p.tagName.toLowerCase();if(k("ios")&&p&&!p.readOnly&&("textarea"==c||"input"==c&&/^(color|email|number|password|search|tel|text|url)$/.test(p.type)))g.h*=0==orientation||180==orientation?0.66:0.4,c=p.getBoundingClientRect(),g.h=Math.max(g.h,c.top+c.height);return g};return h})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(n,m,f,k,d,
h,p,g){g.add("config-bgIframe",g("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent)||g("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent));var c=new function(){var c=[];this.pop=function(){var b;c.length?(b=c.pop(),b.style.display=""):(9>g("ie")?(b="\x3ciframe src\x3d'"+(f.dojoBlankHtmlUrl||n.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e",b=document.createElement(b)):
(b=k.create("iframe"),b.src='javascript:""',b.className="dijitBackgroundIframe",b.setAttribute("role","presentation"),d.set(b,"opacity",0.1)),b.tabIndex=-1);return b};this.push=function(b){b.style.display="none";c.push(b)}};m.BackgroundIframe=function(e){if(!e.id)throw Error("no id");if(g("config-bgIframe")){var b=this.iframe=c.pop();e.appendChild(b);7>g("ie")||g("quirks")?(this.resize(e),this._conn=p(e,"resize",h.hitch(this,"resize",e))):d.set(b,{width:"100%",height:"100%"})}};h.extend(m.BackgroundIframe,
{resize:function(c){this.iframe&&d.set(this.iframe,{width:c.offsetWidth+"px",height:c.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),c.push(this.iframe),delete this.iframe)}});return m.BackgroundIframe})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(n,m,f,k){return n("dijit.DropDownMenu",k,{templateString:f,baseClass:"dijitMenu",
_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(d){this._moveToPopup(d);d.stopPropagation();d.preventDefault()},_onLeftArrow:function(d){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else d.stopPropagation(),d.preventDefault()}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(n,m,f,k,d,h,p,g,c,e,b,z,q,t,v){return m("dijit._MenuBase",[z,v,t,q],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){d.toggle(this.domNode,"dijitMenuActive",a);d.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,
childSelector:function(a){var l=b.byNode(a);return a.parentNode==this.containerNode&&l&&l.focus},postCreate:function(){var a=this,l="string"==typeof this.childSelector?this.childSelector:h.hitch(this,"childSelector");this.own(g(this.containerNode,g.selector(l,p.enter),function(){a.onItemHover(b.byNode(this))}),g(this.containerNode,g.selector(l,p.leave),function(){a.onItemUnhover(b.byNode(this))}),g(this.containerNode,g.selector(l,e),function(l){a.onItemClick(b.byNode(this),l);l.stopPropagation()}),
g(this.containerNode,g.selector(l,"focusin"),function(){a._onItemFocus(b.byNode(this))}));this.inherited(arguments)},onKeyboardSearch:function(a,b,c,q){this.inherited(arguments);if(a&&(-1==q||a.popup&&1==q))this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,
a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),a.popup&&(!a.disabled&&!this.hover_timer)&&(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,
{type:"click"})},this.passivePopupDelay));this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",
!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;if(a.popup){this.set("selected",a);this.set("activated",!0);var c=/^key/.test(b._origType||
b.type)||0==b.clientX&&0==b.clientY;this._openItemPopup(a,c)}else this.onExecute(),a._onClick?a._onClick(b):a.onClick(b)},_openItemPopup:function(a,b){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var c=a.popup;c.parentMenu=this;this.own(this._mouseoverHandle=g.once(c.domNode,"mouseover",h.hitch(this,"_onPopupHover")));var q=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){b&&
q.focusChild(a);q._cleanUp()},onExecute:h.hitch(this,"_cleanUp",!0),onClose:function(){q._mouseoverHandle&&(q._mouseoverHandle.remove(),delete q._mouseoverHandle)}},b);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(k.set(this.selected.focusNode,"tabIndex",this.tabIndex),
this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),
function(n,m,f,k,d,h,p,g,c,e,b,z){m=m("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);n.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(b){this.watch(b,h.hitch(this,"_setStateClass"))},this);for(var b in this.cssStateNodes||{})this._trackMouseState(this[b],this.cssStateNodes[b]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(b){if(!this.disabled)switch(b.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function b(a){c=c.concat(n.map(c,function(b){return b+a}),"dijit"+a)}var c=this.baseClass.split(" ");
this.isLeftToRight()||b("Rtl");var e="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&b(e);this.state&&b(this.state);this.selected&&b("Selected");this._opened&&b("Opened");this.disabled?b("Disabled"):this.readOnly?b("ReadOnly"):this.active?b("Active"):this.hovering&&b("Hover");this.focused&&b("Focused");var e=this.stateNode||this.domNode,a={};n.forEach(e.className.split(" "),function(b){a[b]=!0});"_stateClasses"in this&&n.forEach(this._stateClasses,function(b){delete a[b]});n.forEach(c,
function(b){a[b]=!0});var l=[],s;for(s in a)l.push(s);e.className=l.join(" ");this._stateClasses=c},_subnodeCssMouseEvent:function(b,c,e){function a(a){k.toggle(b,c+"Active",a)}if(!this.disabled&&!this.readOnly)switch(e.type){case "mouseover":case "MSPointerOver":case "pointerover":k.toggle(b,c+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":k.toggle(b,c+"Hover",!1);a(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":a(!0);
break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":a(!1);break;case "focus":case "focusin":k.toggle(b,c+"Focused",!0);break;case "blur":case "focusout":k.toggle(b,c+"Focused",!1)}},_trackMouseState:function(b,c){b._cssState=c}});g(function(){function q(a,b,c){if(!c||!f.isDescendant(c,b))for(;b&&b!=c;b=b.parentNode)if(b._cssState){var e=z.getEnclosingWidget(b);e&&(b==e.domNode?e._cssMouseEvent(a):e._subnodeCssMouseEvent(b,b._cssState,a))}}var d=e.body(),g;p(d,
c.over,function(a){q(a,a.target,a.relatedTarget)});p(d,c.out,function(a){q(a,a.target,a.relatedTarget)});p(d,b.press,function(a){g=a.target;q(a,g)});p(d,b.release,function(a){q(a,g);g=null});p(d,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=z.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return m})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),
function(n,m,f,k,d,h,p,g,c,e){return m("dijit._KeyNavContainer",[c,e,g],{connectKeyNavHandlers:function(b,c){var e=this._keyNavCodes={},g=h.hitch(this,"focusPrev"),f=h.hitch(this,"focusNext");n.forEach(b,function(a){e[a]=g});n.forEach(c,function(a){e[a]=f});e[d.HOME]=h.hitch(this,"focusFirstChild");e[d.END]=h.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){k.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);n.forEach(this.getChildren(),
h.hitch(this,"_startupChild"))},addChild:function(b,c){this.inherited(arguments);this._startupChild(b)},_startupChild:function(b){b.set("tabIndex","-1")},_getFirst:function(){var b=this.getChildren();return b.length?b[0]:null},_getLast:function(){var b=this.getChildren();return b.length?b[b.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(b){return(b=
p.byNode(b))&&b.getParent()==this}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(n,m,f,k){return m("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(d,h){var k=this.containerNode;if(0<h){for(k=k.firstChild;0<h;)1==k.nodeType&&h--,k=k.nextSibling;k?h="before":(k=this.containerNode,h="last")}f.place(d.domNode,k,h);
this._started&&!d._started&&d.startup()},removeChild:function(d){"number"==typeof d&&(d=this.getChildren()[d]);d&&(d=d.domNode)&&d.parentNode&&d.parentNode.removeChild(d)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(d,f){var k=this.getChildren(),g=n.indexOf(k,d);return k[g+f]},getIndexOfChild:function(d){return n.indexOf(this.getChildren(),d)}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),
function(n,m,f,k,d,h,p,g){return m("dijit._KeyNavMixin",g,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);f.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var c=this._keyNavCodes={};c[k.HOME]=d.hitch(this,"focusFirstChild");c[k.END]=d.hitch(this,"focusLastChild");c[this.isLeftToRight()?k.LEFT_ARROW:k.RIGHT_ARROW]=d.hitch(this,"_onLeftArrow");c[this.isLeftToRight()?k.RIGHT_ARROW:k.LEFT_ARROW]=d.hitch(this,"_onRightArrow");c[k.UP_ARROW]=d.hitch(this,
"_onUpArrow");c[k.DOWN_ARROW]=d.hitch(this,"_onDownArrow")}var e=this,c="string"==typeof this.childSelector?this.childSelector:d.hitch(this,"childSelector");this.own(h(this.domNode,"keypress",d.hitch(this,"_onContainerKeypress")),h(this.domNode,"keydown",d.hitch(this,"_onContainerKeydown")),h(this.domNode,"focus",d.hitch(this,"_onContainerFocus")),h(this.containerNode,h.selector(c,"focusin"),function(b){e._onChildFocus(p.getEnclosingWidget(this),b)}))},_onLeftArrow:function(){},_onRightArrow:function(){},
_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(c,e){c&&(this.focusedChild&&c!==this.focusedChild&&this._onChildBlur(this.focusedChild),
c.set("tabIndex",this.tabIndex),c.focus(e?"end":"start"))},_onContainerFocus:function(c){c.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){f.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(c){f.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(c){c&&c!=this.focusedChild&&
(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),c.set("tabIndex",this.tabIndex),this.lastFocused=c,this._set("focusedChild",c))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(c,e,b,d){c&&this.focusChild(c)},_keyboardSearchCompare:function(c,e){var b=c.domNode,b=(c.label||(b.focusNode?b.focusNode.label:"")||b.innerText||b.textContent||"").replace(/^\s+/,"").substr(0,e.length).toLowerCase();return e.length&&b==e?-1:0},_isFormElement:function(c){return"INPUT"===
c.tagName||"TEXTAREA"===c.tagName||"SELECT"===c.tagName||"BUTTON"===c.tagName},_onContainerKeydown:function(c){if(!this._isFormElement(document.activeElement)){var e=this._keyNavCodes[c.keyCode];e?(e(c,this.focusedChild),c.stopPropagation(),c.preventDefault(),this._searchString=""):c.keyCode==k.SPACE&&(this._searchTimer&&!c.ctrlKey&&!c.altKey&&!c.metaKey)&&(c.stopImmediatePropagation(),c.preventDefault(),this._keyboardSearch(c," "))}},_onContainerKeypress:function(c){if(!this._isFormElement(document.activeElement)&&
!(c.charCode<=k.SPACE||c.ctrlKey||c.altKey||c.metaKey))c.preventDefault(),c.stopPropagation(),this._keyboardSearch(c,String.fromCharCode(c.charCode).toLowerCase())},_keyboardSearch:function(c,e){var b=null,g,q=0;d.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=e;var c=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;g=this._searchString.substr(0,c);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);
var d=this.focusedChild||null;if(1==c||!d)if(d=this._getNextFocusableChild(d,1),!d)return;c=d;do{var a=this._keyboardSearchCompare(d,g);a&&0==q++&&(b=d);if(-1==a){q=-1;break}d=this._getNextFocusableChild(d,1)}while(d&&d!=c)})();this.onKeyboardSearch(b,c,g,q)},_onChildBlur:function(){},_getNextFocusableChild:function(c,e){var b=c;do{if(c)c=this._getNext(c,e);else if(c=this[0<e?"_getFirst":"_getLast"](),!c)break;if(null!=c&&c!=b&&c.isFocusable())return c}while(c!=b);return null},_getFirst:function(){return null},
_getLast:function(){return null},_getNext:function(c,e){if(c)for(c=c.domNode;c;)if((c=c[0>e?"previousSibling":"nextSibling"])&&"getAttribute"in c){var b=p.byNode(c);if(b)return b}return null}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(n,m,f,k,d,h,p,g){var c=m("dijit._TemplatedMixin",g,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,
_stringRepl:function(c){var b=this.declaredClass,d=this;return p.substitute(c,this,function(c,e){"!"==e.charAt(0)&&(c=k.getObject(e.substr(1),!1,d));if("undefined"==typeof c)throw Error(b+" template:"+e);return null==c?"":"!"==e.charAt(0)?c:this._escapeValue(""+c)},this)},_escapeValue:function(c){return c.replace(/["'<>&]/g,function(b){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[b]})},buildRendering:function(){if(!this._rendered){this.templateString||
(this.templateString=n(this.templatePath,{sanitize:!0}));var e=c.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),b;if(k.isString(e)){if(b=f.toDom(this._stringRepl(e),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+e);}else b=e.cloneNode(!0);this.domNode=b}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(c){var b=this.containerNode;if(c&&b)for(;c.hasChildNodes();)b.appendChild(c.firstChild)}});
c._templateCache={};c.getCachedTemplate=function(e,b,d){var q=c._templateCache,g=e,k=q[g];if(k){try{if(!k.ownerDocument||k.ownerDocument==(d||document))return k}catch(a){}f.destroy(k)}e=p.trim(e);if(b||e.match(/\$\{([^\}]+)\}/g))return q[g]=e;b=f.toDom(e,d);if(1!=b.nodeType)throw Error("Invalid template: "+e);return q[g]=b};h("ie")&&d(window,"unload",function(){var e=c._templateCache,b;for(b in e){var d=e[b];"object"==typeof d&&f.destroy(d);delete e[b]}});return c})},"dojo/cache":function(){define(["./_base/kernel",
"./text"],function(n){return n.cache})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(n,m,f,k,d,h,p,g,c){var e=d.delegate(g,{mouseenter:h.enter,mouseleave:h.leave,keypress:f._keypress}),b;f=k("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);
this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(b){for(var c=b;;)if(1==c.nodeType&&(this._processTemplateNode(c,function(b,c){return b.getAttribute(c)},this._attach)||this.searchContainerNode)&&c.firstChild)c=c.firstChild;else{if(c==b)break;for(;!c.nextSibling;)if(c=c.parentNode,c==b)return;c=c.nextSibling}},_processTemplateNode:function(b,c,e){var g=!0,a=this.attachScope||this,l=c(b,"dojoAttachPoint")||c(b,"data-dojo-attach-point");if(l)for(var s=l.split(/\s*,\s*/);l=
s.shift();)d.isArray(a[l])?a[l].push(b):a[l]=b,g="containerNode"!=l,this._attachPoints.push(l);if(c=c(b,"dojoAttachEvent")||c(b,"data-dojo-attach-event")){l=c.split(/\s*,\s*/);for(s=d.trim;c=l.shift();)if(c){var f=null;-1!=c.indexOf(":")?(f=c.split(":"),c=s(f[0]),f=s(f[1])):c=s(c);f||(f=c);this._attachEvents.push(e(b,c,d.hitch(a,f)))}}return g},_attach:function(c,d,g){d=d.replace(/^on/,"").toLowerCase();d="dijitclick"==d?b||(b=n("./a11yclick")):e[d]||d;return p(c,d,g)},_detachTemplateNodes:function(){var b=
this.attachScope||this;m.forEach(this._attachPoints,function(c){delete b[c]});this._attachPoints=[];m.forEach(this._attachEvents,function(b){b.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});d.extend(c,{dojoAttachEvent:"",dojoAttachPoint:""});return f})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),
function(n,m,f,k,d,h,p,g,c,e,b,z){p=n("dijit.MenuItem"+(h("dojo-bidi")?"_NoBidi":""),[g,c,e,b],{templateString:z,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(b){this._set("label",b);var c="",d;d=b.search(/{\S}/);if(0<=d){var c=b.charAt(d+1),a=b.substr(0,d);b=b.substr(d+3);d=a+c+b;b=a+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+c+"\x3c/span\x3e"+b}else d=b;this.domNode.setAttribute("aria-label",d+" "+this.accelKey);this.containerNode.innerHTML=b;this._set("shortcutKey",c)},iconClass:"dijitNoIcon",
_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(b){b&&!("label"in this.params)&&this._set("label",b.innerHTML)},buildRendering:function(){this.inherited(arguments);f.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&f.set(this.accelKeyNode,"id",this.id+"_accel");m.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==h("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(b){}},_setSelected:function(b){k.toggle(this.domNode,
"dijitMenuItemSelected",b)},setLabel:function(b){d.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},setDisabled:function(b){d.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",b)},_setDisabledAttr:function(b){this.focusNode.setAttribute("aria-disabled",b?"true":"false");this._set("disabled",b)},_setAccelKeyAttr:function(b){this.accelKeyNode&&(this.accelKeyNode.style.display=
b?"":"none",this.accelKeyNode.innerHTML=b,f.set(this.containerNode,"colSpan",b?"1":"2"));this._set("accelKey",b)}});h("dojo-bidi")&&(p=n("dijit.MenuItem",p,{_setLabelAttr:function(b){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));return p})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(n,m){return n("dijit._Contained",null,{_getSibling:function(f){var k=this.getParent();return k&&k._getSiblingOfChild&&k._getSiblingOfChild(this,
"previous"==f?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var f=this.getParent();return!f||!f.getIndexOfChild?-1:f.getIndexOfChild(this)}})})},"esri/tasks/AreasAndLengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),function(n,m,f,k,d,h){n=n(null,{declaredClass:"esri.tasks.AreasAndLengthsParameters",
polygons:null,lengthUnit:null,areaUnit:null,calculationType:null,toJson:function(){var d=f.map(this.polygons,function(c){return c.toJson()}),g={};g.polygons=k.toJson(d);d=this.polygons[0].spatialReference;g.sr=d.wkid?d.wkid:k.toJson(d.toJson());this.lengthUnit&&(g.lengthUnit=this.lengthUnit);this.areaUnit&&(m.isString(this.areaUnit)?g.areaUnit=k.toJson({areaUnit:this.areaUnit}):g.areaUnit=this.areaUnit);this.calculationType&&(g.calculationType=this.calculationType);return g}});d("extend-esri")&&m.setObject("tasks.AreasAndLengthsParameters",
n,h);return n})},"esri/tasks/LengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),function(n,m,f,k,d,h){n=n(null,{declaredClass:"esri.tasks.LengthsParameters",polylines:null,lengthUnit:null,geodesic:null,calculationType:null,toJson:function(){var d=f.map(this.polylines,function(c){return c.toJson()}),g={};g.polylines=k.toJson(d);d=this.polylines[0].spatialReference;g.sr=d.wkid?d.wkid:k.toJson(d.toJson());this.lengthUnit&&
(g.lengthUnit=this.lengthUnit);this.geodesic&&(g.geodesic=this.geodesic);this.calculationType&&(g.calculationType=this.calculationType);return g}});d("extend-esri")&&m.setObject("tasks.LengthsParameters",n,h);return n})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(n,m,f,k,d,h,p,g,c,e,b,z,q,t,v){n=n(e,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(a){a=m.hitch;this._projectHandler=a(this,this._projectHandler);this._simplifyHandler=a(this,this._simplifyHandler);this._bufferHandler=a(this,this._bufferHandler);this._areasAndLengthsHandler=a(this,this._areasAndLengthsHandler);this._lengthsHandler=
a(this,this._lengthsHandler);this._labelPointsHandler=a(this,this._labelPointsHandler);this._relationHandler=a(this,this._relationHandler);this._convexHullHandler=a(this,this._convexHullHandler);this._unionHandler=a(this,this._unionHandler);this._autoCompleteHandler=a(this,this._autoCompleteHandler);this._reshapeHandler=a(this,this._reshapeHandler);this._cutHandler=a(this,this._cutHandler);this._intersectHandler=a(this,this._intersectHandler);this._differenceHandler=a(this,this._differenceHandler);
this._trimExtendHandler=a(this,this._trimExtendHandler);this._densifyHandler=a(this,this._densifyHandler);this._generalizeHandler=a(this,this._densifyHandler);this._offsetHandler=a(this,this._offsetHandler);this._distanceHandler=a(this,this._distanceHandler);this._toGeoCoordinateHandler=a(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=a(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(a){var b=[],c,d=a.length;for(c=0;c<d;c++)b.push(a[c].toJson());
return{geometryType:v.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,b,c){var d=v.getGeometryType(b);a=a.geometries;var e=[],g={spatialReference:c.toJson()},k=m.mixin;f.forEach(a,function(a,b){e[b]=new d(k(a,g))});return e},_toProjectGeometry:function(a){var c=a.spatialReference.toJson();return a instanceof b?new q({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:c}):new z({paths:[[].concat(a.points)],spatialReference:c})},
_fromProjectedGeometry:function(a,c,d){return"esriGeometryEnvelope"===c?(a=a.rings[0],new b(a[0][0],a[0][1],a[2][0],a[2][1],d)):new t({points:a.paths[0],spatialReference:d.toJson()})},project:function(a,b,e,f){var u=m.mixin({},this._url.query,{f:"json"}),h;a.geometries?(f=e,e=b,b=a.outSR,h=a.geometries[0],u=m.mixin(u,a.toJson())):(h=a[0],u=m.mixin(u,{outSR:b.wkid||k.toJson(b.toJson()),inSR:h.spatialReference.wkid||k.toJson(h.spatialReference.toJson()),geometries:k.toJson(this._encodeGeometries(a))}));
var w=v.getJsonType(h),r=this._projectHandler,y=this._errorHandler,q=new d(c._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/project",content:u,callbackParamName:"callback",load:function(a,c){r(a,c,w,b,e,f,q)},error:function(a){y(a,f,q)}});return q},_projectHandler:function(a,b,c,d,e,g,f){try{var r=this._decodeGeometries(a,c,d);this._successHandler([r],"onProjectComplete",e,f)}catch(k){this._errorHandler(k,g,f)}},onProjectComplete:function(){},simplify:function(a,b,e){var f=a[0].spatialReference,
h=m.mixin({},this._url.query,{f:"json",sr:f.wkid?f.wkid:k.toJson(f.toJson()),geometries:k.toJson(this._encodeGeometries(a))}),q=v.getJsonType(a[0]),w=this._simplifyHandler,r=this._errorHandler,y=new d(c._dfdCanceller);y._pendingDfd=g({url:this._url.path+"/simplify",content:h,callbackParamName:"callback",load:function(a,c){w(a,c,q,f,b,e,y)},error:function(a){r(a,e,y)}});return y},_simplifyHandler:function(a,b,c,d,e,g,f){try{var r=this._decodeGeometries(a,c,d);this._successHandler([r],"onSimplifyComplete",
e,f)}catch(k){this._errorHandler(k,g,f)}},onSimplifyComplete:function(){},convexHull:function(a,b,e){var f=a[0].spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:k.toJson(f.toJson()),geometries:k.toJson(this._encodeGeometries(a))});var h=this._convexHullHandler,q=this._errorHandler,w=new d(c._dfdCanceller);w._pendingDfd=g({url:this._url.path+"/convexHull",content:a,callbackParamName:"callback",load:function(a,c){h(a,c,f,b,e,w)},error:function(a){q(a,e,w)}});return w},_convexHullHandler:function(a,
b,c,d,e,g){try{var f=v.fromJson(a.geometry).setSpatialReference(c);this._successHandler([f],"onConvexHullComplete",d,g)}catch(r){this._errorHandler(r,e,g)}},onConvexHullComplete:function(){},union:function(a,b,e){var f=a[0].spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:k.toJson(f.toJson()),geometries:k.toJson(this._encodeGeometries(a))});var h=this._unionHandler,q=this._errorHandler,w=new d(c._dfdCanceller);w._pendingDfd=g({url:this._url.path+"/union",content:a,callbackParamName:"callback",
load:function(a,c){h(a,c,f,b,e,w)},error:function(a){q(a,e,w)}});return w},_unionHandler:function(a,b,c,d,e,g){try{var f=v.fromJson(a.geometry).setSpatialReference(c);this._successHandler([f],"onUnionComplete",d,g)}catch(r){this._errorHandler(r,e,g)}},onUnionComplete:function(){},autoComplete:function(a,b,e,f){var h=a[0].spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:k.toJson(h.toJson()),polygons:k.toJson(this._encodeGeometries(a).geometries),polylines:k.toJson(this._encodeGeometries(b).geometries)});
var q=this._autoCompleteHandler,w=this._errorHandler,r=new d(c._dfdCanceller);r._pendingDfd=g({url:this._url.path+"/autoComplete",content:a,callbackParamName:"callback",load:function(a,b){q(a,b,h,e,f,r)},error:function(a){w(a,f,r)}});return r},_autoCompleteHandler:function(a,b,c,d,e,f){try{var g=a.geometries;a=[];var r,k=g.length;for(r=0;r<k;r++)a[r]=new q({spatialReference:c,rings:g[r].rings});this._successHandler([a],"onAutoCompleteComplete",d,f)}catch(h){this._errorHandler(h,e,f)}},onAutoCompleteComplete:function(){},
reshape:function(a,b,e,f){var h=a.spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:k.toJson(h.toJson()),target:k.toJson({geometryType:v.getJsonType(a),geometry:a.toJson()}),reshaper:k.toJson(b.toJson())});var q=this._reshapeHandler,w=this._errorHandler,r=new d(c._dfdCanceller);r._pendingDfd=g({url:this._url.path+"/reshape",content:a,callbackParamName:"callback",load:function(a,b){q(a,b,h,e,f,r)},error:function(a){w(a,f,r)}});return r},_reshapeHandler:function(a,b,c,d,e,f){try{var g=v.fromJson(a.geometry).setSpatialReference(c);
this._successHandler([g],"onReshapeComplete",d,f)}catch(r){this._errorHandler(r,e,f)}},onReshapeComplete:function(){},cut:function(a,b,e,h){var q=a[0].spatialReference,p=f.map(a,function(a){return a.toJson()});a=m.mixin({},this._url.query,{f:"json",sr:k.toJson(q.toJson()),target:k.toJson({geometryType:v.getJsonType(a[0]),geometries:p}),cutter:k.toJson(b.toJson())});var w=this._cutHandler,r=this._errorHandler,y=new d(c._dfdCanceller);y._pendingDfd=g({url:this._url.path+"/cut",content:a,callbackParamName:"callback",
load:function(a,b){w(a,b,q,e,h,y)},error:function(a){r(a,h,y)}});return y},_cutHandler:function(a,b,c,d,e,g){try{var k=a.geometries,r={};r.cutIndexes=a.cutIndexes;r.geometries=[];f.forEach(k,function(a){r.geometries.push(v.fromJson(a).setSpatialReference(c))});this._successHandler([r],"onCutComplete",d,g)}catch(h){this._errorHandler(h,e,g)}},onCutComplete:function(){},intersect:function(a,b,e,f){var h=a[0].spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:k.toJson(h.toJson()),geometries:k.toJson(this._encodeGeometries(a)),
geometry:k.toJson({geometryType:v.getJsonType(b),geometry:b.toJson()})});var q=this._intersectHandler,w=this._errorHandler,r=new d(c._dfdCanceller);r._pendingDfd=g({url:this._url.path+"/intersect",content:a,callbackParamName:"callback",load:function(a,b){q(a,b,h,e,f,r)},error:function(a){w(a,f,r)}});return r},_intersectHandler:function(a,b,c,d,e,g){try{var k=[];f.forEach(a.geometries,function(a){k.push(v.fromJson(a).setSpatialReference(c))});this._successHandler([k],"onIntersectComplete",d,g)}catch(r){this._errorHandler(r,
e,g)}},onIntersectComplete:function(){},difference:function(a,b,e,f){var h=a[0].spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:k.toJson(h.toJson()),geometries:k.toJson(this._encodeGeometries(a)),geometry:k.toJson({geometryType:v.getJsonType(b),geometry:b.toJson()})});var q=this._differenceHandler,w=this._errorHandler,r=new d(c._dfdCanceller);r._pendingDfd=g({url:this._url.path+"/difference",content:a,callbackParamName:"callback",load:function(a,b){q(a,b,h,e,f,r)},error:function(a){w(a,
f,r)}});return r},_differenceHandler:function(a,b,c,d,e,g){try{var k=[];f.forEach(a.geometries,function(a){k.push(v.fromJson(a).setSpatialReference(c))});this._successHandler([k],"onDifferenceComplete",d,g)}catch(r){this._errorHandler(r,e,g)}},onDifferenceComplete:function(){},buffer:function(a,b,e){var f=m.mixin({},this._url.query,{f:"json"},a.toJson()),k=a.outSpatialReference||a.geometries[0].spatialReference,h=this._bufferHandler,q=this._errorHandler,r=new d(c._dfdCanceller);r._pendingDfd=g({url:this._url.path+
"/buffer",content:f,callbackParamName:"callback",load:function(a,c){h(a,c,k,b,e,r)},error:function(a){q(a,e,r)}});return r},_bufferHandler:function(a,b,c,d,e,f){try{var g=a.geometries;a=[];var r,k=g.length;for(r=0;r<k;r++)a[r]=new q({spatialReference:c,rings:g[r].rings});this._successHandler([a],"onBufferComplete",d,f)}catch(h){this._errorHandler(h,e,f)}},onBufferComplete:function(){},areasAndLengths:function(a,b,e){a=m.mixin({},this._url.query,{f:"json"},a.toJson());var f=this._areasAndLengthsHandler,
k=this._errorHandler,h=new d(c._dfdCanceller);h._pendingDfd=g({url:this._url.path+"/areasAndLengths",content:a,callbackParamName:"callback",load:function(a,c){f(a,c,b,e,h)},error:function(a){k(a,e,h)}});return h},_areasAndLengthsHandler:function(a,b,c,e,d){try{this._successHandler([a],"onAreasAndLengthsComplete",c,d)}catch(f){this._errorHandler(f,e,d)}},onAreasAndLengthsComplete:function(){},lengths:function(a,b,e){a=m.mixin({},this._url.query,{f:"json"},a.toJson());var f=this._lengthsHandler,k=this._errorHandler,
h=new d(c._dfdCanceller);h._pendingDfd=g({url:this._url.path+"/lengths",content:a,callbackParamName:"callback",load:function(a,c){f(a,c,b,e,h)},error:function(a){k(a,e,h)}});return h},_lengthsHandler:function(a,b,c,e,d){try{this._successHandler([a],"onLengthsComplete",c,d)}catch(f){this._errorHandler(f,e,d)}},onLengthsComplete:function(){},labelPoints:function(a,b,e){var h=f.map(a,function(a){return a.toJson()}),q=a[0].spatialReference,h=m.mixin({},this._url.query,{f:"json",sr:q.wkid?q.wkid:k.toJson(q.toJson()),
polygons:k.toJson(h)}),p=this._labelPointsHandler,w=this._errorHandler,r=new d(c._dfdCanceller);r._pendingDfd=g({url:this._url.path+"/labelPoints",content:h,callbackParamName:"callback",load:function(c,d){p(c,d,a,q,b,e,r)},error:function(a){w(a,e,r)}});return r},_labelPointsHandler:function(a,b,c,e,d,g,h){try{var k=[];f.forEach(a.labelPoints,function(a){k.push(v.fromJson(a).setSpatialReference(e))});this._successHandler([k],"onLabelPointsComplete",d,h)}catch(q){this._errorHandler(q,g,h)}},onLabelPointsComplete:function(){},
relation:function(a,b,e){a=m.mixin({},this._url.query,{f:"json"},a.toJson());var f=this._relationHandler,h=this._errorHandler,k=new d(c._dfdCanceller);k._pendingDfd=g({url:this._url.path+"/relation",content:a,callbackParamName:"callback",load:function(a,c){f(a,c,b,e,k)},error:function(a){h(a,e,k)}});return k},_relationHandler:function(a,b,c,e,d){try{this._successHandler([a.relations],"onRelationComplete",c,d)}catch(f){this._errorHandler(f,e,d)}},onRelationComplete:function(){},trimExtend:function(a,
b,e){var f=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.sr,k=this._trimExtendHandler,q=this._errorHandler,r=new d(c._dfdCanceller);r._pendingDfd=g({url:this._url.path+"/trimExtend",content:f,callbackParamName:"callback",load:function(a,c){k(a,c,h,b,e,r)},error:function(a){q(a,e,r)}});return r},_trimExtendHandler:function(a,b,c,e,d,f){try{var g=a.geometries;a=[];var h,k=g.length;for(h=0;h<k;h++)a[h]=new z({spatialReference:c,paths:g[h].paths});this._successHandler([a],"onTrimExtendComplete",
e,f)}catch(q){this._errorHandler(q,d,f)}},onTrimExtendComplete:function(){},densify:function(a,b,e){var f=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.geometries[0].spatialReference,k=this._densifyHandler,q=this._errorHandler,r=new d(c._dfdCanceller);r._pendingDfd=g({url:this._url.path+"/densify",content:f,callbackParamName:"callback",load:function(a,c){k(a,c,h,b,e,r)},error:function(a){q(a,e,r)}});return r},_densifyHandler:function(a,b,c,e,d,g){try{var h=[];f.forEach(a.geometries,function(a){h.push(v.fromJson(a).setSpatialReference(c))});
this._successHandler([h],"onDensifyComplete",e,g)}catch(k){this._errorHandler(k,d,g)}},onDensifyComplete:function(){},generalize:function(a,b,e){var f=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.geometries[0].spatialReference,k=this._generalizeHandler,q=this._errorHandler,r=new d(c._dfdCanceller);r._pendingDfd=g({url:this._url.path+"/generalize",content:f,callbackParamName:"callback",load:function(a,c){k(a,c,h,b,e,r)},error:function(a){q(a,e,r)}});return r},_generalizeHandler:function(a,
b,c,e,d,g){try{var h=[];f.forEach(a.geometries,function(a){h.push(v.fromJson(a).setSpatialReference(c))});this._successHandler([h],"onGeneralizeComplete",e,g)}catch(k){this._errorHandler(k,d,g)}},onGeneralizeComplete:function(){},offset:function(a,b,e){var f=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.geometries[0].spatialReference,k=this._offsetHandler,q=this._errorHandler,r=new d(c._dfdCanceller);r._pendingDfd=g({url:this._url.path+"/offset",content:f,callbackParamName:"callback",load:function(a,
c){k(a,c,h,b,e,r)},error:function(a){q(a,e,r)}});return r},_offsetHandler:function(a,b,c,e,d,g){try{var h=[];f.forEach(a.geometries,function(a){h.push(v.fromJson(a).setSpatialReference(c))});this._successHandler([h],"onOffsetComplete",e,g)}catch(k){this._errorHandler(k,d,g)}},onOffsetComplete:function(){},distance:function(a,b,e){var f=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.geometry1.spatialReference,k=this._distanceHandler,q=this._errorHandler,r=new d(c._dfdCanceller);r._pendingDfd=
g({url:this._url.path+"/distance",content:f,callbackParamName:"callback",load:function(a,c){k(a,c,h,b,e,r)},error:function(a){q(a,e,r)}});return r},_distanceHandler:function(a,b,c,e,d,f){try{a=a&&a.distance,this._successHandler([a],"onDistanceComplete",e,f)}catch(g){this._errorHandler(g,d,f)}},onDistanceComplete:function(){},toGeoCoordinateString:function(a,b,e){var f={};m.isObject(a.sr)?f.sr=a.sr.wkid||k.toJson(a.sr.toJson()):f.sr=a.sr;f.coordinates=k.toJson(a.coordinates);f.conversionType=a.conversionType||
"MGRS";f.conversionMode=a.conversionMode;f.numOfDigits=a.numOfDigits;f.rounding=a.rounding;f.addSpaces=a.addSpaces;a=m.mixin({},this._url.query,{f:"json"},f);var h=this._toGeoCoordinateHandler,q=this._errorHandler,p=new d(c._dfdCanceller);p._pendingDfd=g({url:this._url.path+"/toGeoCoordinateString",content:a,callbackParamName:"callback",load:function(a,c){h(a,c,b,e,p)},error:function(a){q(a,e,p)}});return p},_toGeoCoordinateHandler:function(a,b,c,e,d){try{this._successHandler([a.strings],"onToGeoCoordinateStringComplete",
c,d)}catch(f){this._errorHandler(f,e,d)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(a,b,e){var f={};m.isObject(a.sr)?f.sr=a.sr.wkid||k.toJson(a.sr.toJson()):f.sr=a.sr;f.strings=k.toJson(a.strings);f.conversionType=a.conversionType||"MGRS";f.conversionMode=a.conversionMode;a=m.mixin({},this._url.query,{f:"json"},f);var h=this._fromGeoCoordinateHandler,q=this._errorHandler,p=new d(c._dfdCanceller);p._pendingDfd=g({url:this._url.path+"/fromGeoCoordinateString",content:a,
callbackParamName:"callback",load:function(a,c){h(a,c,b,e,p)},error:function(a){q(a,e,p)}});return p},_fromGeoCoordinateHandler:function(a,b,c,e,d){try{this._successHandler([a.coordinates],"onToGeoCoordinateStringComplete",c,d)}catch(f){this._errorHandler(f,e,d)}},onFromGeoCoordinateStringComplete:function(){}});m.mixin(n,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});h("extend-esri")&&m.setObject("tasks.GeometryService",n,p);return n})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(n,m,f,k,d,h,p,g){n=n(g,{declaredClass:"esri.tasks._Task",
_eventMap:{error:["error"],complete:["result"]},constructor:function(c,e){c&&m.isString(c)&&(this._url=p.urlToObject(this.url=c));e&&e.requestOptions&&(this.requestOptions=e.requestOptions);this.normalization=!0;this._errorHandler=m.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var c=this._url,e=/^http:/i;this.url&&(this.url=this.url.replace(e,"https:"));c&&c.path&&(c.path=c.path.replace(e,"https:"))},_encode:function(c,e,b){var d,g,h={},k,a;for(k in c)if("declaredClass"!==
k&&(d=c[k],g=typeof d,null!==d&&void 0!==d&&"function"!==g))if(m.isArray(d)){h[k]=[];a=d.length;for(g=0;g<a;g++)h[k][g]=this._encode(d[g])}else"object"===g?d.toJson&&(g=d.toJson(b&&b[k]),"esri.tasks.FeatureSet"===d.declaredClass&&g.spatialReference&&(g.sr=g.spatialReference,delete g.spatialReference),h[k]=e?g:f.toJson(g)):h[k]=d;return h},_successHandler:function(c,e,b,d){e&&this[e].apply(this,c);b&&b.apply(null,c);d&&h._resDfd(d,c)},_errorHandler:function(c,e,b){this.onError(c);e&&e(c);b&&b.errback(c)},
setNormalization:function(c){this.normalization=c},onError:function(){}});k("extend-esri")&&(d.Task=n);return n})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(n,m,f,k,d){return f("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var f=this.domNode;this.containerNode&&!this.searchContainerNode&&
(this.containerNode.stopParser=!0);d.parse(f,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(k.hitch(this,function(d){this._startupWidgets=d;for(var f=0;f<d.length;f++)this._processTemplateNode(d[f],function(c,e){return c[e]},function(c,e,b){return e in c?c.connect(c,e,b):c.on(e,b,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));
if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(d,f,g){return f(d,"dojoType")||f(d,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){n.forEach(this._startupWidgets,function(d){d&&(!d._started&&d.startup)&&d.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},
"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(n,m,f,k,d,h,p,g,c,e,b,z,q,t,v,a){function l(a){return eval("("+a+")")}function s(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<u){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=u}return b}function x(a,b){b||(b=n);var c=
b._dojoParserCtorMap||(b._dojoParserCtorMap={}),d=a.join();if(!c[d]){for(var e=[],l=0,g=a.length;l<g;l++){var h=a[l];e[e.length]=c[h]=c[h]||f.getObject(h)||~h.indexOf("/")&&b(h)}l=e.shift();c[d]=e.length?l.createSubclass?l.createSubclass(e):l.extend.apply(l,e):l}return c[d]}new Date("X");var u=0;c.after(f,"extend",function(){u++},!0);var A={_clearCache:function(){u++;_ctorMap={}},_functionFromScript:function(a,b){var c="",d="",e=a.getAttribute(b+"args")||a.getAttribute("args"),l=a.getAttribute("with"),
e=(e||"").split(/\s*,\s*/);l&&l.length&&k.forEach(l.split(/\s*,\s*/),function(a){c+="with("+a+"){";d+="}"});return new Function(e,c+a.innerHTML+d)},instantiate:function(a,b,c){b=b||{};c=c||{};var d=(c.scope||m._scopeName)+"Type",e="data-"+(c.scope||m._scopeName)+"-",l=e+"type",f=e+"mixins",g=[];k.forEach(a,function(a){var c=d in b?b[d]:a.getAttribute(l)||a.getAttribute(d);if(c){var e=a.getAttribute(f),c=e?[c].concat(e.split(/\s*,\s*/)):[c];g.push({node:a,types:c})}});return this._instantiate(g,b,
c)},_instantiate:function(a,b,c,d){function l(a){!b._started&&!c.noStart&&k.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a}a=k.map(a,function(a){var d=a.ctor||x(a.types,c.contextRequire);if(!d)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(d,a.node,b,c,a.scripts,a.inherited)},this);return d?e(a).then(l):l(a)},construct:function(a,d,e,h,p,n){function z(a){M&&f.setObject(M,a);for(B=0;B<G.length;B++)c[G[B].advice||
"after"](a,G[B].method,f.hitch(a,G[B].func),!0);for(B=0;B<R.length;B++)R[B].call(a);for(B=0;B<O.length;B++)a.watch(O[B].prop,O[B].func);for(B=0;B<P.length;B++)v(a,P[B].event,P[B].func);return a}var u=a&&a.prototype;h=h||{};var x={};h.defaults&&f.mixin(x,h.defaults);n&&f.mixin(x,n);var A;q("dom-attributes-explicit")?A=d.attributes:q("dom-attributes-specified-flag")?A=k.filter(d.attributes,function(a){return a.specified}):(n=(/^input$|^img$/i.test(d.nodeName)?d:d.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,
"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),A=k.map(n.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==d.nodeName&&"value"==a||"enctype"==b?d.getAttribute(b):d.getAttributeNode(b).value}}));var H=h.scope||m._scopeName;n="data-"+H+"-";var C={};"dojo"!==H&&(C[n+"props"]="data-dojo-props",C[n+"type"]="data-dojo-type",C[n+"mixins"]="data-dojo-mixins",C[H+"type"]="dojotype",C[n+"id"]="data-dojo-id");for(var B=0,D,H=[],M,F;D=A[B++];){var E=D.name,I=E.toLowerCase();
D=D.value;switch(C[I]||I){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":F=D;break;case "data-dojo-id":case "jsid":M=D;break;case "data-dojo-attach-point":case "dojoattachpoint":x.dojoAttachPoint=D;break;case "data-dojo-attach-event":case "dojoattachevent":x.dojoAttachEvent=D;break;case "class":x["class"]=d.className;break;case "style":x.style=d.style&&d.style.cssText;break;default:if(E in u||(E=s(a)[I]||E),E in u)switch(typeof u[E]){case "string":x[E]=
D;break;case "number":x[E]=D.length?Number(D):NaN;break;case "boolean":x[E]="false"!=D.toLowerCase();break;case "function":""===D||-1!=D.search(/[^\w\.]+/i)?x[E]=new Function(D):x[E]=f.getObject(D,!1)||new Function(D);H.push(E);break;default:I=u[E],x[E]=I&&"length"in I?D?D.split(/\s*,\s*/):[]:I instanceof Date?""==D?new Date(""):"now"==D?new Date:b.fromISOString(D):I instanceof g?m.baseUrl+D:l(D)}else x[E]=D}}for(A=0;A<H.length;A++)C=H[A].toLowerCase(),d.removeAttribute(C),d[C]=null;if(F)try{F=l.call(h.propsThis,
"{"+F+"}"),f.mixin(x,F)}catch(Q){throw Error(Q.toString()+" in data-dojo-props\x3d'"+F+"'");}f.mixin(x,e);p||(p=a&&(a._noScript||u._noScript)?[]:t("\x3e script[type^\x3d'dojo/']",d));var G=[],R=[],O=[],P=[];if(p)for(B=0;B<p.length;B++)C=p[B],d.removeChild(C),e=C.getAttribute(n+"event")||C.getAttribute("event"),h=C.getAttribute(n+"prop"),F=C.getAttribute(n+"method"),H=C.getAttribute(n+"advice"),A=C.getAttribute("type"),C=this._functionFromScript(C,n),e?"dojo/connect"==A?G.push({method:e,func:C}):"dojo/on"==
A?P.push({event:e,func:C}):x[e]=C:"dojo/aspect"==A?G.push({method:F,advice:H,func:C}):"dojo/watch"==A?O.push({prop:h,func:C}):R.push(C);a=(p=a.markupFactory||u.markupFactory)?p(x,d,a):new a(x,d);return a.then?a.then(z):z(a)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,d=c(a.parent),b={dir:b.getAttribute("dir")||d.dir,lang:b.getAttribute("lang")||d.lang,textDir:b.getAttribute(p)||d.textDir},e;for(e in b)b[e]&&(a.inherited[e]=b[e])}return a.inherited}var d=[],e=[],
l={},f=(b.scope||m._scopeName)+"Type",g="data-"+(b.scope||m._scopeName)+"-",h=g+"type",p=g+"textdir",g=g+"mixins",s=a.firstChild,t=b.inherited;if(!t){var u=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&u(a.parentNode,b)},t={dir:u(a,"dir"),lang:u(a,"lang"),textDir:u(a,p)},v;for(v in t)t[v]||delete t[v]}for(var t={inherited:t},A,F;;)if(s)if(1!=s.nodeType)s=s.nextSibling;else if(A&&"script"==s.nodeName.toLowerCase())(E=s.getAttribute("type"))&&/^dojo\/\w/i.test(E)&&A.push(s),
s=s.nextSibling;else if(F)s=s.nextSibling;else{var E=s.getAttribute(h)||s.getAttribute(f);v=s.firstChild;if(!E&&(!v||3==v.nodeType&&!v.nextSibling))s=s.nextSibling;else{F=null;if(E){var I=s.getAttribute(g);A=I?[E].concat(I.split(/\s*,\s*/)):[E];try{F=x(A,b.contextRequire)}catch(Q){}F||k.forEach(A,function(a){~a.indexOf("/")&&!l[a]&&(l[a]=!0,e[e.length]=a)});I=F&&!F.prototype._noScript?[]:null;t={types:A,ctor:F,parent:t,node:s,scripts:I};t.inherited=c(t);d.push(t)}else t={node:s,scripts:A,parent:t};
A=I;F=s.stopParser||F&&F.prototype.stopParser&&!b.template;s=v}}else{if(!t||!t.node)break;s=t.node.nextSibling;F=!1;t=t.parent;A=t.scripts}var G=new z;e.length?(q("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+e.join(", ")),(b.contextRequire||n)(e,function(){G.resolve(k.filter(d,function(a){if(!a.ctor)try{a.ctor=x(a.types,b.contextRequire)}catch(c){}for(var d=a.parent;d&&!d.types;)d=d.parent;var e=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(e&&e.stopParser&&!b.template);
a.instantiate=!d||d.instantiate&&d.instantiateChildren;return a.instantiate}))})):G.resolve(d);return G.promise},_require:function(a,b){var c=l("{"+a.innerHTML+"}"),d=[],e=[],g=new z,h=b&&b.contextRequire||n,k;for(k in c)d.push(k),e.push(c[k]);h(e,function(){for(var a=0;a<d.length;a++)f.setObject(d[a],arguments[a]);g.resolve(arguments)});return g.promise},_scanAmd:function(a,b){var c=new z,d=c.promise;c.resolve(!0);var e=this;t("script[type\x3d'dojo/require']",a).forEach(function(a){d=d.then(function(){return e._require(a,
b)});a.parentNode.removeChild(a)});return d},parse:function(a,b){var c;!b&&a&&a.rootNode?(b=a,c=b.rootNode):a&&f.isObject(a)&&!("nodeType"in a)?b=a:c=a;c=c?h.byId(c):p.body();b=b||{};var d=b.template?{template:!0}:{},e=[],l=this,g=this._scanAmd(c,b).then(function(){return l.scan(c,b)}).then(function(a){return l._instantiate(a,d,b,!0)}).then(function(a){return e=e.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});f.mixin(e,g);return e}};m.parser=A;d.parseOnLoad&&
a(100,A,"parse");return A})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(n,m){var f={};n.setObject("dojo.date.stamp",f);f.fromISOString=function(k,d){f._isoRegExp||(f._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var h=f._isoRegExp.exec(k),p=null;if(h){h.shift();h[1]&&h[1]--;h[6]&&(h[6]*=1E3);d&&(d=new Date(d),m.forEach(m.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),
function(c){return d["get"+c]()}),function(c,b){h[b]=h[b]||c}));p=new Date(h[0]||1970,h[1]||0,h[2]||1,h[3]||0,h[4]||0,h[5]||0,h[6]||0);100>h[0]&&p.setFullYear(h[0]||1970);var g=0,c=h[7]&&h[7].charAt(0);"Z"!=c&&(g=60*(h[8]||0)+(Number(h[9])||0),"-"!=c&&(g*=-1));c&&(g-=p.getTimezoneOffset());g&&p.setTime(p.getTime()+6E4*g)}return p};f.toISOString=function(f,d){var h=function(b){return 10>b?"0"+b:b};d=d||{};var m=[],g=d.zulu?"getUTC":"get",c="";"time"!=d.selector&&(c=f[g+"FullYear"](),c=["0000".substr((c+
"").length)+c,h(f[g+"Month"]()+1),h(f[g+"Date"]())].join("-"));m.push(c);if("date"!=d.selector){c=[h(f[g+"Hours"]()),h(f[g+"Minutes"]()),h(f[g+"Seconds"]())].join(":");g=f[g+"Milliseconds"]();d.milliseconds&&(c+="."+(100>g?"0":"")+h(g));if(d.zulu)c+="Z";else if("time"!=d.selector)var g=f.getTimezoneOffset(),e=Math.abs(g),c=c+((0<g?"-":"+")+h(Math.floor(e/60))+":"+h(e%60));m.push(c)}return m.join("T")};return f})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),
function(n,m,f,k,d,h){return n([h,d],{_onMap:function(d){var f=this.constructor._onMap,c;if(!f||!f.FINAL)delete this.constructor._onMap,f=this.registerConnectEvents(),f.FINAL=!0;d=d.toLowerCase();f[d]?c=this[f[d].method]:(d=this._onCamelCase(d),this[d]&&(c=d));return c},on:function(d,f){var c=this._onMap(d),e=d.replace(/\-/g,""),b="on"+e in this.domNode;return c||!b?this.inherited(arguments):this.own(k(this.domNode,e,f))[0]},emit:function(d,f,c){var e,b,h,k=d.toLowerCase(),n=this.constructor._onMap||
this.registerConnectEvents();b=this[this._onMap(k)];f=f||{};f.target||(f.target=this);b&&(n&&n[k])&&(this._onObj2Arr(function(){e=Array.prototype.slice.call(arguments)},n[k].argKeys)(f),h=m.mixin({},arguments),h[2]=e,h[0]=n[k].name.replace(/^on/,""));return this.inherited(h||arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(n,m,f,k){return n("dijit.form.ToggleButton",[f,k],{baseClass:"dijitToggleButton",
setChecked:function(d){m.deprecated("setChecked("+d+") is deprecated. Use set('checked',"+d+") instead.","","2.0");this.set("checked",d)}})})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),function(n,m,f,k,d,h,p,g,c,e){k("dijit-legacy-requires")&&p(0,function(){n(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});
p=m("dijit.form.Button"+(k("dojo-bidi")?"_NoBidi":""),[g,c],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:e,_setValueAttr:"valueNode",_setNameAttr:function(b){this.valueNode&&this.valueNode.setAttribute("name",b)},postCreate:function(){this.inherited(arguments);this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=h.trim(this.containerNode.innerHTML));this.onLabelSet()},
_setShowLabelAttr:function(b){this.containerNode&&f.toggle(this.containerNode,"dijitDisplayNone",!b);this._set("showLabel",b)},setLabel:function(b){d.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},onLabelSet:function(){this.inherited(arguments);!this.showLabel&&!("title"in this.params)&&(this.titleNode.title=h.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});k("dojo-bidi")&&(p=m("dijit.form.Button",
p,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(b){this._created&&this.textDir!=b&&(this._set("textDir",b),this._setLabelAttr(this.label))}}));return p})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(n,m,f,k,d,h,p,g){m("dijit-legacy-requires")&&k(0,
function(){require(["dijit/form/_FormValueWidget"])});return n("dijit.form._FormWidget",[d,p,h,g],{setDisabled:function(c){f.deprecated("setDisabled("+c+") is deprecated. Use set('disabled',"+c+") instead.","","2.0");this.set("disabled",c)},setValue:function(c){f.deprecated("dijit.form._FormWidget:setValue("+c+") is deprecated.  Use set('value',"+c+") instead.","","2.0");this.set("value",c)},getValue:function(){f.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.",
"","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!m("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(n,m,f,k,d,h,p,g,c,e){return m("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text",
"aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this._set("disabled",b);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?f.set(this.focusNode,"disabled",b):this.focusNode.setAttribute("aria-disabled",b?"true":"false");this.valueNode&&f.set(this.valueNode,"disabled",b);b?(this._set("hovering",!1),this._set("active",!1),b="tabIndex"in this.attributeMap?
this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",n.forEach(d.isArray(b)?b:[b],function(b){b=this[b];g("webkit")||e.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(b){if("mouse"==b&&this.isFocusable())var e=this.own(p(this.focusNode,"focus",function(){h.remove();e.remove()}))[0],f=g("pointer-events")?"pointerup":g("MSPointer")?"MSPointerUp":g("touch-events")?
"touchend, mouseup":"mouseup",h=this.own(p(this.ownerDocumentBody,f,d.hitch(this,function(b){h.remove();e.remove();this.focused&&("touchend"==b.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){c.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=k.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(b){}},compare:function(b,
c){return"number"==typeof b&&"number"==typeof c?isNaN(b)&&isNaN(c)?0:b-c:b>c?1:b<c?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(b,c){if(void 0==this._lastValueReported&&(null===c||!this._onChangeActive))this._resetValue=this._lastValueReported=b;this._pendingOnChange=this._pendingOnChange||typeof b!=typeof this._lastValueReported||0!=this.compare(b,this._lastValueReported);if((this.intermediateChanges||c||void 0===c)&&this._pendingOnChange)this._lastValueReported=b,this._pendingOnChange=
!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(b)}))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(n,m,f,k){var d=
n("dijit.form._ButtonMixin"+(f("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(d){d.stopPropagation();d.preventDefault();this.disabled||this.valueNode.click(d);return!1},_onClick:function(d){if(this.disabled)return d.stopPropagation(),d.preventDefault(),!1;!1===this.onClick(d)&&d.preventDefault();var f=d.defaultPrevented;if(!f&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var g=this.domNode;g.parentNode;g=g.parentNode){var c=k.byNode(g);if(c&&"function"==
typeof c._onSubmit){c._onSubmit(d);d.preventDefault();f=!0;break}}return!f},postCreate:function(){this.inherited(arguments);m.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(d){this._set("label",d);(this.containerNode||this.focusNode).innerHTML=d;this.onLabelSet()},onLabelSet:function(){}});f("dojo-bidi")&&(d=n("dijit.form._ButtonMixin",d,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return d})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare",
"dojo/dom-attr"],function(n,m){return n("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(f){var k=this.checked;this._set("checked",!k);var d=this.inherited(arguments);this.set("checked",d?this.checked:k);return d},_setCheckedAttr:function(f,k){this._set("checked",f);var d=this.focusNode||this.domNode;this._created&&m.get(d,"checked")!=!!f&&m.set(d,"checked",!!f);d.setAttribute(this._aria_attr,String(f));this._handleOnChange(f,k)},postCreate:function(){this.inherited(arguments);
var f=this.focusNode||this.domNode;this.checked&&f.setAttribute("checked","checked");void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html ../a11yclick".split(" "),function(n,
m,f,k,d,h,p,g,c,e){return n("dijit.form.DropDownButton",[p,g,c],{baseClass:"dijitDropDownButton",templateString:e,_fillContent:function(){var b=this.srcNodeRef,c=this.containerNode;if(b&&c)for(;b.hasChildNodes();){var d=b.firstChild;d.hasAttribute&&(d.hasAttribute("data-dojo-type")||d.hasAttribute("dojoType")||d.hasAttribute("data-"+m._scopeName+"-type")||d.hasAttribute(m._scopeName+"Type"))?(this.dropDownContainer=this.ownerDocument.createElement("div"),this.dropDownContainer.appendChild(d)):c.appendChild(d)}},
startup:function(){this._started||(!this.dropDown&&this.dropDownContainer&&(this.dropDown=d.byNode(this.dropDownContainer.firstChild),delete this.dropDownContainer),this.dropDown&&h.hide(this.dropDown),this.inherited(arguments))},isLoaded:function(){var b=this.dropDown;return!!b&&(!b.href||b.isLoaded)},loadDropDown:function(b){var c=this.dropDown,d=c.on("load",f.hitch(this,function(){d.remove();b()}));c.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),
function(n,m,f,k,d,h,p,g,c,e,b,z,q,t,v,a){return n("dijit._HasDropDown",a,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){!this.disabled&&!this.readOnly&&("MSPointerDown"!=a.type&&"pointerdown"!=a.type&&a.preventDefault(),this.own(b.once(this.ownerDocument,z.release,e.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},
_onDropDownMouseUp:function(a){var b=this.dropDown,c=!1;if(a&&this._opened){var e=h.position(this._buttonNode,!0);if(!(a.pageX>=e.x&&a.pageX<=e.x+e.w)||!(a.pageY>=e.y&&a.pageY<=e.y+e.h)){for(e=a.target;e&&!c;)d.contains(e,"dijitPopup")?c=!0:e=e.parentNode;if(c){e=a.target;if(b.onItemClick){for(var f;e&&!(f=q.byNode(e));)e=e.parentNode;if(f&&f.onClick&&f.getParent)f.getParent().onItemClick(f,a)}return}}}if(this._opened){if(b.focus&&(!1!==b.autoFocus||"mouseup"==a.type&&!this.hovering))this._focusDropDownTimer=
this.defer(function(){b.focus();delete this._focusDropDownTimer})}else this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",
left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";d.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(b(this._buttonNode,z.press,e.hitch(this,"_onDropDownMouseDown")),b(this._buttonNode,"click",e.hitch(this,"_onDropDownClick")),b(a,"keydown",e.hitch(this,"_onKey")),b(a,"keyup",e.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);
this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,d=a.target;if(b&&(this._opened&&b.handleKey)&&!1===b.handleKey(a))a.stopPropagation(),a.preventDefault();else if(b&&this._opened&&a.keyCode==c.ESCAPE)this.closeDropDown(),a.stopPropagation(),a.preventDefault();else if(!this._opened&&(a.keyCode==c.DOWN_ARROW||(a.keyCode==c.ENTER||a.keyCode==c.SPACE&&(!this._searchTimer||
a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(d.tagName||"").toLowerCase()||d.type&&"text"!==d.type.toLowerCase())))this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault()}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(e.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=
new m,b=e.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?b():this.loadDropDown(b);return a},toggleDropDown:function(){!this.disabled&&!this.readOnly&&(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,b=a.domNode,c=this._aroundNode||this.domNode,f=this,g=v.open({parent:this,popup:a,around:c,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){f.closeDropDown(!0)},onCancel:function(){f.closeDropDown(!0)},
onClose:function(){k.set(f._popupStateNode,"popupActive",!1);d.remove(f._popupStateNode,"dijitHasDropDownOpen");f._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&c.offsetWidth>a._popupWrapper.offsetWidth){var c=c.offsetWidth-a._popupWrapper.offsetWidth,m={w:a.domNode.offsetWidth+c};this._origStyle=b.style.cssText;e.isFunction(a.resize)?a.resize(m):h.setMarginBox(b,m);"R"==g.corner[1]&&(a._popupWrapper.style.left=a._popupWrapper.style.left.replace("px","")-c+"px")}k.set(this._popupStateNode,
"popupActive","true");d.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"!==b.getAttribute("role")&&!b.getAttribute("aria-labelledby")&&b.setAttribute("aria-labelledby",this.id);return g},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded",
"false"),a&&this.focus&&this.focus(),v.close(this.dropDown),this._opened=!1);this._origStyle&&(this.dropDown.domNode.style.cssText=this._origStyle,delete this._origStyle)}})})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(n,
m,f,k,d,h,p,g,c,e,b,z,q,t,v,a){return c("dijit.layout.ContentPane",[f,k,d],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:n._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,c){var d=new c(a,b);return!d.href&&d._contentSetter&&d._contentSetter.parseDeferred&&!d._contentSetter.parseDeferred.isFulfilled()?d._contentSetter.parseDeferred.then(function(){return d}):d},create:function(a,c){if((!a||!a.template)&&c&&!("href"in a)&&!("content"in a)){c=b.byId(c);for(var d=c.ownerDocument.createDocumentFragment();c.firstChild;)d.appendChild(c.firstChild);
a=m.delegate(a,{content:d})}this.inherited(arguments,[a,c])},postMixInProperties:function(){this.inherited(arguments);var a=v.getLocalization("dijit","loading",this.lang);this.loadingMessage=h.substitute(this.loadingMessage,a);this.errorMessage=h.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&g.forEach(this._contentSetter.parseResults,
function(a){!a._started&&(!a._destroyed&&m.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},_startChildren:function(){g.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&m.isFunction(a.startup))&&(a.startup(),a._started=!0)});this._contentSetter&&g.forEach(this._contentSetter.parseResults,function(a){!a._started&&(!a._destroyed&&m.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},setHref:function(a){n.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new e(m.hitch(this,"cancel"));this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){n.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new e(m.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new e(m.hitch(this,"cancel"));this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
m.isObject(this.ioArgs)&&m.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||t.get)(b),d;c.then(function(b){d=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(c){a._onError("Content",c)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return d});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+
" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;g.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(g.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?
b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||q.empty(this.containerNode);delete this._singleChild},_setContent:function(b,c){b=this.preprocessContent(b);this.destroyDescendants();var d=this._contentSetter;d&&d instanceof p._ContentSetter||(d=this._contentSetter=new p._ContentSetter({node:this.containerNode,_onError:m.hitch(this,this._onError),onContentError:m.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+
this.id+" could not change content due to "+b.message,b)}})}));var e=m.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!b.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),e=d.set(m.isObject(b)&&b.domNode?b.domNode:b,e),f=this;return a(e&&e.then?e:d.parseDeferred,function(){delete f._contentSetterParams;c||(f._started&&(f._startChildren(),f._scheduleLayout()),f._onLoadHandler(b))})},
preprocessContent:function(a){return a},_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(n,m,f,k,d,h,p,g,c,e){return m("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var b=this.getParent();this._childOfLayoutWidget=b&&b.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(c.on("resize",h.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var b=[],c=!1;p("\x3e *",this.containerNode).some(function(d){var e=
g.byNode(d);e&&e.resize?b.push(e):!/script|link|style/i.test(d.nodeName)&&d.offsetHeight&&(c=!0)});this._singleChild=1==b.length&&!c?b[0]:null;f.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(b,c){this._resizeCalled=!0;this._scheduleLayout(b,c)},_scheduleLayout:function(b,c){this._isShown()?this._layout(b,c):(this._needLayout=!0,this._changeSize=b,this._resultSize=c)},_layout:function(b,c){delete this._needLayout;!this._wasShown&&!1!==this.open&&this._onShow();
b&&k.setMarginBox(this.domNode,b);var d=this.containerNode;if(d===this.domNode){var f=c||{};h.mixin(f,b||{});if(!("h"in f)||!("w"in f))f=h.mixin(k.getMarginBox(d),f);this._contentBox=e.marginBox2contentBox(d,f)}else this._contentBox=k.getContentBox(d);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var b=this._contentBox||k.getContentBox(this.containerNode);this._singleChild.resize({w:b.w,h:b.h})}else for(var b=this.getChildren(),
c,d=0;c=b[d++];)c.resize&&c.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var b=this.domNode,c=this.domNode.parentNode;return"none"!=b.style.display&&"hidden"!=b.style.visibility&&!f.contains(b,"dijitHidden")&&c&&c.style&&"none"!=c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(n,m,f,k,d){function h(g,c){var e=g.resize?g.resize(c):f.setMarginBox(g.domNode,c);e?d.mixin(g,e):(d.mixin(g,f.getMarginBox(g.domNode)),d.mixin(g,c))}var p={marginBox2contentBox:function(d,c){var e=k.getComputedStyle(d),b=f.getMarginExtents(d,e),h=f.getPadBorderExtents(d,e);return{l:k.toPixelValue(d,e.paddingLeft),t:k.toPixelValue(d,e.paddingTop),w:c.w-(b.w+h.w),h:c.h-(b.h+h.h)}},layoutChildren:function(f,c,e,b,k){c=
d.mixin({},c);m.add(f,"dijitLayoutContainer");e=n.filter(e,function(b){return"center"!=b.region&&"client"!=b.layoutAlign}).concat(n.filter(e,function(b){return"center"==b.region||"client"==b.layoutAlign}));n.forEach(e,function(d){var e=d.domNode,f=d.region||d.layoutAlign;if(!f)throw Error("No region setting for "+d.id);var a=e.style;a.left=c.l+"px";a.top=c.t+"px";a.position="absolute";m.add(e,"dijitAlign"+(f.substring(0,1).toUpperCase()+f.substring(1)));e={};b&&b==d.id&&(e["top"==d.region||"bottom"==
d.region?"h":"w"]=k);"leading"==f&&(f=d.isLeftToRight()?"left":"right");"trailing"==f&&(f=d.isLeftToRight()?"right":"left");"top"==f||"bottom"==f?(e.w=c.w,h(d,e),c.h-=d.h,"top"==f?c.t+=d.h:a.top=c.t+c.h+"px"):"left"==f||"right"==f?(e.h=c.h,h(d,e),c.w-=d.w,"left"==f?c.l+=d.w:a.left=c.l+c.w+"px"):("client"==f||"center"==f)&&h(d,c)})}};d.setObject("dijit.layout.utils",p);return p})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(n,m,f,k,d,h,p){var g=0,c={_secureForInnerHtml:function(c){return c.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:h.empty,_setNodeContent:function(c,b){h.empty(c);if(b)if("number"==typeof b&&(b=b.toString()),"string"==typeof b&&(b=h.toDom(b,c.ownerDocument)),!b.nodeType&&m.isArrayLike(b))for(var d=b.length,f=0;f<b.length;f=d==b.length?f+1:0)h.place(b[f],c,"last");else h.place(b,c,"last");return c},_ContentSetter:k("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:n._scopeName,startup:!0,constructor:function(c,b){m.mixin(this,c||{});b=this.node=d.byId(this.node||b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",g++].join("_"))},set:function(c,b){void 0!==c&&(this.content=c);b&&this._mixin(b);this.onBegin();this.setContent();var d=this.onEnd();return d&&d.then?d:this.node},setContent:function(){var d=this.node;if(!d)throw Error(this.declaredClass+": setContent given no node");try{d=
c._setNodeContent(d,this.content)}catch(b){var f=this.onContentError(b);try{d.innerHTML=f}catch(g){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+g.message,g)}}this.node=d},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(f.forEach(this.parseResults,function(c){c.destroy&&c.destroy()}),delete this.parseResults);h.empty(this.node)},onBegin:function(){var d=
this.content;if(m.isString(d)&&(this.cleanContent&&(d=c._secureForInnerHtml(d)),this.extractContent)){var b=d.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(d=b[1])}this.empty();this.content=d;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(c){return"Error occurred setting content: "+c},onExecError:function(c){return"Error occurred executing scripts: "+
c},_mixin:function(c){var b={},d;for(d in c)d in b||(this[d]=c[d])},_parse:function(){var c=this.node;try{var b={};f.forEach(["dir","lang","textDir"],function(c){this[c]&&(b[c]=this[c])},this);var d=this;this.parseDeferred=p.parse({rootNode:c,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(b){return d.parseResults=b},function(b){d._onError("Content",b,"Error parsing in _ContentSetter#"+this.id)})}catch(g){this._onError("Content",g,"Error parsing in _ContentSetter#"+this.id)}},
_onError:function(d,b,f){d=this["on"+d+"Error"].call(this,b);f?console.error(f,b):d&&c._setNodeContent(this.node,d,!0)}}),set:function(d,b,f){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),b="");"number"==typeof b&&(b=b.toString());return f?(new c._ContentSetter(m.mixin(f,{content:b,node:d}))).set():c._setNodeContent(d,b,!0)}};m.setObject("dojo.html",c);return c})},"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\r\n\t   cellspacing\x3d"0"\x3e\r\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\r\n\x3c/table\x3e\r\n',
"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\r\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\r\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:esri/dijit/templates/Measurement.html":"\x3cdiv class\x3d\"esriMeasurement\"\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' class\x3d'esriMeasurementButtonContainer'\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_areaButton' iconClass\x3d'areaIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_areaButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_distanceButton' iconClass\x3d'distanceIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_distanceButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_locationButton' iconClass\x3d'locationIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_locationButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d\"esriMeasurementSeparator\"\x3e|\x3c/div\x3e\r\n    \x3cbutton dojoType\x3d'dijit.form.DropDownButton' baseClass\x3d'esriToggleButton' dojoAttachPoint\x3d'_unitDropDown' label\x3d'unit' value\x3d'unit' style\x3d'visibility:hidden;'\x3e\x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultLabel' class\x3d'resultLabel esriMeasurementResultLabel'\x3e\x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValueContainer' align\x3d'leading' class\x3d\"esriMeasurementResultValue\"\x3e\r\n    \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValue' class\x3d'result'\x3e\x26nbsp;\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultTable' align\x3d'leading' class\x3d\"resultTable esriMeasurementTableContainer\" style\x3d\"display:none;\"\x3e\r\n    \x3ctable class\x3d\"esriMeasurementResultTable\"\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableHeader\" colspan\x3d\"2\"\x3e${_NLS_Lat}\x3c/td\x3e\x3ctd class\x3d\"esriMeasurementTableHeader\"\x3e${_NLS_Lon}\x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d\"esriMeasurementTableRow\" dojoAttachPoint\x3d\"_mouseRow\"\x3e\r\n        \x3ctd dojoAttachPoint\x3d\"mouseCell\"\x3e\x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"mouseLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"mouseLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d\"esriMeasurementTableRow\"\x3e\r\n        \x3ctd dojoAttachPoint\x3d\"pinCell\"\x3e\x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"markerLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"markerLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e",
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/DropDownButton.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick" data-dojo-attach-point\x3d"valueNode" aria-hidden\x3d"true"\r\n/\x3e\x3c/span\x3e\r\n',
"*now":function(n){n(['dojo/i18n!*preload*esri/dijit/nls/Measurement*["ar","az","ca","cs","da","de-de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ro","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});
define("esri/dijit/Measurement","require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/debounce dojo/sniff dojo/number dojo/dom-style dojo/dom-construct dojox/gfx dijit/_Widget dijit/registry dijit/Menu dijit/MenuItem ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../geometry/geodesicUtils ../geometry/webMercatorUtils ../geometry/Point ../geometry/Polyline ../geometry/Polygon ../graphic ../tasks/AreasAndLengthsParameters ../tasks/LengthsParameters ../tasks/GeometryService ../kernel ../config ../domUtils ../lang ../units ../WKIDUnitConversion ../SpatialReference dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./_EventedWidget dojo/text!./templates/Measurement.html dojo/i18n!../nls/jsapi dijit/form/ToggleButton dijit/form/DropDownButton dijit/layout/ContentPane".split(" "),function(n,
m,f,k,d,h,p,g,c,e,b,z,q,t,v,a,l,s,x,u,A,w,r,y,K,J,S,L,N,T,U,H,C,B,D,M,F,E,I,Q,G){m=m([I,q,F,E],{declaredClass:"esri.dijit.Measurement",widgetsInTemplate:!0,templateString:Q,_map:null,_geometryService:null,_interpolatedMap:null,_mouseImgURL:null,_defaultPinURL:null,_measureGraphics:[],_measureGraphic:null,_locationGraphic:null,_tempGraphic:null,_polylineGraphics:null,_polygonGraphic:null,_pointSymbol:null,_useDefaultPointSymbol:!0,_defaultLineSymbol:null,_lineSymbol:null,_areaLineSymbol:null,_defaultFillSymbol:null,
_fillSymbol:null,_borderlessFillSymbol:null,_inputPoints:[],_unitDictionary:[],numberPattern:"#,###,###,##0.0",result:null,_defaultDistanceUnit:null,_defaultAreaUnit:null,_defaultLocationUnit:null,currentDistanceUnit:null,currentAreaUnit:null,currentLocationUnit:null,_unitStrings:{},_locationUnitStrings:[],_locationUnitStringsLong:[],_distanceUnitStrings:[],_distanceUnitStringsLong:[],_areaUnitStrings:[],_areaUnitStringsLong:[],_calculatingMsg:null,_gsErrorMsg:null,_NLS_Lat:null,_NLS_Lon:null,_mouseMoveMapHandler:null,
_mouseClickMapHandler:null,_doubleClickMapHandler:null,_mouseDragMapHandler:null,_clickMapHandler:null,_mapExtentChangeHandler:null,_geometryAreaHandler:null,_snappingCallback:null,_calcTimer:null,_buttonDijits:{},previousTool:null,activeTool:null,markerLongitude:null,markerLatitude:null,mouseLongitude:null,mouseLatitude:null,_eventMap:{"measure-start":["toolName","unitName"],measure:["toolName","geometry","values","unitName","segmentLength"],"measure-end":["toolName","geometry","values","unitName"],
"tool-change":["toolName","unitName","previousToolName"],"unit-change":["unitName","toolName"]},constructor:function(a,b){a=a||{};if(a.map){this._map=a.map;if(this._map.loaded)this._map.cs=this._checkCS(this._map.spatialReference),this._interpolatedMap=!("Web Mercator"===this._map.cs||"PCS"===this._map.cs);else var c=d.connect(this._map,"onLoad",this,function(){d.disconnect(c);c=null;this._map.cs=this._checkCS(this._map.spatialReference);this._interpolatedMap=!("Web Mercator"===this._map.cs||"PCS"===
this._map.cs)});this._geometryService=U.defaults.geometryService;this._mouseImgURL=n.toUrl("./images/cursor16x24.png");this._defaultPinURL=n.toUrl("./images/esriGreenPin16x26.png");this._defaultLineSymbol=new s(s.STYLE_SOLID,new h([0,128,255]),3);this._defaultFillSymbol=new x(s.STYLE_SOLID,new s(s.STYLE_SOLID,new h([0,128,255]),3),new h([0,0,0,0.5]));a.pointSymbol?(this._pointSymbol=a.pointSymbol,this._useDefaultPointSymbol=!1):(this._pointSymbol=new l(this._defaultPinURL,16,26),this._pointSymbol.setOffset(0,
12));var e=a.fillSymbol||this._defaultFillSymbol;this._fillSymbol=e;this._areaLineSymbol=e.outline||this._defaultLineSymbol;this._borderlessFillSymbol=u.fromJson(e.toJson());this._borderlessFillSymbol.setOutline(null);this._lineSymbol=a.lineSymbol?a.lineSymbol:this._defaultLineSymbol;this._defaultDistanceUnit=a.defaultLengthUnit?a.defaultLengthUnit:B.MILES;this._defaultAreaUnit=a.defaultAreaUnit?a.defaultAreaUnit:B.ACRES;this._defaultLocationUnit=a.defaultLocationUnit?a.defaultLocationUnit:B.DECIMAL_DEGREES;
this._snappingCallback=f.hitch(this,this._snappingCallback);a.geometry&&(this._userGeometry=a.geometry);this._calcTimer=null;this.advancedLocationUnits=a.advancedLocationUnits||!1;this.simpleLocationResults=a.simpleLocationResults||!1;this._NLS_Lon=G.widgets.measurement.NLS_longitude;this._NLS_Lat=G.widgets.measurement.NLS_latitude;this._gsErrorMsg=G.widgets.measurement.NLS_geometry_service_error;this._calculatingMsg=G.widgets.measurement.NLS_calculating;this._geometryServiceLength=p(this._geometryServiceLength,
250)}else console.log("Unable to find the required 'map' property in widget parameters")},startup:function(){this._setupDictionaries();b.create("img",{src:this._mouseImgURL,style:"vertical-align:middle"},this.mouseCell);this._useDefaultPointSymbol?b.create("img",{src:this._defaultPinURL,style:"vertical-align:middle"},this.pinCell):this._drawPointGraphics(this.pinCell);if(this._userGeometry)if(this._map.loaded)this._measureCustomGeometry();else var a=d.connect(this._map,"onLoad",this,function(){d.disconnect(a);
a=null;this._measureCustomGeometry()})},destroy:function(){this._resetToolState();this.clearResult();this.inherited(arguments);this._map=this._geometryService=this._measureGraphics=this._measureGraphic=this._tempGraphic=null},setTool:function(a,b){this.previousTool=this.activeTool||null;this._polylineGraphics=[];this._resetToolState();this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polygonGraphic=null);var c=t.byNode(this._buttonDijits[a].domNode).checked;e.set(this._unitDropDown.domNode,
"visibility","visible");t.byNode(this._buttonDijits.area.domNode).set("checked",!1);t.byNode(this._buttonDijits.distance.domNode).set("checked",!1);t.byNode(this._buttonDijits.location.domNode).set("checked",!1);if(!0===b||!1===b)c=b;t.byNode(this._buttonDijits[a].domNode).set("checked",c);this._toggleLocationResultsTable(!1,!0);c?(this.activeTool=a,(this._dblClickZoom=this._map.isDoubleClickZoom)&&this._map.disableDoubleClickZoom(),"area"===a?this._setupAreaTool():"distance"===a?this._setupDistanceTool():
"location"===a&&this._setupLocationTool(),this._map.snappingManager&&(this._map.snappingManager._startSelectionLayerQuery(),this._map.snappingManager._setUpSnapping())):(this.activeTool=null,e.set(this._unitDropDown.domNode,"visibility","hidden"));if(this.activeTool!==this.previousTool)this.onToolChange(this.activeTool,this.getUnit(),this.previousTool)},measure:function(a){a&&(this._userGeometry=a,this._measureCustomGeometry())},clearResult:function(){var a=this._map;this.result=0;t.byNode(this.resultValue.domNode).set("content",
"\x26nbsp");var b;for(b=0;b<this._measureGraphics.length;b++)a.graphics.remove(this._measureGraphics[b]);this._measureGraphic=null;this._measureGraphics=[];a.graphics.remove(this._tempGraphic);d.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null},show:function(){H.show(this.domNode)},hide:function(){H.hide(this.domNode)},showTool:function(a){e.set(this._buttonDijits[a].domNode,"display","inline-block")},hideTool:function(a){e.set(this._buttonDijits[a].domNode,"display","none")},
getTool:function(){if(this.activeTool)return{toolName:this.activeTool,unitName:this.getUnit()}},getUnit:function(){if("unit"!==this._unitDropDown.label)return this._unitDropDown.label},_setupLocationTool:function(){this._map.navigationManager.setImmediateClick(!0);this._measureGraphics=[];this._map.graphics.remove(this._locationGraphic);this._createLocationUnitList();"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),this._mapExtentChangeHandler=d.connect(this._map,"onExtentChange",f.hitch(this,
this._projectMapExtent)));this._clickMapHandler=d.connect(this._map,"onClick",this,"_locationClickHandler");this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",this,"_locationMoveHandler");this._mouseDragMapHandler=d.connect(this._map,"onMouseDrag",f.hitch(this,function(){t.byNode(this.resultValue.domNode).set("disabled",!0)}))},_locationButtonToggle:function(){this.clearResult();this.setTool("location")},_measureCustomPoint:function(){this.setTool("location",!0);"Web Mercator"===this._map.cs&&
this._userGeometry.spatialReference!==this._map.spatialReference&&(this._userGeometry=w.geographicToWebMercator(this._userGeometry));this._measureGraphic=new J;this._measureGraphic.setSymbol(this._pointSymbol);this._measureGraphic.setGeometry(this._userGeometry);this._measureGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);this._calculateLocation(this._userGeometry,!0)},_calculateLocation:function(a,b){var c=!("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===
this.currentLocationUnit);c&&this._mouseMoveMapHandler&&(d.disconnect(this._mouseMoveMapHandler),this._mouseMoveMapHandler=null);var e=f.clone(a);if(b){if("Web Mercator"!==this.map.cs&&this.map.spatialReference&&4326!==this.map.spatialReference.wkid){this._projectLocation(e,c);return}this._updateMarkerLocation(e.x,e.y)}e=this._getGCSLocation(e);this._advancedLocationDisplayHandler(e,c,b)},_projectLocation:function(a,b){this._geometryService.project([a],new M({wkid:4326}),f.hitch(this,function(a){this._advancedLocationDisplayHandler(a[0],
b,!0)}),f.hitch(this,function(a){console.log(this._gsErrorMsg,a)}))},_advancedLocationDisplayHandler:function(a,b,c){b?this._updateGeocoordinateStringLocation({coordinates:[[a.x,a.y]],sr:{wkid:4326},conversionType:this._unitStrings[this.currentLocationUnit]},a.geometry):(b=this._calculateXY(a.x,a.y),c?(this._updateClickLocation(b[0],b[1]),this.onMeasureEnd(this.activeTool,a,[b[0],b[1]],this.getUnit())):this._updateMouseLocation(b[0],b[1]))},_updateMarkerLocation:function(a,b){this.markerLocationX=
a;this.markerLocationY=b},_updateMouseLocation:function(a,b){this.mouseLongitude.innerHTML=a;this.mouseLatitude.innerHTML=b},_updateClickLocation:function(a,b){this._updateMouseLocation(a,b);this.markerLongitude.innerHTML=a;this.markerLatitude.innerHTML=b},_updateGeocoordinateStringLocation:function(a,b){this.resultValue.domNode.innerHTML="\x26nbsp";this._geometryService.toGeoCoordinateString(a,f.hitch(this,function(a){clearTimeout(this._calcTimer);a?(this.resultValue.domNode.innerHTML=a,this.onMeasureEnd(this.activeTool,
b,a,this.getUnit())):(this.resultValue.domNode.innerHTML=this._gsErrorMsg,this.onMeasureEnd(this.activeTool,null,null,this.getUnit()))}));clearTimeout(this._calcTimer);this._calcTimer=setTimeout(f.hitch(this,function(){this.resultValue.domNode.innerHTML=this._calculatingMsg},1E3))},_switchLocationUnit:function(a){var b,c;t.byNode(this._unitDropDown.domNode).set("label",this._unitStrings[a]);this.currentLocationUnit=a;d.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;this.onUnitChange(this._unitStrings[a],
this.activeTool);"esriDegreeMinuteSeconds"===a||"esriDecimalDegrees"===a?(this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",this,"_locationMoveHandler"),this._toggleLocationResultsTable(!0,!1),this._locationGraphic&&this._calculateLocation(this._locationGraphic.geometry,!0)):(this._toggleLocationResultsTable(!1,!1),null===this.resultValue||null===this.markerLocationX&&null===this.markerLocationY||(b=this.markerLocationX,c=this.markerLocationY,this._locationGraphic&&this._updateGeocoordinateStringLocation({coordinates:[[b,
c]],sr:{wkid:4326},conversionType:this._unitStrings[a]},this._locationGraphic.geometry)))},_toggleLocationResultsTable:function(a,b){b&&(this.resultValue.innerHTML="\x26nbsp",this.markerLongitude.innerHTML="---",this.markerLatitude.innerHTML="---",this.mouseLongitude.innerHTML="---",this.mouseLatitude.innerHTML="---");a?(H.show(this.resultTable.domNode),H.hide(this.resultValueContainer.domNode)):(H.hide(this.resultTable.domNode),H.show(this.resultValueContainer.domNode),d.disconnect(this._mouseMoveMapHandler));
"PCS"===this._map.cs&&H.hide(this._mouseRow)},_setupDistanceTool:function(){this._map.navigationManager.setImmediateClick(!0);"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),this._mapExtentChangeHandler=d.connect(this._map,"onExtentChange",this,"_projectMapExtent"));this._inputPoints=[];this._createDistanceUnitList();this._mouseClickMapHandler=d.connect(this._map,"onClick",this,"_measureDistanceMouseClickHandler");this._doubleClickMapHandler=d.connect(this._map,"onDblClick",this,"_measureDistanceDblClickHandler")},
_distanceButtonToggle:function(){this.clearResult();this.setTool("distance")},_measureCustomDistance:function(){if(1<this._userGeometry.paths[0].length){this.setTool("distance",!0);this._inputPoints=[];k.forEach(this._userGeometry.paths[0],f.hitch(this,function(a,b){this._inputPoints.push(a);var c=new J(new r(a[0],a[1],this._userGeometry.spatialReference),this._pointSymbol);this._measureGraphics.push(c);this._map.graphics.add(c);0!==b&&(this.result+=this._geodesicDistance(a,this._userGeometry.paths[0][b-
1]))}));this._measureGraphic=new J;this._measureGraphic.setSymbol(this._lineSymbol);this._measureGraphics.push(this._measureGraphic);this._userGeometry=this._densifyGeometry(this._userGeometry);this._measureGraphic.setGeometry(this._userGeometry);this._map.graphics.add(this._measureGraphic);this._inputPoints=[];var a=this._outputResult(this.result,this.getUnit());this.onMeasureEnd(this.activeTool,this._userGeometry,a,this.getUnit())}},_showDistance:function(a){a&&this._outputResult(a,t.byNode(this._unitDropDown.domNode).label)},
_setupAreaTool:function(){this._map.navigationManager.setImmediateClick(!0);this._inputPoints=[];this._createAreaUnitList();this._tempGraphic=new J;this._tempGraphic.setSymbol(this._areaLineSymbol);this._tempGraphic.setGeometry(new y(this._map.spatialReference));this._map.graphics.add(this._tempGraphic);"PCS"===this._map.cs&&(this._geometryAreaHandler=d.connect(this._geometryService,"onAreasAndLengthsComplete",this,"_outputArea"));this._mouseClickMapHandler=d.connect(this._map,"onClick",this,"_measureAreaMouseClickHandler");
this._doubleClickMapHandler=d.connect(this._map,"onDblClick",this,"_measureAreaDblClickHandler")},_areaButtonToggle:function(){this.clearResult();this.setTool("area")},_generatePolygonFromPaths:function(){var a=[];k.forEach(this._polylineGraphics,f.hitch(this,function(b){k.forEach(b.geometry.paths,f.hitch(this,function(b){k.forEach(b,f.hitch(this,function(b){a.push(b)}))}))}));a.push(a[0]);var b=new K(this._map.spatialReference);b.addRing(a);var b=this._densifyGeometry(b),c=new J;c.setGeometry(b);
c.setSymbol(this._borderlessFillSymbol);this._measureGraphic=c;this._measureGraphics.push(c);return c},_getArea:function(a){var b=[],c=new S;c.areaUnit=N.UNIT_SQUARE_METERS;c.calculationType="geodesic";K.prototype.isSelfIntersecting(a)?this._geometryService.simplify([a],f.hitch(this,function(a){k.forEach(a,f.hitch(this,function(d){"PCS"===this._map.cs?(c.polygons=a,this._geometryService.areasAndLengths(c)):("Web Mercator"===this._map.cs&&(d=w.webMercatorToGeographic(d)),b.push(d))}));var d=A.geodesicAreas(b,
B.SQUARE_METERS);this._showArea(d[0])})):("Web Mercator"===this._map.cs&&(a=w.webMercatorToGeographic(a)),b.push(a),"PCS"===this._map.cs?(c.polygons=b,this._geometryService.areasAndLengths(c)):(a=A.geodesicAreas(b,B.SQUARE_METERS),this._showArea(Math.abs(a[0]))))},_outputArea:function(a){this._showArea(Math.abs(a.areas[0]))},_showArea:function(a){if(a)if(this.result=a,a=t.byNode(this._unitDropDown.domNode).label,a=this._outputResult(this.result,a),this._mouseMoveMapHandler)this.onMeasure(this.activeTool,
this._measureGraphic.geometry,a,this.getUnit(),null);else this.onMeasureEnd(this.activeTool,this._measureGraphic.geometry,a,this.getUnit())},_measureCustomArea:function(){this.setTool("area",!0);this._inputPoints=[];var a=this._densifyGeometry(this._userGeometry);this._measureGraphic=new J;this._measureGraphic.setGeometry(a);this._measureGraphic.setSymbol(this._fillSymbol);this._measureGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);this._getArea(a);this._inputPoints=
[]},_resetToolState:function(){var a=this._map;a.navigationManager.setImmediateClick(!1);this._dblClickZoom&&a.enableDoubleClickZoom();this._inputPoints=[];d.disconnect(this._mouseClickMapHandler);d.disconnect(this._mouseMoveMapHandler);d.disconnect(this._doubleClickMapHandler);d.disconnect(this._mouseDragMapHandler);d.disconnect(this._clickMapHandler);d.disconnect(this._mapExtentChangeHandler);d.disconnect(this._geometryAreaHandler);this._mouseClickMapHandler=this._mouseMoveMapHandler=this._doubleClickMapHandler=
this._mouseDragMapHandler=this._clickMapHandler=this._mapExtentChangeHandler=this._geometryAreaHandler=null;a.snappingManager&&a.snappingManager._snappingGraphic&&a.graphics.remove(a.snappingManager._snappingGraphic);this._map.snappingManager&&(this._map.snappingManager._stopSelectionLayerQuery(),this._map.snappingManager._killOffSnapping());this._unitDropDown._opened&&this._unitDropDown.closeDropDown()},_measureCustomGeometry:function(){this.clearResult();switch(this._userGeometry.type){case "point":this._measureCustomPoint();
break;case "polyline":this._measureCustomDistance();break;case "polygon":this._measureCustomArea()}},_densifyGeometry:function(a){"Web Mercator"===this._map.cs&&(a=w.webMercatorToGeographic(a));a="PCS"===this._map.cs?a:A.geodesicDensify(a,5E5);"Web Mercator"===this._map.cs&&(a=w.geographicToWebMercator(a));return a},_geodesicDistance:function(a,b){var c=new y(this._map.spatialReference);"PCS"===this._map.cs&&(a=this._getGCSLocation(a),b=this._getGCSLocation(b));c.addPath([a,b]);"Web Mercator"===this._map.cs&&
(c=w.webMercatorToGeographic(c));return A.geodesicLengths([c],B.METERS)[0]},_calculateXY:function(a,b){var c=G.widgets.measurement,d=this._map.getScale(),e,f;if(this.getUnit()===c.NLS_decimal_degrees)f=500<=d?6:500>d&&50<=d?7:50>d&&5<=d?8:9,e=a.toFixed(f),f=b.toFixed(f),f=this._roundY(f),this._map.spatialReference._isWrappable()||(e=this._roundX(e));else if(this.getUnit()===c.NLS_deg_min_sec){var g=c=!1,h,k,l,m;f=9E4<=d?0:9E4>d&&9E3<=d?1:9E3>d&&900<=d?2:900>d&&90<d?3:4;0>a&&(c=!0,a=Math.abs(a));0>
b&&(g=!0,b=Math.abs(b));b=this._roundY(b);this._map.spatialReference._isWrappable()||(a=this._roundX(a));h=Math.floor(b)+"\u00b0";e=Math.floor(a)+"\u00b0";k=Math.floor(60*(b-Math.floor(b)))+"'";d=Math.floor(60*(a-Math.floor(a)))+"'";l=(60*(60*(b-Math.floor(b))-Math.floor(60*(b-Math.floor(b))))).toFixed(f)+'"';m=(60*(60*(a-Math.floor(a))-Math.floor(60*(a-Math.floor(a))))).toFixed(f)+'"';f=h+k+l;e=e+d+m;c&&(e="-"+e);g&&(f="-"+f)}return[e,f]},_roundY:function(a){90<a?a=90:-90>a&&(a=-90);return a},_roundX:function(a){180<
a?a=180:-180>a&&(a=-180);return a},_getGCSLocation:function(a){a=f.clone(a);if("Web Mercator"===this._map.cs)a=w.webMercatorToGeographic(a);else if("PCS"===this._map.cs){if(this._map._newExtent){var b=Math.abs((this._map._newExtent.xmax-this._map._newExtent.xmin)/(this._map.extent.xmax-this._map.extent.xmin)),c=Math.abs((this._map._newExtent.ymax-this._map._newExtent.ymin)/(this._map.extent.ymax-this._map.extent.ymin));a=new r((a.x-this._map.extent.xmin)*b+this._map._newExtent.xmin,(a.y-this._map.extent.ymin)*
c+this._map._newExtent.ymin,this._map.spatialReference)}}else a=a.normalize();return a},_projectMapExtent:function(a){a=new J(a);var b=new M({wkid:4326});this._geometryService.project([a.geometry],b,f.hitch(this,function(a){if(!this._mouseMoveMapHandler&&"location"===this.activeTool){if("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit)this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",f.hitch(this,this._locationMoveHandler));this._mouseMoveMapHandler=
d.connect(this._map,"onMouseMove",f.hitch(this,this._locationMoveHandler))}this._map._newExtent=a[0]}))},_checkCS:function(a){if(a.wkid)return 3857===a.wkid||102100===a.wkid||102113===a.wkid?"Web Mercator":C.isDefined(D[a.wkid])?"PCS":"GCS";if(a.wkt)return-1!==a.wkt.indexOf("WGS_1984_Web_Mercator")?"Web Mercator":0===a.wkt.indexOf("PROJCS")?"PCS":"GCS"},_switchUnit:function(a){"distance"===this.activeTool?this.currentDistanceUnit=a:"area"===this.activeTool?this.currentAreaUnit=a:"location"===this.activeTool&&
(this.currentLocationUnit=a);t.byNode(this._unitDropDown.domNode).set("label",this._unitStrings[a]);if(null!==this.result){var b=this._outputResult(this.result,this._unitStrings[a]);this.onUnitChange(this._unitStrings[a],this.activeTool);if(null!==this._measureGraphic)if(this._mouseMoveMapHandler)this.onMeasure(this.activeTool,this._measureGraphic.geometry,b,this.getUnit(),null);else this.onMeasureEnd(this.activeTool,this._measureGraphic.geometry,b,this.getUnit())}},_setupDictionaries:function(){var a=
G.widgets.measurement;this._unitDictionary[a.NLS_length_meters]=1;this._unitDictionary[a.NLS_length_kilometers]=1E3;this._unitDictionary[a.NLS_length_feet]=0.3048;this._unitDictionary[a.NLS_length_miles]=1609.344;this._unitDictionary[a.NLS_length_yards]=0.9144;this._unitDictionary[a.NLS_length_nautical_miles]=1852;this._unitDictionary[a.NLS_length_miles_us]=1609.347218694438;this._unitDictionary[a.NLS_length_feet_us]=0.3048006096012192;this._unitDictionary[a.NLS_length_yards_us]=0.9144018288036576;
this._unitDictionary[a.NLS_area_sq_meters]=1;this._unitDictionary[a.NLS_area_sq_kilometers]=1E6;this._unitDictionary[a.NLS_area_sq_feet]=0.09290304;this._unitDictionary[a.NLS_area_acres]=4046.8564224;this._unitDictionary[a.NLS_area_sq_miles]=2589988.110336;this._unitDictionary[a.NLS_area_hectares]=1E4;this._unitDictionary[a.NLS_area_sq_yards]=0.83612736;this._unitDictionary[a.NLS_area_sq_nautical_miles]=3429904;this._unitDictionary[a.NLS_area_acres_us]=4046.872609874252;this._unitDictionary[a.NLS_area_sq_miles_us]=
2589998.470319522;this._unitDictionary[a.NLS_area_sq_feet_us]=0.09290341161327487;this._unitDictionary[a.NLS_area_sq_yards_us]=0.8361307045194736;this._unitStrings={esriMiles:a.NLS_length_miles,esriKilometers:a.NLS_length_kilometers,esriFeet:a.NLS_length_feet,esriMeters:a.NLS_length_meters,esriYards:a.NLS_length_yards,esriNauticalMiles:a.NLS_length_nautical_miles,esriMilesUS:a.NLS_length_miles_us,esriFeetUS:a.NLS_length_feet_us,esriYardsUS:a.NLS_length_yards_us,esriAcres:a.NLS_area_acres,esriSquareKilometers:a.NLS_area_sq_kilometers,
esriSquareMiles:a.NLS_area_sq_miles,esriSquareFeet:a.NLS_area_sq_feet,esriSquareMeters:a.NLS_area_sq_meters,esriHectares:a.NLS_area_hectares,esriSquareYards:a.NLS_area_sq_yards,esriSquareNauticalMiles:a.NLS_area_sq_nautical_miles,esriAcresUS:a.NLS_area_acres_us,esriSquareMilesUS:a.NLS_area_sq_miles_us,esriSquareFeetUS:a.NLS_area_sq_feet_us,esriSquareYardsUS:a.NLS_area_sq_yards_us,esriDecimalDegrees:a.NLS_decimal_degrees,esriDegreeMinuteSeconds:a.NLS_deg_min_sec,esriMGRS:a.NLS_MGRS,esriUSNG:a.NLS_USNG,
esriUTM:a.NLS_UTM,esriDDM:a.NLS_DDM,esriDD:a.NLS_DD,esriGARS:a.NLS_GARS,esriGeoRef:a.NLS_GeoRef};this._locationUnitStrings=[a.NLS_decimal_degrees,a.NLS_deg_min_sec,a.NLS_MGRS,a.NLS_USNG,a.NLS_UTM,a.NLS_GeoRef,a.NLS_GARS];this._locationUnitStringsLong="esriDecimalDegrees esriDegreeMinuteSeconds esriMGRS esriUSNG esriUTM esriGeoRef esriGARS".split(" ");this._distanceUnitStrings=[a.NLS_length_miles,a.NLS_length_kilometers,a.NLS_length_feet,a.NLS_length_meters,a.NLS_length_yards,a.NLS_length_nautical_miles];
this._distanceUnitStringsLong="esriMiles esriKilometers esriFeet esriMeters esriYards esriNauticalMiles".split(" ");this._areaUnitStrings=[a.NLS_area_acres,a.NLS_area_sq_miles,a.NLS_area_sq_kilometers,a.NLS_area_hectares,a.NLS_area_sq_yards,a.NLS_area_sq_feet,a.NLS_area_sq_meters];this._areaUnitStringsLong="esriAcres esriSquareMiles esriSquareKilometers esriHectares esriSquareYards esriSquareFeet esriSquareMeters".split(" ");this._buttonDijits={area:this._areaButton,distance:this._distanceButton,
location:this._locationButton};t.byNode(this._distanceButton.domNode).setLabel(a.NLS_distance);t.byNode(this._areaButton.domNode).setLabel(a.NLS_area);t.byNode(this._locationButton.domNode).setLabel(a.NLS_location);t.byNode(this.resultLabel.domNode).setContent(a.NLS_resultLabel)},onToolChange:function(){},onUnitChange:function(){},onMeasureStart:function(){},onMeasure:function(){},onMeasureEnd:function(){},_measureAreaMouseClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);
b=b||a.mapPoint;this._inputPoints.push(b);this._currentStartPt=b;if(1===this._inputPoints.length){this._tempGraphic.setGeometry(new y(this._map.spatialReference));for(a=0;a<this._measureGraphics.length;a++)this._map.graphics.remove(this._measureGraphics[a]);this._measureGraphics=[];this.result=0;this._outputResult(this.result,G.widgets.measurement.NLS_area_sq_meters);this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",this,"_measureAreaMouseMoveHandler");this.onMeasureStart(this.activeTool,
this.getUnit())}this._measureGraphic=new J;this._measureGraphic.setSymbol(this._areaLineSymbol);this._measureGraphics.push(this._measureGraphic);if(1<this._inputPoints.length){var c=new y(this._map.spatialReference);c.addPath([this._inputPoints[this._inputPoints.length-2],b]);a=new y(this._map.spatialReference);a.addPath([this._inputPoints[0],b]);b=this._densifyGeometry(c);a=this._densifyGeometry(a);this._tempGraphic.setGeometry(a);this._measureGraphic.setGeometry(b);this._polylineGraphics.push(this._measureGraphic);
this._map.graphics.add(this._measureGraphic);if(2<this._inputPoints.length){b=new K(this._map.spatialReference);c=[];for(a=0;a<this._inputPoints.length;a++)c.push([this._inputPoints[a].x,this._inputPoints[a].y]);c.push([this._inputPoints[0].x,this._inputPoints[0].y]);b.addRing(c);this._polygonGraphic?(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic),this._measureGraphic=
this._polygonGraphic,this._polylineGraphics.pop()):(this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic));this._getArea(b)}}else this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polygonGraphic=null)},_measureAreaMouseMoveHandler:function(a){var b;if(0<this._inputPoints.length){var c=new y(this._map.spatialReference),d;this._map.snappingManager&&(d=this._map.snappingManager._snappingPoint);b=d||a.mapPoint;c.addPath([this._currentStartPt,
b]);a=this._densifyGeometry(c);this._tempGraphic.setGeometry(a)}1<this._inputPoints.length&&(a=new y(this._map.spatialReference),a.addPath([b,this._inputPoints[0]]),b=this._densifyGeometry(a),this._tempGraphic.setGeometry(this._tempGraphic.geometry.addPath(b.paths[0])))},_measureAreaDblClickHandler:function(a){d.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;"touch"===this._map.navigationManager.eventModel&&g("ios")&&this._measureAreaMouseClickHandler(a);a=new K(this._map.spatialReference);
var b=[],c;for(c=0;c<this._inputPoints.length;c++)b.push([this._inputPoints[c].x,this._inputPoints[c].y]);b.push([this._inputPoints[0].x,this._inputPoints[0].y]);a.addRing(b);this._inputPoints=[];this.measureGeometry=this._densifyGeometry(a);this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic));this._getArea(a);this._polylineGraphics=[]},
_measureDistanceMouseClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;this._inputPoints.push(a);this._currentStartPt=a;if(1===this._inputPoints.length){for(b=0;b<this._measureGraphics.length;b++)this._map.graphics.remove(this._measureGraphics[b]);this._map.graphics.remove(this._tempGraphic);this._measureGraphics=[];this.result=0;this._outputResult(this.result,G.widgets.measurement.NLS_length_meters);this._tempGraphic=new J;this._tempGraphic.setSymbol(this._lineSymbol);
this._map.graphics.add(this._tempGraphic);this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",this,"_measureDistanceMouseMoveHandler");this.onMeasureStart(this.activeTool,this.getUnit())}this._tempGraphic.setGeometry(new y(this._map.spatialReference));b=new J;b.setSymbol(this._pointSymbol);b.setGeometry(a);this._measureGraphics.push(b);this._map.graphics.add(b);if(1<this._inputPoints.length)if(this._measureGraphic=new J,this._measureGraphic.setSymbol(this._lineSymbol),this._measureGraphics.push(this._measureGraphic),
b=new y(this._map.spatialReference),b.addPath([this._inputPoints[this._inputPoints.length-2],a]),b=this._densifyGeometry(b),this._measureGraphic.setGeometry(b),this._map.graphics.add(this._measureGraphic),"PCS"===this._map.cs)this._geometryServiceLength(b,!1);else{b=this._geodesicDistance(this._inputPoints[this._inputPoints.length-2],a);var c=this._outputResult(b,this.getUnit());this.result+=b;this._showDistance(this.result);this.onMeasure(this.activeTool,a,this._outputResult(this.result,this.getUnit()),
this.getUnit(),c)}else b.setSymbol(this._pointSymbol)},_measureDistanceMouseMoveHandler:function(a){if(0<this._inputPoints.length){var b,c=new y(this._map.spatialReference);this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;c.addPath([this._currentStartPt,a]);c=this._densifyGeometry(c);this._tempGraphic.setGeometry(c);"PCS"!==this._map.cs&&(b=this._geodesicDistance(this._currentStartPt,a),c=this._outputResult(b,this.getUnit()),b+=this.result,this._showDistance(b),
this.onMeasure(this.activeTool,a,this._outputResult(b,this.getUnit()),this.getUnit(),c))}},_measureDistanceDblClickHandler:function(a){d.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;"touch"===this._map.navigationManager.eventModel&&g("ios")&&this._measureDistanceMouseClickHandler(a);a=new y(this._map.spatialReference);a.addPath(this._inputPoints);a=this._densifyGeometry(a);this._measureGraphic.geometry=a;"PCS"===this._map.cs?this._geometryServiceLength(a,!0):(this._inputPoints=
[],this.onMeasureEnd(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit()))},_geometryServiceLength:function(a,b){var c=new L;c.polylines=[a];c.lengthUnit=9001;c.calculationType="geodesic";this._geometryService.lengths(c,f.hitch(this,function(c){c=c.lengths[0];if(b)this.result=c,this._showDistance(this.result),this._inputPoints=[],this.onMeasureEnd(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit());else{var d=this._outputResult(c,this.getUnit());
this.result+=c;this._showDistance(this.result);this.onMeasure(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit(),d)}}))},_locationClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;this._locationButtonToggle();this._locationGraphic=new J;this._locationGraphic.setGeometry(a);this._locationGraphic.setSymbol(this._pointSymbol);this._map.graphics.add(this._locationGraphic);this._measureGraphics.push(this._locationGraphic);
this._calculateLocation(a,!0)},_locationMoveHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);this._calculateLocation(b||a.mapPoint,!1)},_outputResult:function(a,b){var d=a/this._unitDictionary[b];0===d?t.byNode(this.resultValue.domNode).set("content","\x26nbsp"):1E6<d?t.byNode(this.resultValue.domNode).set("content",c.format(d.toPrecision(9),{pattern:this.numberPattern})+" "+b):10>d?t.byNode(this.resultValue.domNode).set("content",c.format(d.toFixed(2),
{pattern:this.numberPattern+"0"})+" "+b):t.byNode(this.resultValue.domNode).set("content",c.format(d.toFixed(2),{pattern:this.numberPattern})+" "+b);return d},_createDistanceUnitList:function(){var b,c=new v({style:"display: none;"});k.forEach(this._distanceUnitStrings,f.hitch(this,function(b,d){var e=new a({label:b,onClick:f.hitch(this,function(){this._switchUnit(this._distanceUnitStringsLong[d])})});e.set("class","unitDropDown");c.addChild(e)}));t.byNode(this._unitDropDown.domNode).set("dropDown",
c);this.currentDistanceUnit?(b=this._unitStrings[this.currentDistanceUnit],t.byNode(this._unitDropDown.domNode).set("label",b)):(b=this._unitStrings[this._defaultDistanceUnit],t.byNode(this._unitDropDown.domNode).set("label",b),this.currentDistanceUnit=this._defaultDistanceUnit)},_createAreaUnitList:function(){var b,c=new v({style:"display: none;"});k.forEach(this._areaUnitStrings,f.hitch(this,function(b,d){var e=new a({label:b,onClick:f.hitch(this,function(){this._switchUnit(this._areaUnitStringsLong[d])})});
e.set("class","unitDropDown");c.addChild(e)}));t.byNode(this._unitDropDown.domNode).set("dropDown",c);this.currentAreaUnit?(b=this._unitStrings[this.currentAreaUnit],t.byNode(this._unitDropDown.domNode).set("label",b)):(b=this._unitStrings[this._defaultAreaUnit],t.byNode(this._unitDropDown.domNode).set("label",b),this.currentAreaUnit=this._defaultAreaUnit)},_createLocationUnitList:function(){var b;b=this._locationUnitStrings;var c=new v({style:"display: none;"});if(null===this._geometryService||!1===
this.advancedLocationUnits)b=b.slice(0,2);k.forEach(b,f.hitch(this,function(b,d){var e=new a({label:b,onClick:f.hitch(this,function(){this._switchLocationUnit(this._locationUnitStringsLong[d])})});e.set("class","unitDropDown");c.addChild(e)}));t.byNode(this._unitDropDown.domNode).set("dropDown",c);this.currentLocationUnit||(this.currentLocationUnit=this._defaultLocationUnit);b=this._unitStrings[this.currentLocationUnit];t.byNode(this._unitDropDown.domNode).set("label",b);("esriDegreeMinuteSeconds"===
this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit)&&this._toggleLocationResultsTable(!0,!1)},_drawPointGraphics:function(a){var c,d,h;d=this._pointSymbol;a=b.create("div",{"class":"esriLocationResultSymbol"},a);a=z.createSurface(a,10,10);9>g("ie")&&(c=a.getEventSource(),e.set(c,"position","relative"),e.set(c.parentNode,"position","relative"));d=d.getShapeDescriptors();try{h=a.createShape(d.defaultShape).setFill(d.fill).setStroke(d.stroke)}catch(k){a.clear();a.destroy();return}var l=
h.getBoundingBox();d=l.width;c=l.height;var m=-(l.x+d/2),l=-(l.y+c/2);a=a.getDimensions();a={dx:m+a.width/2,dy:l+a.height/2};if(10<d||10<c)d=5/(d/10>c/10?d:c),f.mixin(a,{xx:d,yy:d});h.applyTransform(a)}});g("extend-esri")&&f.setObject("dijit.Measurement",m,T);return m});