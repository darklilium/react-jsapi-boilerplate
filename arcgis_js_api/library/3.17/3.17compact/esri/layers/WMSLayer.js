// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.17/esri/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(l,g,n,m,d,b,s,p){l=l([b,s],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(b,h){g.mixin(this,h);this.initialize(b,h)},getTitle:function(b){var h;this.info&&(h=this.titleHasRelatedFields?"":this._getPopupValues(b,!0).title);return h||""},
getContent:function(b){return this.info?(new p({template:this,graphic:b,chartTheme:this.chartTheme},m.create("div"))).domNode:""}});n("extend-esri")&&g.setObject("dijit.PopupTemplate",l,d);return l})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all ./lang ./kernel ./request ./tasks/query ./tasks/QueryTask ./tasks/StatisticDefinition dojo/i18n!dojo/cldr/nls/number".split(" "),function(l,
g,n,m,d,b,s,p,w,h,y,F,r,x,A,I){l=l(null,{declaredClass:"esri.PopupInfo",initialize:function(c,a){if(c){g.mixin(this,a);this.info=c;this.title=this.getTitle;this.content=this.getContent;var f=this._fieldLabels={},k=this._fieldsMap={};c.fieldInfos&&n.forEach(c.fieldInfos,function(a){var t=a.fieldName.toLowerCase();f[t]=a.label;k[t]=a});this._relatedFieldPrefix="relationships/";this.titleHasRelatedFields=!!(c.title&&-1!==c.title.indexOf("{"+this._relatedFieldPrefix))}},toJson:function(){return m.fromJson(m.toJson(this.info))},
getTitle:function(){},getContent:function(){},getFieldInfo:function(c){var a;n.some(this.info&&this.info.fieldInfos,function(f){f.fieldName===c&&(a=f);return!!a});return a},getComponents:function(c){var a=this.info,f=new s,k,u;a.fieldInfos&&(u=n.filter(a.fieldInfos,function(a){return-1!==a.fieldName.indexOf(this._relatedFieldPrefix)},this));u&&0<u.length&&(k=this._getRelatedRecords({graphic:c,fieldsInfo:u}));k?k.always(g.hitch(this,function(){f.resolve(this._getPopupValues(c))})):f.resolve(this._getPopupValues(c));
return f.promise},getAttachments:function(c){var a=c.getLayer();c=c.attributes;if(this.info.showAttachments&&(a&&a.hasAttachments&&a.objectIdField)&&(c=c&&c[a.objectIdField]))return a.queryAttachmentInfos(c)},_getPopupValues:function(c,a){var f=this.info,k=c.getLayer(),u=g.clone(c.attributes)||{},t=g.clone(u),z=f.fieldInfos,e="",B="",v,q,G,b,r,x=k&&k._getDateOpts&&k._getDateOpts().properties,x=x&&x.slice(0),d={dateFormat:{properties:x,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)}};
if(this._relatedInfo)for(b in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(b)){var p=this._relatedInfo[b],w=this._relatedLayersInfo[b];p&&(n.forEach(p.relatedFeatures,function(a){for(r in a.attributes)if(a.attributes.hasOwnProperty(r)&&"esriRelCardinalityOneToOne"===w.relation.cardinality){var q=this._toRelatedFieldName([w.relation.id,r]);u[q]=t[q]=a.attributes[r]}},this),n.forEach(p.relatedStatsFeatures,function(a){for(r in a.attributes)if(a.attributes.hasOwnProperty(r)){var q=this._toRelatedFieldName([w.relation.id,
r]);u[q]=t[q]=a.attributes[r]}},this))}z&&n.forEach(z,function(a){q=a.fieldName;var e=this._getLayerFieldInfo(k,q);e&&(q=a.fieldName=e.name);t[q]=this._formatValue(t[q],q,d);x&&(a.format&&a.format.dateFormat)&&(a=n.indexOf(x,q),-1<a&&x.splice(a,1))},this);if(k){b=k.types;var F=(p=k.typeIdField)&&u[p];for(q in u)if(u.hasOwnProperty(q)&&-1===q.indexOf(this._relatedFieldPrefix)&&(G=u[q],h.isDefined(G))){var s=this._getDomainName(k,c,b,F,q,G);h.isDefined(s)?t[q]=s:q===p&&(s=this._getTypeName(k,c,G),h.isDefined(s)&&
(t[q]=s))}}f.title&&(e=this._processFieldsInLinks(this._fixTokens(f.title,k),u),e=g.trim(h.substitute(t,e,d)||""));if(a)return{title:e};f.description&&(B=this._processFieldsInLinks(this._fixTokens(f.description,k),u),B=g.trim(h.substitute(t,B,d)||""));z&&(v=[],n.forEach(z,function(a){(q=a.fieldName)&&a.visible&&v.push([a.label||q,h.substitute(t,"${"+q+"}",d)||""])}));var y,m;f.mediaInfos&&(y=[],n.forEach(f.mediaInfos,function(a){m=0;G=a.value;switch(a.type){case "image":var q=G.sourceURL,q=q&&g.trim(h.substitute(u,
this._fixTokens(q,k)));m=!!q;break;case "piechart":case "linechart":case "columnchart":case "barchart":var e,q=G.normalizeField;G.fields=n.map(G.fields,function(a){return(e=this._getLayerFieldInfo(k,a))?e.name:a},this);q&&(e=this._getLayerFieldInfo(k,q),G.normalizeField=e?e.name:q);m=n.some(G.fields,function(a){return h.isDefined(u[a])||-1!==a.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(m){a=g.clone(a);G=a.value;var q=a.title?this._processFieldsInLinks(this._fixTokens(a.title,
k),u):"",v=a.caption?this._processFieldsInLinks(this._fixTokens(a.caption,k),u):"";a.title=q?g.trim(h.substitute(t,q,d)||""):"";a.caption=v?g.trim(h.substitute(t,v,d)||""):"";if("image"===a.type)G.sourceURL=h.substitute(u,this._fixTokens(G.sourceURL,k)),G.linkURL&&(G.linkURL=g.trim(h.substitute(u,this._fixTokens(G.linkURL,k))||""));else{var f,z;n.forEach(G.fields,function(a,q){if(-1!==a.indexOf(this._relatedFieldPrefix))z=this._getRelatedChartInfos(a,G,u,d),z instanceof Array?G.fields=z:G.fields[q]=
z;else{var e=u[a],e=void 0===e?null:e;f=u[G.normalizeField]||0;e&&f&&(e/=f);G.fields[q]={y:e,tooltip:(this._fieldLabels[a.toLowerCase()]||a)+":\x3cbr/\x3e"+this._formatValue(e,a,d,!!f)}}},this)}y.push(a)}},this));return{title:e,description:B,hasDescription:!!f.description,fields:v&&v.length?v:null,mediaInfos:y&&y.length?y:null,formatted:t,editSummary:k&&k.getEditSummary?k.getEditSummary(c):""}},_getRelatedChartInfos:function(c,a,f,k){var u,t,z,e,B,v;u=[];v=this._fromRelatedFieldName(c);B=v[0];t=this._relatedInfo[B];
B=this._relatedLayersInfo[B];t&&n.forEach(t.relatedFeatures,function(q){q=q.attributes;var t,B;for(B in q)if(q.hasOwnProperty(B)&&B===v[1]){t={};e=q[B];a.normalizeField&&(z=-1!==a.normalizeField.indexOf(this._relatedFieldPrefix)?q[this._fromRelatedFieldName(a.normalizeField)[1]]:f[a.normalizeField]);e&&z&&(e/=z);if(a.tooltipField)if(-1!==a.tooltipField.indexOf(this._relatedFieldPrefix)){var b=this._fromRelatedFieldName(a.tooltipField)[1];t.tooltip=q[b]&&"string"===typeof q[b]?q[b]+":\x3cbr/\x3e"+
this._formatValue(e,q[b],k,!!z):b+":\x3cbr/\x3e"+this._formatValue(e,b,k,!!z)}else t.tooltip=(this._fieldLabels[c.toLowerCase()]||c)+":\x3cbr/\x3e"+this._formatValue(e,a.tooltipField,k,!!z);else t.tooltip=e;t.y=e;u.push(t)}},this);return"esriRelCardinalityOneToMany"===B.relation.cardinality||"esriRelCardinalityManyToMany"===B.relation.cardinality?u:u[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",
dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",
year:"(datePattern: 'y', selector: 'date')"},_reHref:/href\s*=\s*\"([^\"]+)\"/ig,_reHrefApos:/href\s*=\s*\'([^\']+)\'/ig,_fixTokens:function(c,a){var f=this;return c.replace(/(\{([^\{\r\n]+)\})/g,function(k,c,t){k=f._getLayerFieldInfo(a,t);return"$"+(k?"{"+k.name+"}":c)})},_encodeAttributes:function(c){c=g.clone(c)||{};var a,f;for(a in c)if((f=c[a])&&"string"===typeof f)f=encodeURIComponent(f).replace(/\'/g,"\x26apos;"),c[a]=f;return c},_processFieldsInLinks:function(c,a){var f=this._encodeAttributes(a),
k=this;c&&(c=c.replace(this._reHref,function(c,t){return k._addValuesToHref(c,t,a,f)}).replace(this._reHrefApos,function(c,t){return k._addValuesToHref(c,t,a,f)}));return c},_addValuesToHref:function(c,a,f,k){a=a&&g.trim(a);return h.substitute(a&&0===a.indexOf("${")?f:k,c)},_getLayerFieldInfo:function(c,a){return c&&c.getField?c.getField(a):null},_formatValue:function(c,a,f,k){var u=this._fieldsMap[a.toLowerCase()],t=u&&u.format;a=-1!==n.indexOf(f.dateFormat.properties,a);var z="number"===typeof c&&
!a&&(!t||!t.dateFormat);if(!h.isDefined(c)||!u||!h.isDefined(t))return z?this._forceLTR(c):c;var e="",u=[],B=t.hasOwnProperty("places")||t.hasOwnProperty("digitSeparator"),v=t.hasOwnProperty("digitSeparator")?t.digitSeparator:!0;if(B&&!a)e="NumberFormat",u.push("places: "+(h.isDefined(t.places)&&(!k||0<t.places)?Number(t.places):"Infinity")),u.length&&(e+="("+u.join(",")+")");else if(t.dateFormat)e="DateFormat"+this._insertOffset(this._dateFormats[t.dateFormat]||this._dateFormats.shortDateShortTime);
else return z?this._forceLTR(c):c;var q=this._applyFormatting(c,e,f);B&&-1<c.constructor.toString().indexOf("Array")&&(q="",n.forEach(c,g.hitch(this,function(a){q=q+this._applyFormatting(a,e,f)+" "})));B&&!v&&I.group&&(q=q.replace(RegExp("\\"+I.group,"g"),""));return z?this._forceLTR(q):q},_applyFormatting:function(c,a,f){return h.substitute({myKey:c},"${myKey:"+a+"}",f)||""},_forceLTR:function(c){var a=p("ie");return a&&10>=a?c:"\x3cspan class\x3d'esriNumericValue'\x3e"+c+"\x3c/span\x3e"},_insertOffset:function(c){c&&
(c=h.isDefined(this.utcOffset)?c.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):c);return c},_getDomainName:function(c,a,f,k,u,t){return(c=c.getDomain&&c.getDomain(u,{feature:a}))&&c.codedValues?c.getName(t):null},_getTypeName:function(c,a,f){return(c=c.getType&&c.getType(a))&&c.name},_getRelatedRecords:function(c){var a=c.graphic,f=new s,k;this._relatedLayersInfo?this._queryRelatedLayers(a).then(g.hitch(this,function(c){this._setRelatedRecords(a,c);f.resolve(c)}),g.hitch(this,this._handlerErrorResponse,
f)):this._getRelatedLayersInfo(c).then(g.hitch(this,function(c){for(k in c)c.hasOwnProperty(k)&&c[k]&&(this._relatedLayersInfo[k].relatedLayerInfo=c[k]);this._queryRelatedLayers(a).then(g.hitch(this,function(t){this._setRelatedRecords(a,t);f.resolve(t)}),g.hitch(this,this._handlerErrorResponse,f))}),g.hitch(this,this._handlerErrorResponse,f));return f.promise},_getRelatedLayersInfo:function(c){var a=c.fieldsInfo,f,k,b={};f=c.graphic.getLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});
n.forEach(a,function(a){var z,e,c,v;z=this._fromRelatedFieldName(a.fieldName);e=z[0];z=z[1];e&&(this._relatedLayersInfo[e]||(n.some(f.relationships,function(a){if(a.id==e)return v=a,!0}),v&&(this._relatedLayersInfo[e]={relation:v,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[e]&&(this._relatedLayersInfo[e].relatedFields.push(z),a.statisticType&&(c=new A,c.statisticType=a.statisticType,c.onStatisticField=z,c.outStatisticFieldName=z,this._relatedLayersInfo[e].outStatistics.push(c))))},
this);for(k in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(k)&&this._relatedLayersInfo[k]&&(c=this._relatedLayersInfo[k].relation,c=f.url.replace(/[0-9]+$/,c.relatedTableId),this._relatedLayersInfo[k].relatedLayerUrl=c,b[k]=F({url:c,content:{f:"json"},callbackParamName:"callback"}));return w(b)},_queryRelatedLayers:function(c){var a={},f;for(f in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(f)&&(a[f]=this._queryRelatedLayer({graphic:c,relatedInfo:this._relatedLayersInfo[f]}));
return w(a)},_queryRelatedLayer:function(c){var a,f,k,b,t,z,e,B,v,q;a=c.graphic;f=a.getLayer().url.match(/[0-9]+$/g)[0];B=c.relatedInfo;e=B.relatedLayerInfo;v=B.relatedLayerUrl;q=B.relation;n.some(e.relationships,function(a){if(a.relatedTableId===parseInt(f,10))return k=a,!0},this);k&&(c=new r,n.some(e.fields,function(a){if(a.name===k.keyField)return t=-1!==n.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],a.type)?"number":"string",!0}),b="string"===
t?k.keyField+"\x3d'"+a.attributes[q.keyField]+"'":k.keyField+"\x3d"+a.attributes[q.keyField],c.where=b,c.outFields=B.relatedFields,B.outStatistics&&(0<B.outStatistics.length&&e.supportsStatistics)&&(z=new r,z.where=c.where,z.outFields=c.outFields,z.outStatistics=B.outStatistics),a=new x(v),b=[],b.push(a.execute(c)),z&&b.push(a.execute(z)));return w(b)},_setRelatedRecords:function(c,a){this._relatedInfo=[];for(var f in a)if(a.hasOwnProperty(f)&&a[f]){var k=a[f];this._relatedInfo[f]={};this._relatedInfo[f].relatedFeatures=
k[0].features;h.isDefined(k[1])&&(this._relatedInfo[f].relatedStatsFeatures=k[1].features)}},_handlerErrorResponse:function(c,a){c.reject(a)},_fromRelatedFieldName:function(c){var a=[];-1!==c.indexOf(this._relatedFieldPrefix)&&(c=c.split("/"),a=c.slice(1));return a},_toRelatedFieldName:function(c){var a="";c&&0<c.length&&(a=this._relatedFieldPrefix+c[0]+"/"+c[1]);return a}});b("extend-esri")&&(y.PopupInfo=y.PopupInfoTemplate=l);return l})},"esri/tasks/QueryTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),
function(l,g,n,m,d,b,s,p,w,h,y,F,r){l=l(F,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(b,h){this._handler=g.hitch(this,this._handler);this._relationshipQueryHandler=g.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=g.hitch(this,this._executeForIdsHandler);this._countHandler=g.hitch(this,this._countHandler);
this._extentHandler=g.hitch(this,this._extentHandler);this.source=h&&h.source;this.gdbVersion=h&&h.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},
onExecuteForExtentComplete:function(){},execute:function(b,h,r,c,a){var f=a.assembly;b=this._encode(g.mixin({},this._url.query,{f:"json"},b.toJson(f&&f[0])));var k=this._handler,u=this._errorHandler;this.source&&(f={source:this.source.toJson()},b.layer=d.toJson(f));this.gdbVersion&&(b.gdbVersion=this.gdbVersion);return p({url:this._url.path+"/query",content:b,callbackParamName:"callback",load:function(t,f){k(t,f,h,r,a.dfd)},error:function(t){u(t,r,a.dfd)},callbackSuffix:c},this.requestOptions)},executeRelationshipQuery:function(b,
h,r){b=this._encode(g.mixin({},this._url.query,{f:"json"},b.toJson()));var c=this._relationshipQueryHandler,a=this._errorHandler;this.gdbVersion&&(b.gdbVersion=this.gdbVersion);var f=new m(w._dfdCanceller);f._pendingDfd=p({url:this._url.path+"/queryRelatedRecords",content:b,callbackParamName:"callback",load:function(a,b){c(a,b,h,r,f)},error:function(c){a(c,r,f)}},this.requestOptions);return f},executeForIds:function(b,h,r,c){var a=c.assembly;b=this._encode(g.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},
b.toJson(a&&a[0])));var f=this._executeForIdsHandler,k=this._errorHandler;this.source&&(a={source:this.source.toJson()},b.layer=d.toJson(a));this.gdbVersion&&(b.gdbVersion=this.gdbVersion);return p({url:this._url.path+"/query",content:b,callbackParamName:"callback",load:function(a,t){f(a,t,h,r,c.dfd)},error:function(a){k(a,r,c.dfd)}},this.requestOptions)},executeForCount:function(b,h,r,c){var a=c.assembly;b=this._encode(g.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},b.toJson(a&&
a[0])));var f=this._countHandler,k=this._errorHandler;this.source&&(a={source:this.source.toJson()},b.layer=d.toJson(a));this.gdbVersion&&(b.gdbVersion=this.gdbVersion);return p({url:this._url.path+"/query",content:b,callbackParamName:"callback",load:function(a,t){f(a,t,h,r,c.dfd)},error:function(a){k(a,r,c.dfd)}},this.requestOptions)},executeForExtent:function(b,h,r,c){var a=c.assembly;b=this._encode(g.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},b.toJson(a&&a[0])));
var f=this._extentHandler,k=this._errorHandler;this.source&&(a={source:this.source.toJson()},b.layer=d.toJson(a));this.gdbVersion&&(b.gdbVersion=this.gdbVersion);return p({url:this._url.path+"/query",content:b,callbackParamName:"callback",load:function(a,t){f(a,t,h,r,c.dfd)},error:function(a){k(a,r,c.dfd)}},this.requestOptions)},_handler:function(b,h,d,c,a){try{var f=new r(b);this._successHandler([f],"onComplete",d,a)}catch(k){this._errorHandler(k,c,a)}},_relationshipQueryHandler:function(b,h,d,c,
a){try{var f=b.geometryType,k=b.spatialReference,u={};n.forEach(b.relatedRecordGroups,function(a){var e={};e.geometryType=f;e.spatialReference=k;e.features=a.relatedRecords;e=new r(e);if(null!=a.objectId)u[a.objectId]=e;else for(var t in a)a.hasOwnProperty(t)&&"relatedRecords"!==t&&(u[a[t]]=e)});this._successHandler([u],"onExecuteRelationshipQueryComplete",d,a)}catch(t){this._errorHandler(t,c,a)}},_executeForIdsHandler:function(b,h,r,c,a){try{this._successHandler([b.objectIds],"onExecuteForIdsComplete",
r,a)}catch(f){this._errorHandler(f,c,a)}},_countHandler:function(b,h,r,c,a){try{var f,k=b.features,u=b.objectIds;if(u)f=u.length;else{if(k)throw Error("Unable to perform query. Please check your parameters.");f=b.count}this._successHandler([f],"onExecuteForCountComplete",r,a)}catch(t){this._errorHandler(t,c,a)}},_extentHandler:function(b,r,d,c,a){try{b.extent&&(b.extent=new h(b.extent)),this._successHandler([b],"onExecuteForExtentComplete",d,a)}catch(f){this._errorHandler(f,c,a)}}});y._createWrappers(l);
b("extend-esri")&&g.setObject("tasks.QueryTask",l,s);return l})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(l,g,n,m,d,b,s,p){l=l(p,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(b,h){b&&g.isString(b)&&(this._url=s.urlToObject(this.url=b));h&&h.requestOptions&&(this.requestOptions=h.requestOptions);this.normalization=!0;
this._errorHandler=g.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var b=this._url,h=/^http:/i;this.url&&(this.url=this.url.replace(h,"https:"));b&&b.path&&(b.path=b.path.replace(h,"https:"))},_encode:function(b,h,d){var p,r,s={},m,l;for(m in b)if("declaredClass"!==m&&(p=b[m],r=typeof p,null!==p&&void 0!==p&&"function"!==r))if(g.isArray(p)){s[m]=[];l=p.length;for(r=0;r<l;r++)s[m][r]=this._encode(p[r])}else"object"===r?p.toJson&&(r=p.toJson(d&&d[m]),"esri.tasks.FeatureSet"===
p.declaredClass&&r.spatialReference&&(r.sr=r.spatialReference,delete r.spatialReference),s[m]=h?r:n.toJson(r)):s[m]=p;return s},_successHandler:function(d,h,p,g){h&&this[h].apply(this,d);p&&p.apply(null,d);g&&b._resDfd(g,d)},_errorHandler:function(b,h,d){this.onError(b);h&&h(b);d&&d.errback(b)},setNormalization:function(b){this.normalization=b},onError:function(){}});m("extend-esri")&&(d.Task=l);return l})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),
function(l,g,n,m,d,b,s,p,w,h,y){l=l(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(b){if(b){g.mixin(this,b);var r=this.features,d=b.spatialReference,m=h.getGeometryType(b.geometryType),d=this.spatialReference=new p(d);this.geometryType=b.geometryType;b.fields&&(this.fields=b.fields);n.forEach(r,function(b,c){var a=b.geometry&&b.geometry.spatialReference;r[c]=new s(m&&b.geometry?new m(b.geometry):null,b.symbol&&y.fromJson(b.symbol),b.attributes);r[c].geometry&&!a&&r[c].geometry.setSpatialReference(d)});
this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(d){var r={};this.displayFieldName&&(r.displayFieldName=this.displayFieldName);this.fields&&(r.fields=this.fields);this.spatialReference?r.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(r.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(r.geometryType=
h.getJsonType(this.features[0].geometry)),r.features=w._encodeGraphics(this.features,d));r.exceededTransferLimit=this.exceededTransferLimit;r.transform=this.transform;return b.fixJson(r)},_hydrate:function(){var b=this.transform,h=this.geometryType;if(b&&h)for(var d=this.features,p=b.translate[0],g=b.translate[1],c=b.scale[0],a=b.scale[1],f=function(a,b,t){if("esriGeometryPoint"===a)return function(a){a.x=b(a.x);a.y=t(a.y)};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){a=
a.rings||a.paths;var e,f,v,q,c,k,h,d;e=0;for(f=a.length;e<f;e++){c=a[e];v=0;for(q=c.length;v<q;v++)k=c[v],0<v?(h+=k[0],d+=k[1]):(h=k[0],d=k[1]),k[0]=b(h),k[1]=t(d)}};if("esriGeometryEnvelope"===a)return function(a){a.xmin=b(a.xmin);a.ymin=t(a.ymin);a.xmax=b(a.xmax);a.ymax=t(a.ymax)};if("esriGeometryMultipoint"===a)return function(a){a=a.points;var e,f,v,q,c;e=0;for(f=a.length;e<f;e++)v=a[e],0<e?(q+=v[0],c+=v[1]):(q=v[0],c=v[1]),v[0]=b(q),v[1]=t(c)}}(h,function(a){return a*c+p},function(b){return g-
b*a}),b=0,h=d.length;b<h;b++)d[b].geometry&&f(d[b].geometry);this.transform=null},quantize:function(b){if(!this.geometryType)return this.transform=null,this;var h=b.translate[0],d=b.translate[1],p=b.scale[0],g=b.scale[1],c=this.features,a=function(a,b,e){var f,v,q,c,k,h,d=[];f=0;for(v=a.length;f<v;f++)if(q=a[f],0<f){if(h=b(q[0]),q=e(q[1]),h!==c||q!==k)d.push([h-c,q-k]),c=h,k=q}else c=b(q[0]),k=e(q[1]),d.push([c,k]);return 0<d.length?d:null},f=function(b,f,e){if("esriGeometryPoint"===b)return function(a){a.x=
f(a.x);a.y=e(a.y);return a};if("esriGeometryPolyline"===b||"esriGeometryPolygon"===b)return function(b){var v,q,c,t,k;c=b.rings||b.paths;k=[];v=0;for(q=c.length;v<q;v++)t=c[v],(t=a(t,f,e))&&k.push(t);return 0<k.length?(b.rings?b.rings=k:b.paths=k,b):null};if("esriGeometryMultipoint"===b)return function(b){var v;v=a(b.points,f,e);return 0<v.length?(b.points=v,b):null};if("esriGeometryEnvelope"===b)return function(a){return a}}(this.geometryType,function(a){return Math.round((a-h)/p)},function(a){return Math.round((d-
a)/g)}),k,u;k=0;for(u=c.length;k<u;k++)c[k].geometry&&(f(c[k].geometry)||c[k].setGeometry(null));this.transform=b;return this}});m("extend-esri")&&g.setObject("tasks.FeatureSet",l,d);return l})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(l,g,n,m){l=l(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,
maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});n("extend-esri")&&g.setObject("tasks.StatisticDefinition",l,m);return l})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),
function(l,g,n,m,d,b,s,p,w,h,y,F,r,x,A,I,c,a,f,k){var u=0;g=g([f,A,I],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=m.mixin({},k.widgets.popup)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this.template.getComponents(this.graphic).then(m.hitch(this,this._handleComponentsSuccess),m.hitch(this,this._handleComponentsError))},destroy:function(){this._dfd&&this._dfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments)},_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+
1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var a=this._mediaInfos,f=a.length,e=this.domNode,c=this._prevMedia,v=this._nextMedia;if(1<f){var q=0,k=0;d.forEach(a,function(a){"image"===a.type?q++:-1!==a.type.indexOf("chart")&&k++});q&&(h.set(this._imageCount,"innerHTML",q),b.query(".summary .image",e).removeClass("hidden"));k&&(h.set(this._chartCount,"innerHTML",k),b.query(".summary .chart",e).removeClass("hidden"))}else b.query(".summary",
e).addClass("hidden"),y.add(c,"hidden"),y.add(v,"hidden");a=this._mediaPtr;0===a?y.add(c,"hidden"):y.remove(c,"hidden");a===f-1?y.add(v,"hidden"):y.remove(v,"hidden");this._destroyFrame()},_displayMedia:function(){var a=this._mediaInfos[this._mediaPtr],f=a.title,e=a.caption,c=b.query(".mediaSection .hzLine",this.domNode)[0];h.set(this._mediaTitle,"innerHTML",f);y[f?"remove":"add"](this._mediaTitle,"hidden");h.set(this._mediaCaption,"innerHTML",e);y[e?"remove":"add"](this._mediaCaption,"hidden");y[f&&
e?"remove":"add"](c,"hidden");this._rid=null;if("image"===a.type)this._showImage(a.value);else{var v=this,f=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],e=a.value.theme||this.chartTheme;m.isString(e)&&(e=e.replace(/\./gi,"/"),-1===e.indexOf("/")&&(e="dojox/charting/themes/"+e));e||(e="./Rainbow");f.push(e);try{var q=this._rid=u++;l(f,function(b,e,f){q===v._rid&&(v._rid=null,v._showChart(a.type,a.value,b,e,f))})}catch(k){console.log("PopupRenderer: error loading modules")}}},_preventNewTab:function(a){return(a=
a&&m.trim(a).toLowerCase())&&(0===a.indexOf("mailto:")||0===a.indexOf("tel:"))},_showImage:function(a){y.add(this._mediaFrame,"image");var f=r.get(this._gallery,"height"),e;a.linkURL&&(e=F.create("a",{href:a.linkURL,target:this._preventNewTab(a.linkURL)?"":"_blank"},this._mediaFrame));F.create("img",{className:"esriPopupMediaImage",src:a.sourceURL},e||this._mediaFrame);var c=b.query(".esriPopupMediaImage",this._mediaFrame)[0],v=this,q;q=n.connect(c,"onload",function(){n.disconnect(q);q=null;v._imageLoaded(c,
f)})},_showChart:function(a,b,e,f,v){y.remove(this._mediaFrame,"image");e=this._chart=new e(F.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});v&&e.setTheme(v);switch(a){case "piechart":e.addPlot("default",{type:"Pie",labels:!1});e.addSeries("Series A",b.fields);break;case "linechart":e.addPlot("default",{type:"Markers"});e.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});e.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});d.forEach(b.fields,
function(a,b){a.x=b+1});e.addSeries("Series A",b.fields);break;case "columnchart":e.addPlot("default",{type:"Columns",gap:3});e.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});e.addSeries("Series A",b.fields);break;case "barchart":e.addPlot("default",{type:"Bars",gap:3}),e.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),e.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),e.addSeries("Series A",b.fields)}this._action=new f(e);e.render()},
_destroyFrame:function(){this._rid=null;this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);h.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(a,b){var e=a.height;e<b&&(e=Math.round((b-e)/2),r.set(a,"marginTop",e+"px"))},_attListHandler:function(b,f){if(b===this._dfd){this._dfd=null;var e="";!(f instanceof Error)&&(f&&f.length)&&d.forEach(f,function(b){e+="\x3cli\x3e";e+="\x3ca href\x3d'"+a.addProxy(b.url)+"' target\x3d'_blank'\x3e"+
(b.name||"[No name]")+"\x3c/a\x3e";e+="\x3c/li\x3e"});h.set(this._attachmentsList,"innerHTML",e||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_handleComponentsSuccess:function(a){if(a){var f=this.showTitle?a.title:"",e=a.description,c=a.fields,v=a.mediaInfos,q=this.domNode,k=this._nls,u=this,r=this.template,p=this.graphic;this._prevMedia.title=k.NLS_prevMedia;this._nextMedia.title=k.NLS_nextMedia;h.set(this._title,"innerHTML",f);f||y.add(this._title,"hidden");!a.hasDescription&&c&&(e="",d.forEach(c,
function(a){e+="\x3ctr valign\x3d'top'\x3e";e+="\x3ctd class\x3d'attrName'\x3e"+x.encode(a[0])+"\x3c/td\x3e";e+="\x3ctd class\x3d'attrValue'\x3e"+a[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"\x3ca target\x3d'_blank' href\x3d'$1' title\x3d'$1'\x3e"+k.NLS_moreInfo+"\x3c/a\x3e")+"\x3c/td\x3e";e+="\x3c/tr\x3e"}),e&&(e="\x3ctable class\x3d'attrTable' cellpadding\x3d'0px' cellspacing\x3d'0px'\x3e"+e+"\x3c/table\x3e"));h.set(this._description,"innerHTML",e);e||y.add(this._description,"hidden");b.query("a",
this._description).forEach(function(a){u._preventNewTab(a.href)?"_blank"===a.target&&h.remove(a,"target"):h.set(a,"target","_blank")});f&&e?b.query(".mainSection .hzLine",q).removeClass("hidden"):f||e?b.query(".mainSection .hzLine",q).addClass("hidden"):b.query(".mainSection",q).addClass("hidden");if(f=this._dfd=r.getAttachments(p))f.addBoth(m.hitch(this,this._attListHandler,f)),h.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+k.NLS_searching+"...\x3c/li\x3e"),b.query(".attachmentsSection",q).removeClass("hidden");
v&&v.length&&(b.query(".mediaSection",q).removeClass("hidden"),w.setSelectable(this._mediaFrame,!1),this._mediaInfos=v,this._mediaPtr=0,this._updateUI(),this._displayMedia());a.editSummary&&(h.set(this._editSummary,"innerHTML",a.editSummary),v&&v.length&&y.remove(this._mediaBreak,"hidden"),y.remove(this._editSummarySection,"hidden"))}},_handleComponentsError:function(a){console.log("PopupRenderer: error loading template",a)}});s("extend-esri")&&m.setObject("dijit._PopupRenderer",g,c);return g})},
"dojox/html/entities":function(){define(["dojo/_base/lang"],function(l){var g=l.getObject("dojox.html.entities",!0),n=function(d,b){var g,p;if(b._encCache&&b._encCache.regexp&&b._encCache.mapper&&b.length==b._encCache.length)g=b._encCache.mapper,p=b._encCache.regexp;else{g={};p=["["];var m;for(m=0;m<b.length;m++)g[b[m][0]]="\x26"+b[m][1]+";",p.push(b[m][0]);p.push("]");p=RegExp(p.join(""),"g");b._encCache={mapper:g,regexp:p,length:b.length}}return d=d.replace(p,function(b){return g[b]})},m=function(d,
b){var g,p;if(b._decCache&&b._decCache.regexp&&b._decCache.mapper&&b.length==b._decCache.length)g=b._decCache.mapper,p=b._decCache.regexp;else{g={};p=["("];var m;for(m=0;m<b.length;m++){var h="\x26"+b[m][1]+";";m&&p.push("|");g[h]=b[m][0];p.push(h)}p.push(")");p=RegExp(p.join(""),"g");b._decCache={mapper:g,regexp:p,length:b.length}}return d=d.replace(p,function(b){return g[b]})};g.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];g.latin=[["\u00a1","iexcl"],["\u00a2",
"cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],
["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],
["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1",
"ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],
["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],
["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],
["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],
["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665",
"hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039",
"lsaquo"],["\u203a","rsaquo"]];g.encode=function(d,b){d&&(b?d=n(d,b):(d=n(d,g.html),d=n(d,g.latin)));return d};g.decode=function(d,b){d&&(b?d=m(d,b):(d=m(d,g.html),d=m(d,g.latin)));return d};return g})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(l,g,n,m,d,b,s,p,w,h,y,F,r){function x(){}
function A(b){return function(c,a,f,k){return c&&"string"==typeof a&&c[a]==x?c.on(a.substring(2).toLowerCase(),s.hitch(f,k)):b.apply(n,arguments)}}l.around(n,"connect",A);b.connect&&l.around(b,"connect",A);l=m("dijit._Widget",[y,F,r],{onClick:x,onDblClick:x,onKeyDown:x,onKeyPress:x,onKeyUp:x,onMouseDown:x,onMouseMove:x,onMouseOut:x,onMouseOver:x,onMouseLeave:x,onMouseEnter:x,onMouseUp:x,constructor:function(b){this._toConnect={};for(var c in b)this[c]===x&&(this._toConnect[c.replace(/^on/,"").toLowerCase()]=
b[c],delete b[c])},postCreate:function(){this.inherited(arguments);for(var b in this._toConnect)this.on(b,this._toConnect[b]);delete this._toConnect},on:function(b,c){return this[this._onMap(b)]===x?n.connect(this.domNode,b.toLowerCase(),this,c):this.inherited(arguments)},_setFocusedAttr:function(b){this._focused=b;this._set("focused",b)},setAttribute:function(h,c){b.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(h,c)},attr:function(b,
c){return 2<=arguments.length||"object"===typeof b?this.set.apply(this,arguments):this.get(b)},getDescendants:function(){b.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?p("[widgetId]",this.containerNode).map(h.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});d("dijit-legacy-requires")&&w(0,function(){require(["dijit/_base"])});return l})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(l,g,n,m,d,b,s,p,w,h,y,F,r,x,A,I,c,a,f,k,u,t,z){function e(a){return function(b){p[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}r.add("dijit-legacy-requires",!x.isAsync);r.add("dojo-bidi",!1);r("dijit-legacy-requires")&&c(0,function(){l(["dijit/_base/manager"])});var B={};m=b("dijit._WidgetBase",[a,u],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:e("lang"),dir:"",_setDirAttr:e("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:m.blankGif||l.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,f=a._setterAttrs=[],a=a._onMap={},e;for(e in b.attributeMap)f.push(e);for(e in b)/^on/.test(e)&&(a[e.substring(2).toLowerCase()]=e),/^_set[A-Z](.*)Attr$/.test(e)&&(e=e.charAt(4).toLowerCase()+
e.substr(5,e.length-9),(!b.attributeMap||!(e in b.attributeMap))&&f.push(e))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();this.srcNodeRef=s.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&(this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id)&&(this.id=this.srcNodeRef.id);a&&(this.params=a,A.mixin(this,a));this.postMixInProperties();this.id||(this.id=z.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);
this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=k.body(this.ownerDocument);z.add(this);this.buildRendering();var e;if(this.domNode){this._applyAttributes();var f=this.srcNodeRef;f&&(f.parentNode&&this.domNode!==f)&&(f.parentNode.replaceChild(this.domNode,f),e=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();e&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||
{})a[b]=this._get(b);g.forEach(this.constructor._setterAttrs,function(b){if(!(b in a)){var e=this._get(b);e&&this.set(b,e)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(g.map(a,function(a){return a+"Rtl"})));w.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||
(this._started=!0,g.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&A.isFunction(a.startup))&&(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(e){e.destroyRecursive?e.destroyRecursive(a):e.destroy&&e.destroy(a)}this._beingDestroyed=!0;this.uninitialize();g.forEach(this._connects,A.hitch(this,"disconnect"));g.forEach(this._supportingWidgets,b);this.domNode&&g.forEach(z.findWidgets(this.domNode,
this.containerNode),b);this.destroyRendering(a);z.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?p.remove(this.domNode,"widgetId"):h.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||h.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){g.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=
this.domNode;A.isObject(a)?F.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,e){e=3<=arguments.length?e:this.attributeMap[a];g.forEach(A.isArray(e)?e:[e],function(e){var f=this[e.node||e||"domNode"];switch(e.type||"attribute"){case "attribute":A.isFunction(b)&&(b=A.hitch(this,b));e=e.attribute?e.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;f.tagName?p.set(f,e,b):f.set(e,b);break;case "innerText":f.innerHTML="";f.appendChild(this.ownerDocument.createTextNode(b));
break;case "innerHTML":f.innerHTML=b;break;case "class":w.replace(f,b,this[a]);break;case "toggleClass":w.toggle(f,e.className||a,b)}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var e in a)this.set(e,a[e]);return this}e=this._getAttrNames(a);var f=this[e.s];if(A.isFunction(f))var c=f.apply(this,Array.prototype.slice.call(arguments,1));else{var f=this.focusNode&&!A.isFunction(this.focusNode)?"focusNode":
"domNode",k=this[f]&&this[f].tagName,t;if(t=k)if(!(t=B[k])){t=this[f];var h={},d;for(d in t)h[d.toLowerCase()]=!0;t=B[k]=h}d=t;e=a in this.attributeMap?this.attributeMap[a]:e.s in this?this[e.s]:d&&e.l in d&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?f:null;null!=e&&this._attrToDom(a,b,e);this._set(a,b)}return c||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var e=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});
return b[a]={n:a+"Node",s:"_set"+e+"Attr",g:"_get"+e+"Attr",l:e.toLowerCase()}},_set:function(a,b){var e=this[a];this[a]=b;if(this._created&&!(e===b||e!==e&&b!==b))this._watchCallbacks&&this._watchCallbacks(a,e,b),this.emit("attrmodified-"+a,{detail:{prevValue:e,newValue:b}})},_get:function(a){return this[a]},emit:function(a,b,e){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var f,c=this["on"+a];c&&(f=c.apply(this,
e?e:[b]));this._started&&!this._beingDestroyed&&I.emit(this.domNode,a.toLowerCase(),b);return f},on:function(a,b){var e=this._onMap(a);return e?n.after(this,e,b,!0):this.own(I(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,e=b._onMap;if(!e){var e=b._onMap={},f;for(f in b.prototype)/^on/.test(f)&&(e[f.replace(/^on/,"").toLowerCase()]=f)}return e["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?
z.findWidgets(this.containerNode):[]},getParent:function(){return z.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,e){return this.own(d.connect(a,b,this,e))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(f.subscribe(a,A.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():y.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=F.get(this.domNode,"display")},
placeAt:function(a,b){var e=!a.tagName&&z.byId(a);e&&e.addChild&&(!b||"number"===typeof b)?e.addChild(this,b):(e=e&&"domNode"in e?e.containerNode&&!/after|before|replace/.test(b||"")?e.containerNode:e.domNode:s.byId(a,this.ownerDocument),h.place(this.domNode,e,b),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(a,b){var e=setTimeout(A.hitch(this,function(){e&&(e=null,this._destroyed||A.hitch(this,a)())}),b||0);return{remove:function(){e&&(clearTimeout(e),
e=null);return null}}}});r("dojo-bidi")&&m.extend(t);return m})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(l,g,n){return n("dijit.Destroyable",null,{destroy:function(g){this._destroyed=!0},own:function(){var m=["destroyRecursive","destroy","remove"];l.forEach(arguments,function(d){function b(){p.remove();l.forEach(w,function(b){b.remove()})}var n,p=g.before(this,"destroy",function(b){d[n](b)}),w=[];d.then?(n="cancel",d.then(b,b)):l.forEach(m,
function(h){"function"===typeof d[h]&&(n||(n=h),w.push(g.after(d,h,b,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(l,g,n,m,d,b){l=m("dijit._OnDijitClickMixin",null,{connect:function(d,p,g){return this.inherited(arguments,[d,"ondijitclick"==p?b:p,g])}});l.a11yclick=b;return l})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],
function(l,g,n,m){m.extend(g,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return n("dijit._FocusMixin",null,{_focusManager:l})})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(l,g,n,m){n(function(){g("highcontrast")&&l.add(m.body(),"dijit_a11y")});return g})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),
function(l,g,n,m,d,b,s){d.add("highcontrast",function(){var b=s.doc.createElement("div");try{b.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(g.blankGif||l.toUrl("./resources/blank.gif"))+'");';s.body().appendChild(b);var n=m.getComputedStyle(b),h=n.backgroundImage;return n.borderTopColor==n.borderRightColor||h&&("none"==h||"url(invalid-url:)"==h)}catch(y){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+
y.toString()),!1}finally{8>=d("ie")?b.outerHTML="":s.body().removeChild(b)}});b(function(){d("highcontrast")&&n.add(s.body(),"dj_a11y")});return d})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),function(l,g,n,m,d,b,s){b.extend(l,{waiRole:"",waiState:""});return d("dijit._Templated",[g,n],{constructor:function(){s.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin",
"","2.0")},_processNode:function(b,d){var h=this.inherited(arguments),g=d(b,"waiRole");g&&b.setAttribute("role",g);(g=d(b,"waiState"))&&m.forEach(g.split(/\s*,\s*/),function(d){-1!=d.indexOf("-")&&(d=d.split("-"),b.setAttribute("aria-"+d[0],d[1]))});return h}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(l,g,n,m,d,b,s,p){var w=g("dijit._TemplatedMixin",p,{templateString:null,
templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(b){var d=this.declaredClass,g=this;return s.substitute(b,this,function(b,h){"!"==h.charAt(0)&&(b=m.getObject(h.substr(1),!1,g));if("undefined"==typeof b)throw Error(d+" template:"+h);return null==b?"":"!"==h.charAt(0)?b:this._escapeValue(""+b)},this)},_escapeValue:function(b){return b.replace(/["'<>&]/g,function(b){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[b]})},buildRendering:function(){if(!this._rendered){this.templateString||
(this.templateString=l(this.templatePath,{sanitize:!0}));var b=w.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),d;if(m.isString(b)){if(d=n.toDom(this._stringRepl(b),this.ownerDocument),1!=d.nodeType)throw Error("Invalid template: "+b);}else d=b.cloneNode(!0);this.domNode=d}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(b){var d=this.containerNode;if(b&&d)for(;b.hasChildNodes();)d.appendChild(b.firstChild)}});
w._templateCache={};w.getCachedTemplate=function(b,d,g){var r=w._templateCache,p=b,m=r[p];if(m){try{if(!m.ownerDocument||m.ownerDocument==(g||document))return m}catch(l){}n.destroy(m)}b=s.trim(b);if(d||b.match(/\$\{([^\}]+)\}/g))return r[p]=b;d=n.toDom(b,g);if(1!=d.nodeType)throw Error("Invalid template: "+b);return r[p]=d};b("ie")&&d(window,"unload",function(){var b=w._templateCache,d;for(d in b){var g=b[d];"object"==typeof g&&n.destroy(g);delete b[d]}});return w})},"dojo/cache":function(){define(["./_base/kernel",
"./text"],function(l){return l.cache})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(l,g,n,m,d,b,s,p,w){var h=d.delegate(p,{mouseenter:b.enter,mouseleave:b.leave,keypress:n._keypress}),y;n=m("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);
this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(b){for(var d=b;;)if(1==d.nodeType&&(this._processTemplateNode(d,function(b,d){return b.getAttribute(d)},this._attach)||this.searchContainerNode)&&d.firstChild)d=d.firstChild;else{if(d==b)break;for(;!d.nextSibling;)if(d=d.parentNode,d==b)return;d=d.nextSibling}},_processTemplateNode:function(b,g,h){var p=!0,m=this.attachScope||this,c=g(b,"dojoAttachPoint")||g(b,"data-dojo-attach-point");if(c)for(var a=c.split(/\s*,\s*/);c=
a.shift();)d.isArray(m[c])?m[c].push(b):m[c]=b,p="containerNode"!=c,this._attachPoints.push(c);if(g=g(b,"dojoAttachEvent")||g(b,"data-dojo-attach-event")){c=g.split(/\s*,\s*/);for(a=d.trim;g=c.shift();)if(g){var f=null;-1!=g.indexOf(":")?(f=g.split(":"),g=a(f[0]),f=a(f[1])):g=a(g);f||(f=g);this._attachEvents.push(h(b,g,d.hitch(m,f)))}}return p},_attach:function(b,d,g){d=d.replace(/^on/,"").toLowerCase();d="dijitclick"==d?y||(y=l("./a11yclick")):h[d]||d;return s(b,d,g)},_detachTemplateNodes:function(){var b=
this.attachScope||this;g.forEach(this._attachPoints,function(d){delete b[d]});this._attachPoints=[];g.forEach(this._attachEvents,function(b){b.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});d.extend(w,{dojoAttachEvent:"",dojoAttachPoint:""});return n})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(l,g,n,m,d){return n("dijit._WidgetsInTemplateMixin",
null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var b=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);d.parse(b,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(m.hitch(this,function(b){this._startupWidgets=b;for(var d=0;d<b.length;d++)this._processTemplateNode(b[d],
function(b,d){return b[d]},function(b,d,g){return d in b?b.connect(b,d,g):b.on(d,g,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(b,d,g){return d(b,"dojoType")||d(b,"data-dojo-type")?
!0:this.inherited(arguments)},startup:function(){l.forEach(this._startupWidgets,function(b){b&&(!b._started&&b.startup)&&b.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(l,g,n,m,d,b,s,p,w,h,y,F,r,x,A,I){function c(a){return eval("("+a+")")}function a(a){var b=
a._nameCaseMap,e=a.prototype;if(!b||b._extendCnt<k){var b=a._nameCaseMap={},f;for(f in e)"_"!==f.charAt(0)&&(b[f.toLowerCase()]=f);b._extendCnt=k}return b}function f(a,b){b||(b=l);var e=b._dojoParserCtorMap||(b._dojoParserCtorMap={}),f=a.join();if(!e[f]){for(var c=[],d=0,k=a.length;d<k;d++){var g=a[d];c[c.length]=e[g]=e[g]||n.getObject(g)||~g.indexOf("/")&&b(g)}d=c.shift();e[f]=c.length?d.createSubclass?d.createSubclass(c):d.extend.apply(d,c):d}return e[f]}new Date("X");var k=0;w.after(n,"extend",
function(){k++},!0);var u={_clearCache:function(){k++;_ctorMap={}},_functionFromScript:function(a,b){var e="",f="",c=a.getAttribute(b+"args")||a.getAttribute("args"),d=a.getAttribute("with"),c=(c||"").split(/\s*,\s*/);d&&d.length&&m.forEach(d.split(/\s*,\s*/),function(a){e+="with("+a+"){";f+="}"});return new Function(c,e+a.innerHTML+f)},instantiate:function(a,b,e){b=b||{};e=e||{};var f=(e.scope||g._scopeName)+"Type",c="data-"+(e.scope||g._scopeName)+"-",d=c+"type",k=c+"mixins",h=[];m.forEach(a,function(a){var e=
f in b?b[f]:a.getAttribute(d)||a.getAttribute(f);if(e){var c=a.getAttribute(k),e=c?[e].concat(c.split(/\s*,\s*/)):[e];h.push({node:a,types:e})}});return this._instantiate(h,b,e)},_instantiate:function(a,b,e,c){function d(a){!b._started&&!e.noStart&&m.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a}a=m.map(a,function(a){var c=a.ctor||f(a.types,e.contextRequire);if(!c)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(c,
a.node,b,e,a.scripts,a.inherited)},this);return c?h(a).then(d):d(a)},construct:function(b,f,e,d,k,q){function h(a){F&&n.setObject(F,a);for(D=0;D<K.length;D++)w[K[D].advice||"after"](a,K[D].method,n.hitch(a,K[D].func),!0);for(D=0;D<P.length;D++)P[D].call(a);for(D=0;D<N.length;D++)a.watch(N[D].prop,N[D].func);for(D=0;D<O.length;D++)A(a,O[D].event,O[D].func);return a}var u=b&&b.prototype;d=d||{};var l={};d.defaults&&n.mixin(l,d.defaults);q&&n.mixin(l,q);var s;r("dom-attributes-explicit")?s=f.attributes:
r("dom-attributes-specified-flag")?s=m.filter(f.attributes,function(a){return a.specified}):(q=(/^input$|^img$/i.test(f.nodeName)?f:f.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),s=m.map(q.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==f.nodeName&&"value"==a||"enctype"==b?f.getAttribute(b):f.getAttributeNode(b).value}}));var L=d.scope||g._scopeName;q="data-"+L+"-";var C={};"dojo"!==L&&(C[q+"props"]=
"data-dojo-props",C[q+"type"]="data-dojo-type",C[q+"mixins"]="data-dojo-mixins",C[L+"type"]="dojotype",C[q+"id"]="data-dojo-id");for(var D=0,E,L=[],F,J;E=s[D++];){var H=E.name,M=H.toLowerCase();E=E.value;switch(C[M]||M){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":J=E;break;case "data-dojo-id":case "jsid":F=E;break;case "data-dojo-attach-point":case "dojoattachpoint":l.dojoAttachPoint=E;break;case "data-dojo-attach-event":case "dojoattachevent":l.dojoAttachEvent=
E;break;case "class":l["class"]=f.className;break;case "style":l.style=f.style&&f.style.cssText;break;default:if(H in u||(H=a(b)[M]||H),H in u)switch(typeof u[H]){case "string":l[H]=E;break;case "number":l[H]=E.length?Number(E):NaN;break;case "boolean":l[H]="false"!=E.toLowerCase();break;case "function":""===E||-1!=E.search(/[^\w\.]+/i)?l[H]=new Function(E):l[H]=n.getObject(E,!1)||new Function(E);L.push(H);break;default:M=u[H],l[H]=M&&"length"in M?E?E.split(/\s*,\s*/):[]:M instanceof Date?""==E?new Date(""):
"now"==E?new Date:y.fromISOString(E):M instanceof p?g.baseUrl+E:c(E)}else l[H]=E}}for(s=0;s<L.length;s++)C=L[s].toLowerCase(),f.removeAttribute(C),f[C]=null;if(J)try{J=c.call(d.propsThis,"{"+J+"}"),n.mixin(l,J)}catch(I){throw Error(I.toString()+" in data-dojo-props\x3d'"+J+"'");}n.mixin(l,e);k||(k=b&&(b._noScript||u._noScript)?[]:x("\x3e script[type^\x3d'dojo/']",f));var K=[],P=[],N=[],O=[];if(k)for(D=0;D<k.length;D++)C=k[D],f.removeChild(C),e=C.getAttribute(q+"event")||C.getAttribute("event"),d=
C.getAttribute(q+"prop"),J=C.getAttribute(q+"method"),L=C.getAttribute(q+"advice"),s=C.getAttribute("type"),C=this._functionFromScript(C,q),e?"dojo/connect"==s?K.push({method:e,func:C}):"dojo/on"==s?O.push({event:e,func:C}):l[e]=C:"dojo/aspect"==s?K.push({method:J,advice:L,func:C}):"dojo/watch"==s?N.push({prop:d,func:C}):P.push(C);b=(k=b.markupFactory||u.markupFactory)?k(l,f,b):new b(l,f);return b.then?b.then(h):h(b)},scan:function(a,b){function e(a){if(!a.inherited){a.inherited={};var b=a.node,f=
e(a.parent),b={dir:b.getAttribute("dir")||f.dir,lang:b.getAttribute("lang")||f.lang,textDir:b.getAttribute(n)||f.textDir},c;for(c in b)b[c]&&(a.inherited[c]=b[c])}return a.inherited}var c=[],d=[],k={},h=(b.scope||g._scopeName)+"Type",u="data-"+(b.scope||g._scopeName)+"-",p=u+"type",n=u+"textdir",u=u+"mixins",s=a.firstChild,w=b.inherited;if(!w){var y=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&y(a.parentNode,b)},w={dir:y(a,"dir"),lang:y(a,"lang"),textDir:y(a,n)},x;for(x in w)w[x]||
delete w[x]}for(var w={inherited:w},A,J;;)if(s)if(1!=s.nodeType)s=s.nextSibling;else if(A&&"script"==s.nodeName.toLowerCase())(H=s.getAttribute("type"))&&/^dojo\/\w/i.test(H)&&A.push(s),s=s.nextSibling;else if(J)s=s.nextSibling;else{var H=s.getAttribute(p)||s.getAttribute(h);x=s.firstChild;if(!H&&(!x||3==x.nodeType&&!x.nextSibling))s=s.nextSibling;else{J=null;if(H){var I=s.getAttribute(u);A=I?[H].concat(I.split(/\s*,\s*/)):[H];try{J=f(A,b.contextRequire)}catch(Q){}J||m.forEach(A,function(a){~a.indexOf("/")&&
!k[a]&&(k[a]=!0,d[d.length]=a)});I=J&&!J.prototype._noScript?[]:null;w={types:A,ctor:J,parent:w,node:s,scripts:I};w.inherited=e(w);c.push(w)}else w={node:s,scripts:A,parent:w};A=I;J=s.stopParser||J&&J.prototype.stopParser&&!b.template;s=x}}else{if(!w||!w.node)break;s=w.node.nextSibling;J=!1;w=w.parent;A=w.scripts}var K=new F;d.length?(r("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+d.join(", ")),(b.contextRequire||l)(d,function(){K.resolve(m.filter(c,function(a){if(!a.ctor)try{a.ctor=
f(a.types,b.contextRequire)}catch(e){}for(var c=a.parent;c&&!c.types;)c=c.parent;var d=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(d&&d.stopParser&&!b.template);a.instantiate=!c||c.instantiate&&c.instantiateChildren;return a.instantiate}))})):K.resolve(c);return K.promise},_require:function(a,b){var e=c("{"+a.innerHTML+"}"),f=[],d=[],k=new F,g=b&&b.contextRequire||l,u;for(u in e)f.push(u),d.push(e[u]);g(d,function(){for(var a=0;a<f.length;a++)n.setObject(f[a],arguments[a]);k.resolve(arguments)});
return k.promise},_scanAmd:function(a,b){var e=new F,f=e.promise;e.resolve(!0);var c=this;x("script[type\x3d'dojo/require']",a).forEach(function(a){f=f.then(function(){return c._require(a,b)});a.parentNode.removeChild(a)});return f},parse:function(a,f){var e;!f&&a&&a.rootNode?(f=a,e=f.rootNode):a&&n.isObject(a)&&!("nodeType"in a)?f=a:e=a;e=e?b.byId(e):s.body();f=f||{};var c=f.template?{template:!0}:{},d=[],k=this,g=this._scanAmd(e,f).then(function(){return k.scan(e,f)}).then(function(a){return k._instantiate(a,
c,f,!0)}).then(function(a){return d=d.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});n.mixin(d,g);return d}};g.parser=u;d.parseOnLoad&&I(100,u,"parse");return u})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(l,g){var n={};l.setObject("dojo.date.stamp",n);n.fromISOString=function(m,d){n._isoRegExp||(n._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);
var b=n._isoRegExp.exec(m),s=null;if(b){b.shift();b[1]&&b[1]--;b[6]&&(b[6]*=1E3);d&&(d=new Date(d),g.forEach(g.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(b){return d["get"+b]()}),function(d,g){b[g]=b[g]||d}));s=new Date(b[0]||1970,b[1]||0,b[2]||1,b[3]||0,b[4]||0,b[5]||0,b[6]||0);100>b[0]&&s.setFullYear(b[0]||1970);var p=0,l=b[7]&&b[7].charAt(0);"Z"!=l&&(p=60*(b[8]||0)+(Number(b[9])||0),"-"!=l&&(p*=-1));l&&(p-=s.getTimezoneOffset());p&&s.setTime(s.getTime()+6E4*
p)}return s};n.toISOString=function(g,d){var b=function(b){return 10>b?"0"+b:b};d=d||{};var s=[],p=d.zulu?"getUTC":"get",l="";"time"!=d.selector&&(l=g[p+"FullYear"](),l=["0000".substr((l+"").length)+l,b(g[p+"Month"]()+1),b(g[p+"Date"]())].join("-"));s.push(l);if("date"!=d.selector){l=[b(g[p+"Hours"]()),b(g[p+"Minutes"]()),b(g[p+"Seconds"]())].join(":");p=g[p+"Milliseconds"]();d.milliseconds&&(l+="."+(100>p?"0":"")+b(p));if(d.zulu)l+="Z";else if("time"!=d.selector)var p=g.getTimezoneOffset(),h=Math.abs(p),
l=l+((0<p?"-":"+")+b(Math.floor(h/60))+":"+b(h%60));s.push(l)}return s.join("T")};return n})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(l,g,n,m,d,b){return l([b,d],{_onMap:function(b){var d=this.constructor._onMap,g;if(!d||!d.FINAL)delete this.constructor._onMap,d=this.registerConnectEvents(),d.FINAL=!0;b=b.toLowerCase();d[b]?g=this[d[b].method]:(b=this._onCamelCase(b),this[b]&&(g=b));return g},
on:function(b,d){var g=this._onMap(b),h=b.replace(/\-/g,""),l="on"+h in this.domNode;return g||!l?this.inherited(arguments):this.own(m(this.domNode,h,d))[0]},emit:function(b,d,l){var h,m,n,r=b.toLowerCase(),x=this.constructor._onMap||this.registerConnectEvents();m=this[this._onMap(r)];d=d||{};d.target||(d.target=this);m&&(x&&x[r])&&(this._onObj2Arr(function(){h=Array.prototype.slice.call(arguments)},x[r].argKeys)(d),n=g.mixin({},arguments),n[2]=h,n[0]=x[r].name.replace(/^on/,""));return this.inherited(n||
arguments)}})})},"esri/layers/WMSLayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../kernel"],function(l,g,n,m,d){l=l(null,{declaredClass:"esri.layers.WMSLayerInfo",name:null,title:null,description:null,extent:null,legendURL:null,subLayers:[],allExtents:[],spatialReferences:[],queryable:!1,showPopup:!1,constructor:function(b){b&&(this.name=b.name,this.title=b.title,this.description=b.description,this.extent=b.extent,this.legendURL=b.legendURL,this.subLayers=
b.subLayers?b.subLayers:[],this.allExtents=b.allExtents?b.allExtents:[],this.spatialReferences=b.spatialReferences?b.spatialReferences:[],this.queryable=!!b.queryable,this.showPopup=!!b.showPopup)},clone:function(){var b={name:this.name,title:this.title,description:this.description,legendURL:this.legendURL},d;this.extent&&(b.extent=this.extent.getExtent());b.subLayers=[];n.forEach(this.subLayers,function(d){b.subLayers.push(d.clone())});b.allExtents=[];for(d in this.allExtents)d=parseInt(d,10),isNaN(d)||
(b.allExtents[d]=this.allExtents[d].getExtent());b.spatialReferences=[];n.forEach(this.spatialReferences,function(d){b.spatialReferences.push(d)});b.queryable=this.queryable;b.showPopup=this.showPopup;return b}});m("extend-esri")&&g.setObject("layers.WMSLayerInfo",l,d);return l})},"*noref":1}});
define("esri/layers/WMSLayer","require dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/sniff ../config ../graphic ../kernel ../request ../urlUtils ../dijit/PopupTemplate ../SpatialReference ../geometry/Extent ../geometry/Point ./DynamicMapServiceLayer ./WMSLayerInfo dojo/query".split(" "),function(l,g,n,m,d,b,s,p,w,h,y,F,r,x,A,I,c){n=n([I],{declaredClass:"esri.layers.WMSLayer",_CRS_TO_EPSG:{84:4326,83:4269,27:4267},_REVERSED_LAT_LONG_RANGES:[[4001,4999],[2044,2045],[2081,
2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,
27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],_WEB_MERCATOR:[102100,3857,102113,900913],_WORLD_MERCATOR:[3395,54004],allExtents:[],version:null,constructor:function(a,b){var d=y.urlToObject(a);if(d.query&&(d.query.version||d.query.Version||d.query.VERSION))this.version=d.query.version||d.query.Version||d.query.VERSION;this.url=a=this._stripParameters(a,"version service request bbox format height width layers srs crs styles transparent bgcolor exceptions time elevation sld wfs".split(" "));
this._url=y.urlToObject(a);this._getCapabilitiesURL=a;this._initLayer=m.hitch(this,this._initLayer);this._parseCapabilities=m.hitch(this,this._parseCapabilities);this._getCapabilitiesError=m.hitch(this,this._getCapabilitiesError);b?(this.imageFormat=this._getImageFormat(b.format),this.imageTransparency=!1!==b.transparent,this.visibleLayers=b.visibleLayers?b.visibleLayers:[],this.version=b.version||this.version,b.resourceInfo?this._readResourceInfo(b.resourceInfo):this._getCapabilities()):(this.imageFormat=
"image/png",this.imageTransparency=!0,this.visibleLayers=[],this._getCapabilities());this._blankImageURL=l.toUrl("../images/pixel.png");this.extentProcessor=this._createExtentProcessor(0);this._createChildLayer()},setVisibleLayers:function(a){this.visibleLayers=(a=this._checkVisibleLayersList(a))?a:[];this.refresh(!0)},setImageFormat:function(a){this.imageFormat=this._getImageFormat(a);this.refresh(!0)},setImageTransparency:function(a){this.imageTransparency=a;this.refresh(!0)},refresh:function(){this.inherited(arguments);
this._childLayer&&this._childLayer.refresh.apply(this._childLayer,arguments)},getImageUrl:function(a,b,d,c){if(!this.visibleLayers||0===this.visibleLayers.length)c(this._blankImageURL);else{a=this._getImageParams(a,b,d);b=this.getMapURL;var g;b+=-1===b.indexOf("?")?"?":"";for(g in a)a.hasOwnProperty(g)&&(b+="?"===b.substring(b.length-1,b.length)?"":"\x26",b+=g+"\x3d"+a[g]);c(y.addProxy(b))}},_setMap:function(a,b,d){var c=this.inherited(arguments);a.wrapAround180?this._childLayer&&(this.suspended&&
this._childLayer.suspend(),this._childLayer._setMap(a,c)):this._childLayer=this.extentProcessor=null;return c},_unsetMap:function(a,b){this._childLayer&&this._childLayer._unsetMap(a,this._div);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._childLayer&&this._childLayer.suspend()},onResume:function(){this.inherited(arguments);this._childLayer&&this._childLayer.resume()},_createChildLayer:function(){this._childLayer=new I(null,{extentProcessor:this._createExtentProcessor(1)});
this._childLayer._isChildLayer=!0;this._childLayer.getImageUrl=m.hitch(this,this.getImageUrl);this._childLayer.loaded=!0},_createExtentProcessor:function(a){return m.hitch(this,this._extentProcessor,a)},_extentProcessor:function(a,b){var d=b.extent,c=b.width,g=0;if(d){var h=d.getWidth()/c,e=d.bisect(),d=e.extents,l=d[a];l&&(c=e.marginLeft/h,g=0===a?c:c+d[0].getWidth()/h,c=Math.ceil(l.getWidth()/h),g=Math.ceil(g));d=l}return{extent:d,width:c,marginLeft:g}},_getImageParams:function(a,b,c){var g=a.spatialReference.wkid;
-1===d.indexOf(this.spatialReferences,g)&&a.spatialReference.latestWkid&&(g=a.spatialReference.latestWkid);if(d.some(this._WEB_MERCATOR,function(a){return a==g})){var h=d.filter(this.spatialReferences,function(a){return d.some(this._WEB_MERCATOR,function(b){return b==a})},this);0===h.length&&(h=d.filter(this.spatialReferences,function(a){return d.some(this._WORLD_MERCATOR,function(b){return b==a})},this));g=0<h.length?h[0]:this._WEB_MERCATOR[0]}this.spatialReferences=d.filter(this.spatialReferences,
function(a){return a!==g});this.spatialReferences.unshift(g);var h=a.xmin,l=a.xmax,e=a.ymin;a=a.ymax;var m={SERVICE:"WMS",REQUEST:"GetMap"};m.FORMAT=this.imageFormat;m.TRANSPARENT=this.imageTransparency?"TRUE":"FALSE";m.STYLES="";m.VERSION=this.version;m.LAYERS=this.visibleLayers?this.visibleLayers.toString():null;m.WIDTH=b;m.HEIGHT=c;this.maxWidth<b&&(m.WIDTH=this.maxWidth);this.maxHeight<c&&(m.HEIGHT=this.maxHeight);b=g?g:NaN;isNaN(b)||("1.3.0"==this.version?m.CRS="EPSG:"+b:m.SRS="EPSG:"+b);"1.3.0"==
this.version&&this._useLatLong(b)?m.BBOX=e+","+h+","+a+","+l:m.BBOX=h+","+e+","+l+","+a;return m},_initLayer:function(a,d){this.spatialReference=new r(this.extent.spatialReference);this.initialExtent=new x(this.extent);this.fullExtent=new x(this.extent);this.visibleLayers=this._checkVisibleLayersList(this.visibleLayers);var c=m.hitch(this,function(){this.loaded=!0;this.onLoad(this);var a=this._loadCallback;a&&(delete this._loadCallback,a(this))});if(b("chrome")){var g=s.defaults.io,l="with-credentials"===
g.useCors?y.canUseXhr(this.getMapURL,!0):-1;(g=-1<l?g.corsEnabledServers[l]:null)&&g.withCredentials?h({url:this.getMapURL,handleAs:"text",content:{SERVICE:"WMS",REQUEST:"GetMap"}}).addBoth(function(){c()}):c()}else c()},_readResourceInfo:function(a){a.extent?a.layerInfos?(this.extent=a.extent,this.allExtents[0]=a.extent,this.layerInfos=a.layerInfos,this.description=a.description?a.description:"",this.copyright=a.copyright?a.copyright:"",this.title=a.title?a.title:"",this.getMapURL=a.getMapURL?a.getMapURL:
this._getCapabilitiesURL,this.getFeatureInfoURL=a.getFeatureInfoURL,this.featureInfoFormat=a.featureInfoFormat,this.version=a.version?a.version:"1.3.0",this.maxWidth=a.maxWidth?a.maxWidth:5E3,this.maxHeight=a.maxHeight?a.maxHeight:5E3,this.spatialReferences=a.spatialReferences?a.spatialReferences:[],this.imageFormat=this._getImageFormat(a.format),this.setScaleRange(a.minScale,a.maxScale),this._initLayer()):this._errorHandler(Error("esri.layers.WMSLayer: unable to find the 'layerInfos' property in resourceInfo")):
this._errorHandler(Error("esri.layers.WMSLayer: Unable to find the 'extent' property in resourceInfo."))},_getCapabilities:function(){var a=this._url.query?this._url.query:{};a.SERVICE="WMS";a.REQUEST="GetCapabilities";this.version&&(a.VERSION=this.version);var b=this._url.path+"?",d;for(d in a)a.hasOwnProperty(d)&&(b+="?"==b.substring(b.length-1,b.length)?"":"\x26",b+=d+"\x3d"+a[d]);h({url:b,handleAs:"xml",headers:{"Content-Type":null},load:this._parseCapabilities,error:this._getCapabilitiesError},
{usePost:!1})},_parseCapabilities:function(a){if(a){var b=this;this.version=this._getAttributeValue("WMS_Capabilities","version",a,null);this.version||(this.version=this._getAttributeValue("WMT_MS_Capabilities","version",a,"1.3.0"));var c=this._getTag("Service",a);this.title=this._getTagValue("Title",c,"");this.title||(this.title=this._getTagValue("Name",c,""));this.copyright=this._getTagValue("AccessConstraints",c,"");this.description=this._getTagValue("Abstract",c,"");this.maxWidth=parseInt(this._getTagValue("MaxWidth",
c,5E3),10);this.maxHeight=parseInt(this._getTagValue("MaxHeight",c,5E3),10);if(c=this._getTag("Layer",a)){var h=this._getLayerInfo(c),l=0,m=null,c=this._getTag("Capability",a);d.forEach(c.childNodes,function(a){"Layer"==a.nodeName&&(0===l?m=a:(1===l&&h.name&&(h.name="",h.subLayers=[],h.subLayers.push(this._getLayerInfo(m))),h.subLayers.push(this._getLayerInfo(a))),l++)},this);if(h){this.layerInfos=h.subLayers;if(!this.layerInfos||0===this.layerInfos.length)this.layerInfos=[h];this.extent=h.extent;
this.extent||(h.extent=new x(this.layerInfos[0].extent.toJson()),this.extent=h.extent);this.allExtents=h.allExtents;if(!this.allExtents||!this.allExtents.length)h.allExtents=[],d.forEach(this.layerInfos[0].allExtents,function(a,b){a&&(h.allExtents[b]=new x(a.toJson()))}),this.allExtents=h.allExtents;this.spatialReferences=h.spatialReferences;if(!this.spatialReferences.length&&0<this.layerInfos.length)for(var e=function(a){var b;for(b=0;b<a.subLayers.length;b++){var d=a.subLayers[b],c=d.spatialReferences;
!c.length&&(d.subLayers&&0<d.subLayers.length)&&(c=e(d));if(c.length)return c}return[]},c=0;c<this.layerInfos.length;c++){var n=this.layerInfos[c];this.spatialReferences=this.layerInfos[0].spatialReferences;!this.spatialReferences.length&&(n.subLayers&&0<n.subLayers.length)&&(this.spatialReferences=e(n));if(this.spatialReferences.length)break}}c=function(e){if((e=g.query("DCPType",b._getTag(e,a)))&&0<e.length)if((e=g.query("HTTP",e[0]))&&0<e.length)if((e=g.query("Get",e[0]))&&0<e.length)if(e=b._getAttributeValue("OnlineResource",
"xlink:href",e[0],null))return e.indexOf("\x26")===e.length-1&&(e=e.substring(0,e.length-1)),b._stripParameters(e,["service","request"]);return null};n=function(e){var c=[];0===g.query("Operation",a).length?d.forEach(g.query("Format",b._getTag(e,a)),function(a){c.push(a.text?a.text:a.textContent)}):d.forEach(g.query("Operation",a),function(a){a.getAttribute("name")===e&&d.forEach(g.query("Format",a),function(a){c.push(a.text?a.text:a.textContent)})});return c};this.getMapURL=c("GetMap")||this._getCapabilitiesURL;
this.getMapFormats=n("GetMap");d.some(this.getMapFormats,function(a){return-1<a.indexOf(this.imageFormat)},this)||(this.imageFormat=this.getMapFormats[0]);if(this.getFeatureInfoURL=c("GetFeatureInfo"))this.getFeatureInfoFormats=n("GetFeatureInfo"),-1<d.indexOf(this.getFeatureInfoFormats,"text/html")?this.featureInfoFormat="text/html":-1<d.indexOf(this.getFeatureInfoFormats,"text/plain")&&(this.featureInfoFormat="text/plain");if(!this.featureInfoFormat){var p=function(a){if(a&&(a.queryable=!1,a.subLayers))for(var b=
0;b<a.subLayers.length;b++)p(a.subLayers[b])};p(h)}this._initLayer()}else this._errorHandler(Error("esri.layers.WMSLayer: Response does not contain any layers."))}else this._errorHandler(Error("GetCapabilities request for "+this._getCapabilitiesURL+" failed. (Response is null.)"))},_getCapabilitiesError:function(a){a&&a.message&&(a.message="GetCapabilities request for "+this._getCapabilitiesURL+" failed. ("+a.message+")");this._errorHandler(a)},_getLayerInfo:function(a){if(!a)return null;var b=new c;
b.name="";b.title="";b.description="";b.allExtents=[];b.spatialReferences=[];b.queryable="1"===a.getAttribute("queryable");b.subLayers=[];var g=this._getTag("LatLonBoundingBox",a);g&&(b.allExtents[0]=this._getExtent(g,4326));var h=this._getTag("EX_GeographicBoundingBox",a),l;h&&(l=new x(0,0,0,0,new r({wkid:4326})),l.xmin=parseFloat(this._getTagValue("westBoundLongitude",h,0)),l.ymin=parseFloat(this._getTagValue("southBoundLatitude",h,0)),l.xmax=parseFloat(this._getTagValue("eastBoundLongitude",h,
0)),l.ymax=parseFloat(this._getTagValue("northBoundLatitude",h,0)),b.allExtents[0]=l);!g&&!h&&(l=new x(-180,-90,180,90,new r({wkid:4326})),b.allExtents[0]=l);b.extent=b.allExtents[0];var m=-1<d.indexOf(["1.0.0","1.1.0","1.1.1"],this.version)?"SRS":"CRS";d.forEach(a.childNodes,function(a){if("Name"==a.nodeName)b.name=(a.text?a.text:a.textContent)||"";else if("Title"==a.nodeName)b.title=(a.text?a.text:a.textContent)||"";else if("Abstract"==a.nodeName)b.description=(a.text?a.text:a.textContent)||"";
else if("BoundingBox"==a.nodeName){var c=a.getAttribute(m);c&&0===c.indexOf("EPSG:")?(c=parseInt(c.substring(5),10),0!==c&&!isNaN(c)&&(a="1.3.0"==this.version?this._getExtent(a,c,this._useLatLong(c)):this._getExtent(a,c),b.allExtents[c]=a,b.extent||(b.extent=a))):c&&0===c.indexOf("CRS:")?(c=parseInt(c.substring(4),10),0!==c&&!isNaN(c)&&(this._CRS_TO_EPSG[c]&&(c=this._CRS_TO_EPSG[c]),b.allExtents[c]=this._getExtent(a,c))):(c=parseInt(c,10),0!==c&&!isNaN(c)&&(b.allExtents[c]=this._getExtent(a,c)))}else if(a.nodeName==
m)a=(a.text?a.text:a.textContent).split(" "),d.forEach(a,function(a){a=-1<a.indexOf(":")?parseInt(a.split(":")[1],10):parseInt(a,10);0!==a&&!isNaN(a)&&(this._CRS_TO_EPSG[a]&&(a=this._CRS_TO_EPSG[a]),-1==d.indexOf(b.spatialReferences,a)&&b.spatialReferences.push(a))},this);else if("Style"==a.nodeName&&!b.legendURL){if(a=this._getTag("LegendURL",a))if(a=this._getTag("OnlineResource",a))b.legendURL=a.getAttribute("xlink:href")}else"Layer"===a.nodeName&&b.subLayers.push(this._getLayerInfo(a))},this);
b.title=b.title||b.name;return b},_getImageFormat:function(a){switch(a?a.toLowerCase():""){case "jpg":return"image/jpeg";case "bmp":return"image/bmp";case "gif":return"image/gif";case "svg":return"image/svg+xml";default:return"image/png"}},getImageFormat:function(){switch(this.imageFormat?this.imageFormat.toLowerCase():""){case "image/jpeg":return"jpg";case "image/bmp":return"bmp";case "image/gif":return"gif";case "image/svg+xml":return"svg";default:return"png"}},_getExtent:function(a,b,c){var d;
if(a){d=new x;var g=parseFloat(a.getAttribute("minx")),h=parseFloat(a.getAttribute("miny")),e=parseFloat(a.getAttribute("maxx"));a=parseFloat(a.getAttribute("maxy"));c?(d.xmin=isNaN(h)?-1*Number.MAX_VALUE:h,d.ymin=isNaN(g)?-1*Number.MAX_VALUE:g,d.xmax=isNaN(a)?Number.MAX_VALUE:a,d.ymax=isNaN(e)?Number.MAX_VALUE:e):(d.xmin=isNaN(g)?-1*Number.MAX_VALUE:g,d.ymin=isNaN(h)?-1*Number.MAX_VALUE:h,d.xmax=isNaN(e)?Number.MAX_VALUE:e,d.ymax=isNaN(a)?Number.MAX_VALUE:a);d.spatialReference=new r({wkid:b})}return d},
_useLatLong:function(a){var b,c;for(c=0;c<this._REVERSED_LAT_LONG_RANGES.length;c++){var d=this._REVERSED_LAT_LONG_RANGES[c];if(a>=d[0]&&a<=d[1]){b=!0;break}}return b},_getTag:function(a,b){var c=g.query(a,b);return c&&0<c.length?c[0]:null},_getTagValue:function(a,b,c){return(a=g.query(a,b))&&0<a.length?a[0].text?a[0].text:a[0].textContent:c},_getAttributeValue:function(a,b,c,d){return(a=g.query(a,c))&&0<a.length?a[0].getAttribute(b):d},_checkVisibleLayersList:function(a){if(a&&(0<a.length&&this.layerInfos&&
0<this.layerInfos.length)&&"number"==typeof a[0]){var b=[];d.forEach(a,function(a){a<this.layerInfos.length&&b.push(this.layerInfos[a].name)},this);a=b}return a},_stripParameters:function(a,b){var c=y.urlToObject(a),g,h=[];for(g in c.query)c.query.hasOwnProperty(g)&&-1===d.indexOf(b,g.toLowerCase())&&h.push(g+"\x3d"+c.query[g]);return c.path+(h.length?"?"+h.join("\x26"):"")},_getPopupGraphic:function(a,b){var c=this.visibleLayers;if(!c||0===c.length)return null;var g=this._popupGraphic;g||(g=new F({title:this.title||
"",description:'\x3cdiv style\x3d"position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;"\x3e\x3ciframe src\x3d"{QUERY_URL}" width\x3d"250" height\x3d"147" frameborder\x3d"0" marginwidth\x3d"0" marginheight\x3d"0" style\x3d"position:absolute;top:0;left:0;width:100%;height:100%;border:0;background:url(\''+l.toUrl("../dijit/images/loading-throb.gif")+"') transparent center no-repeat;\" onload\x3d\"(event.target || event.srcElement).style.background \x3d 'none';\"\x3e\x3c/iframe\x3e\x3c/div\x3e"}),
g=this._popupGraphic=new p(null,null,{},g),g._layer=this);var h=function(a){var b=[];if(a&&(a.queryable&&(a.showPopup&&a.name)&&b.push(a.name),a.subLayers))for(var c=0;c<a.subLayers.length;c++){var d=h(a.subLayers[c]);d.length&&(b=b.concat(d))}return b},m=h({subLayers:this.layerInfos}),m=d.filter(m,function(a){return-1<d.indexOf(c,a)});if(m.length){var e=this.getFeatureInfoURL,n=this._getImageParams(a.extent,a.width,a.height);n.REQUEST="GetFeatureInfo";n.INFO_FORMAT=this.featureInfoFormat;n.QUERY_LAYERS=
m.join();n.FEATURE_COUNT=25;"1.3.0"===this.version?(n.I=b.x,n.J=b.y):(n.X=b.x,n.Y=b.y);var e=e+(-1===e.indexOf("?")?"?":""),r;for(r in n)n.hasOwnProperty(r)&&(e+="?"===e.substring(e.length-1,e.length)?"":"\x26",e+=r+"\x3d"+n[r]);g.attributes.QUERY_URL=e;return g}return null}});b("extend-esri")&&m.setObject("layers.WMSLayer",n,w);return n});